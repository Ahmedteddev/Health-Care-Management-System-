{
  "project_info": {
    "name": "hms",
    "path": "C:\\Users\\ahmed\\Desktop\\hms\\hms",
    "generated_at": "2025-12-14T02:19:25.2320244",
    "total_files": 47,
    "total_size": 242566
  },
  "structure": {
    "build": {
    },
    "build.xml": {
      "type": "file",
      "info": {
        "size": 3594,
        "last_modified": "2025-12-14T02:19:24.750592",
        "mime_type": "application/xml",
        "extension": ".xml"
      }
    },
    "hms.iml": {
      "type": "file",
      "info": {
        "size": 433,
        "last_modified": "2025-12-14T02:19:24.760213",
        "mime_type": "application/xml",
        "extension": ".iml"
      }
    },
    "manifest.mf": {
      "type": "file",
      "info": {
        "size": 85,
        "last_modified": "2025-12-14T02:19:24.7665158",
        "mime_type": "text/plain",
        "extension": ".mf"
      }
    },
    "nbproject": {
      "build-impl.xml": {
        "type": "file",
        "info": {
          "size": 100661,
          "last_modified": "2025-12-14T02:19:24.7826134",
          "mime_type": "application/xml",
          "extension": ".xml"
        }
      },
      "genfiles.properties": {
        "type": "file",
        "info": {
          "size": 477,
          "last_modified": "2025-12-14T02:19:24.79368",
          "mime_type": "text/x-java-properties",
          "extension": ".properties"
        }
      },
      "private": {
        "private.properties": {
          "type": "file",
          "info": {
            "size": 111,
            "last_modified": "2025-12-14T02:19:24.8041532",
            "mime_type": "text/x-java-properties",
            "extension": ".properties"
          }
        },
        "private.xml": {
          "type": "file",
          "info": {
            "size": 343,
            "last_modified": "2025-12-14T02:19:24.8158555",
            "mime_type": "application/xml",
            "extension": ".xml"
          }
        }
      },
      "project.properties": {
        "type": "file",
        "info": {
          "size": 3022,
          "last_modified": "2025-12-14T02:19:24.8318798",
          "mime_type": "text/x-java-properties",
          "extension": ".properties"
        }
      },
      "project.xml": {
        "type": "file",
        "info": {
          "size": 511,
          "last_modified": "2025-12-14T02:19:24.8399169",
          "mime_type": "application/xml",
          "extension": ".xml"
        }
      }
    },
    "referrals_output.txt": {
      "type": "file",
      "info": {
        "size": 105,
        "last_modified": "2025-12-14T02:19:24.8455379",
        "mime_type": "text/plain",
        "extension": ".txt"
      }
    },
    "src": {
      "controller": {
        "AppointmentController.java": {
          "type": "file",
          "info": {
            "size": 2020,
            "last_modified": "2025-12-14T02:19:24.8614653",
            "mime_type": "text/x-java-source",
            "extension": ".java"
          }
        },
        "ClinicianController.java": {
          "type": "file",
          "info": {
            "size": 1660,
            "last_modified": "2025-12-14T02:19:24.8614653",
            "mime_type": "text/x-java-source",
            "extension": ".java"
          }
        },
        "PatientController.java": {
          "type": "file",
          "info": {
            "size": 980,
            "last_modified": "2025-12-14T02:19:24.8614653",
            "mime_type": "text/x-java-source",
            "extension": ".java"
          }
        },
        "PrescriptionController.java": {
          "type": "file",
          "info": {
            "size": 2963,
            "last_modified": "2025-12-14T02:19:24.8775107",
            "mime_type": "text/x-java-source",
            "extension": ".java"
          }
        },
        "ReferralController.java": {
          "type": "file",
          "info": {
            "size": 3394,
            "last_modified": "2025-12-14T02:19:24.8934266",
            "mime_type": "text/x-java-source",
            "extension": ".java"
          }
        }
      },
      "data": {
        "appointments.csv": {
          "type": "file",
          "info": {
            "size": 1859,
            "last_modified": "2025-12-14T02:19:24.8934266",
            "mime_type": "text/csv",
            "extension": ".csv"
          }
        },
        "clinicians.csv": {
          "type": "file",
          "info": {
            "size": 1740,
            "last_modified": "2025-12-14T02:19:24.9093486",
            "mime_type": "text/csv",
            "extension": ".csv"
          }
        },
        "facilities.csv": {
          "type": "file",
          "info": {
            "size": 1581,
            "last_modified": "2025-12-14T02:19:24.9093486",
            "mime_type": "text/csv",
            "extension": ".csv"
          }
        },
        "patients.csv": {
          "type": "file",
          "info": {
            "size": 1768,
            "last_modified": "2025-12-14T02:19:24.9310331",
            "mime_type": "text/csv",
            "extension": ".csv"
          }
        },
        "prescriptions.csv": {
          "type": "file",
          "info": {
            "size": 1603,
            "last_modified": "2025-12-14T02:19:24.9353415",
            "mime_type": "text/csv",
            "extension": ".csv"
          }
        },
        "referrals.csv": {
          "type": "file",
          "info": {
            "size": 3296,
            "last_modified": "2025-12-14T02:19:24.9438197",
            "mime_type": "text/csv",
            "extension": ".csv"
          }
        },
        "referrals_output.txt": {
          "type": "file",
          "info": {
            "size": 702,
            "last_modified": "2025-12-14T02:19:24.9565774",
            "mime_type": "text/plain",
            "extension": ".txt"
          }
        },
        "staff.csv": {
          "type": "file",
          "info": {
            "size": 2419,
            "last_modified": "2025-12-14T02:19:24.9592472",
            "mime_type": "text/csv",
            "extension": ".csv"
          }
        }
      },
      "Main": {
        "Main.java": {
          "type": "file",
          "info": {
            "size": 3211,
            "last_modified": "2025-12-14T02:19:24.9746291",
            "mime_type": "text/x-java-source",
            "extension": ".java"
          }
        }
      },
      "model": {
        "Appointment.java": {
          "type": "file",
          "info": {
            "size": 4141,
            "last_modified": "2025-12-14T02:19:24.9949141",
            "mime_type": "text/x-java-source",
            "extension": ".java"
          }
        },
        "AppointmentRepository.java": {
          "type": "file",
          "info": {
            "size": 3521,
            "last_modified": "2025-12-14T02:19:24.9949141",
            "mime_type": "text/x-java-source",
            "extension": ".java"
          }
        },
        "Clinician.java": {
          "type": "file",
          "info": {
            "size": 1977,
            "last_modified": "2025-12-14T02:19:25.0083097",
            "mime_type": "text/x-java-source",
            "extension": ".java"
          }
        },
        "ClinicianRepository.java": {
          "type": "file",
          "info": {
            "size": 3177,
            "last_modified": "2025-12-14T02:19:25.0083097",
            "mime_type": "text/x-java-source",
            "extension": ".java"
          }
        },
        "CsvUtils.java": {
          "type": "file",
          "info": {
            "size": 1179,
            "last_modified": "2025-12-14T02:19:25.0281772",
            "mime_type": "text/x-java-source",
            "extension": ".java"
          }
        },
        "Facility.java": {
          "type": "file",
          "info": {
            "size": 2572,
            "last_modified": "2025-12-14T02:19:25.0362086",
            "mime_type": "text/x-java-source",
            "extension": ".java"
          }
        },
        "FacilityRepository.java": {
          "type": "file",
          "info": {
            "size": 2201,
            "last_modified": "2025-12-14T02:19:25.0399693",
            "mime_type": "text/x-java-source",
            "extension": ".java"
          }
        },
        "Patient.java": {
          "type": "file",
          "info": {
            "size": 3978,
            "last_modified": "2025-12-14T02:19:25.0399693",
            "mime_type": "text/x-java-source",
            "extension": ".java"
          }
        },
        "PatientRepository.java": {
          "type": "file",
          "info": {
            "size": 3686,
            "last_modified": "2025-12-14T02:19:25.0579862",
            "mime_type": "text/x-java-source",
            "extension": ".java"
          }
        },
        "Person.java": {
          "type": "file",
          "info": {
            "size": 907,
            "last_modified": "2025-12-14T02:19:25.075915",
            "mime_type": "text/x-java-source",
            "extension": ".java"
          }
        },
        "Prescription.java": {
          "type": "file",
          "info": {
            "size": 4710,
            "last_modified": "2025-12-14T02:19:25.0857162",
            "mime_type": "text/x-java-source",
            "extension": ".java"
          }
        },
        "PrescriptionRepository.java": {
          "type": "file",
          "info": {
            "size": 5384,
            "last_modified": "2025-12-14T02:19:25.0957687",
            "mime_type": "text/x-java-source",
            "extension": ".java"
          }
        },
        "Referral.java": {
          "type": "file",
          "info": {
            "size": 4876,
            "last_modified": "2025-12-14T02:19:25.1016646",
            "mime_type": "text/x-java-source",
            "extension": ".java"
          }
        },
        "ReferralManager.java": {
          "type": "file",
          "info": {
            "size": 5413,
            "last_modified": "2025-12-14T02:19:25.1016646",
            "mime_type": "text/x-java-source",
            "extension": ".java"
          }
        },
        "ReferralRepository.java": {
          "type": "file",
          "info": {
            "size": 2743,
            "last_modified": "2025-12-14T02:19:25.1173757",
            "mime_type": "text/x-java-source",
            "extension": ".java"
          }
        },
        "Staff.java": {
          "type": "file",
          "info": {
            "size": 704,
            "last_modified": "2025-12-14T02:19:25.1258161",
            "mime_type": "text/x-java-source",
            "extension": ".java"
          }
        },
        "StaffRepository.java": {
          "type": "file",
          "info": {
            "size": 998,
            "last_modified": "2025-12-14T02:19:25.1318395",
            "mime_type": "text/x-java-source",
            "extension": ".java"
          }
        }
      },
      "view": {
        "AppointmentView.java": {
          "type": "file",
          "info": {
            "size": 8425,
            "last_modified": "2025-12-14T02:19:25.133347",
            "mime_type": "text/x-java-source",
            "extension": ".java"
          }
        },
        "ClinicianView.java": {
          "type": "file",
          "info": {
            "size": 7165,
            "last_modified": "2025-12-14T02:19:25.1490187",
            "mime_type": "text/x-java-source",
            "extension": ".java"
          }
        },
        "MainFrame.java": {
          "type": "file",
          "info": {
            "size": 833,
            "last_modified": "2025-12-14T02:19:25.1490187",
            "mime_type": "text/x-java-source",
            "extension": ".java"
          }
        },
        "PatientView.java": {
          "type": "file",
          "info": {
            "size": 8008,
            "last_modified": "2025-12-14T02:19:25.1648279",
            "mime_type": "text/x-java-source",
            "extension": ".java"
          }
        },
        "PrescriptionView.java": {
          "type": "file",
          "info": {
            "size": 14563,
            "last_modified": "2025-12-14T02:19:25.1648279",
            "mime_type": "text/x-java-source",
            "extension": ".java"
          }
        },
        "ReferralView.java": {
          "type": "file",
          "info": {
            "size": 12867,
            "last_modified": "2025-12-14T02:19:25.1810307",
            "mime_type": "text/x-java-source",
            "extension": ".java"
          }
        }
      }
    },
    "structure_exports": {
    },
    "test": {
    }
  },
  "files": [
    {
      "path": "build.xml",
      "content": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<!-- You may freely edit this file. See commented blocks below for -->\r\n<!-- some examples of how to customize the build. -->\r\n<!-- (If you delete it and reopen the project it will be recreated.) -->\r\n<!-- By default, only the Clean and Build commands use this build script. -->\r\n<!-- Commands such as Run, Debug, and Test only use this build script if -->\r\n<!-- the Compile on Save feature is turned off for the project. -->\r\n<!-- You can turn off the Compile on Save (or Deploy on Save) setting -->\r\n<!-- in the project's Project Properties dialog box.-->\r\n<project name=\"hms\" default=\"default\" basedir=\".\">\r\n    <description>Builds, tests, and runs the project hms.</description>\r\n    <import file=\"nbproject/build-impl.xml\"/>\r\n    <!--\r\n\r\n    There exist several targets which are by default empty and which can be \r\n    used for execution of your tasks. These targets are usually executed \r\n    before and after some main targets. They are: \r\n\r\n      -pre-init:                 called before initialization of project properties\r\n      -post-init:                called after initialization of project properties\r\n      -pre-compile:              called before javac compilation\r\n      -post-compile:             called after javac compilation\r\n      -pre-compile-single:       called before javac compilation of single file\r\n      -post-compile-single:      called after javac compilation of single file\r\n      -pre-compile-test:         called before javac compilation of JUnit tests\r\n      -post-compile-test:        called after javac compilation of JUnit tests\r\n      -pre-compile-test-single:  called before javac compilation of single JUnit test\r\n      -post-compile-test-single: called after javac compilation of single JUunit test\r\n      -pre-jar:                  called before JAR building\r\n      -post-jar:                 called after JAR building\r\n      -post-clean:               called after cleaning build products\r\n\r\n    (Targets beginning with '-' are not intended to be called on their own.)\r\n\r\n    Example of inserting an obfuscator after compilation could look like this:\r\n\r\n        <target name=\"-post-compile\">\r\n            <obfuscate>\r\n                <fileset dir=\"${build.classes.dir}\"/>\r\n            </obfuscate>\r\n        </target>\r\n\r\n    For list of available properties check the imported \r\n    nbproject/build-impl.xml file. \r\n\r\n\r\n    Another way to customize the build is by overriding existing main targets.\r\n    The targets of interest are: \r\n\r\n      -init-macrodef-javac:     defines macro for javac compilation\r\n      -init-macrodef-junit:     defines macro for junit execution\r\n      -init-macrodef-debug:     defines macro for class debugging\r\n      -init-macrodef-java:      defines macro for class execution\r\n      -do-jar:                  JAR building\r\n      run:                      execution of project \r\n      -javadoc-build:           Javadoc generation\r\n      test-report:              JUnit report generation\r\n\r\n    An example of overriding the target for project execution could look like this:\r\n\r\n        <target name=\"run\" depends=\"hms-impl.jar\">\r\n            <exec dir=\"bin\" executable=\"launcher.exe\">\r\n                <arg file=\"${dist.jar}\"/>\r\n            </exec>\r\n        </target>\r\n\r\n    Notice that the overridden target depends on the jar target and not only on \r\n    the compile target as the regular run target does. Again, for a list of available \r\n    properties which you can use, check the target you are overriding in the\r\n    nbproject/build-impl.xml file. \r\n\r\n    -->\r\n</project>\r\n",
      "info": {
        "size": 3594,
        "last_modified": "2025-12-14T02:19:24.750592",
        "mime_type": "application/xml",
        "extension": ".xml"
      }
    },
    {
      "path": "hms.iml",
      "content": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<module type=\"JAVA_MODULE\" version=\"4\">\r\n  <component name=\"NewModuleRootManager\" inherit-compiler-output=\"true\">\r\n    <exclude-output />\r\n    <content url=\"file://$MODULE_DIR$\">\r\n      <sourceFolder url=\"file://$MODULE_DIR$/src\" isTestSource=\"false\" />\r\n    </content>\r\n    <orderEntry type=\"inheritedJdk\" />\r\n    <orderEntry type=\"sourceFolder\" forTests=\"false\" />\r\n  </component>\r\n</module>",
      "info": {
        "size": 433,
        "last_modified": "2025-12-14T02:19:24.760213",
        "mime_type": "application/xml",
        "extension": ".iml"
      }
    },
    {
      "path": "manifest.mf",
      "content": "Manifest-Version: 1.0\r\nX-COMMENT: Main-Class will be added automatically by build\r\n\r\n",
      "info": {
        "size": 85,
        "last_modified": "2025-12-14T02:19:24.7665158",
        "mime_type": "text/plain",
        "extension": ".mf"
      }
    },
    {
      "path": "nbproject\\build-impl.xml",
      "content": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<!--\r\n*** GENERATED FROM project.xml - DO NOT EDIT  ***\r\n***         EDIT ../build.xml INSTEAD         ***\r\n\r\nFor the purpose of easier reading the script\r\nis divided into following sections:\r\n\r\n  - initialization\r\n  - compilation\r\n  - jar\r\n  - execution\r\n  - debugging\r\n  - javadoc\r\n  - test compilation\r\n  - test execution\r\n  - test debugging\r\n  - applet\r\n  - cleanup\r\n\r\n        -->\r\n<project xmlns:if=\"ant:if\" xmlns:j2seproject1=\"http://www.netbeans.org/ns/j2se-project/1\" xmlns:j2seproject3=\"http://www.netbeans.org/ns/j2se-project/3\" xmlns:jaxrpc=\"http://www.netbeans.org/ns/j2se-project/jax-rpc\" xmlns:unless=\"ant:unless\" basedir=\"..\" default=\"default\" name=\"hms-impl\">\r\n    <fail message=\"Please build using Ant 1.8.0 or higher.\">\r\n        <condition>\r\n            <not>\r\n                <antversion atleast=\"1.8.0\"/>\r\n            </not>\r\n        </condition>\r\n    </fail>\r\n    <target depends=\"test,jar,javadoc\" description=\"Build and test whole project.\" name=\"default\"/>\r\n    <!-- \r\n                ======================\r\n                INITIALIZATION SECTION \r\n                ======================\r\n            -->\r\n    <target name=\"-pre-init\">\r\n        <!-- Empty placeholder for easier customization. -->\r\n        <!-- You can override this target in the ../build.xml file. -->\r\n    </target>\r\n    <target depends=\"-pre-init\" name=\"-init-private\">\r\n        <property file=\"nbproject/private/config.properties\"/>\r\n        <property file=\"nbproject/private/configs/${config}.properties\"/>\r\n        <property file=\"nbproject/private/private.properties\"/>\r\n    </target>\r\n    <target depends=\"-pre-init,-init-private\" name=\"-init-user\">\r\n        <property file=\"${user.properties.file}\"/>\r\n        <!-- The two properties below are usually overridden -->\r\n        <!-- by the active platform. Just a fallback. -->\r\n        <property name=\"default.javac.source\" value=\"1.8\"/>\r\n        <property name=\"default.javac.target\" value=\"1.8\"/>\r\n    </target>\r\n    <target depends=\"-pre-init,-init-private,-init-user\" name=\"-init-project\">\r\n        <property file=\"nbproject/configs/${config}.properties\"/>\r\n        <property file=\"nbproject/project.properties\"/>\r\n    </target>\r\n    <target name=\"-init-modules-supported\">\r\n        <condition property=\"modules.supported.internal\" value=\"true\">\r\n            <not>\r\n                <matches pattern=\"1\\.[0-8](\\..*)?\" string=\"${javac.source}\"/>\r\n            </not>\r\n        </condition>\r\n    </target>\r\n    <target depends=\"-init-modules-supported\" if=\"modules.supported.internal\" name=\"-init-macrodef-modulename\">\r\n        <macrodef name=\"modulename\" uri=\"http://www.netbeans.org/ns/j2se-project/3\">\r\n            <attribute name=\"property\"/>\r\n            <attribute name=\"sourcepath\"/>\r\n            <sequential>\r\n                <loadresource property=\"@{property}\" quiet=\"true\">\r\n                    <javaresource classpath=\"@{sourcepath}\" name=\"module-info.java\" parentFirst=\"false\"/>\r\n                    <filterchain>\r\n                        <stripjavacomments/>\r\n                        <linecontainsregexp>\r\n                            <regexp pattern=\"module .* \\{\"/>\r\n                        </linecontainsregexp>\r\n                        <tokenfilter>\r\n                            <linetokenizer/>\r\n                            <replaceregex flags=\"s\" pattern=\"(\\s*module\\s+)(\\S*)(\\s*\\{.*)\" replace=\"\\2\"/>\r\n                        </tokenfilter>\r\n                        <striplinebreaks/>\r\n                    </filterchain>\r\n                </loadresource>\r\n            </sequential>\r\n        </macrodef>\r\n    </target>\r\n    <target depends=\"-init-modules-supported,-init-macrodef-modulename\" if=\"modules.supported.internal\" name=\"-init-source-module-properties\">\r\n        <fail message=\"Java 9 support requires Ant 1.10.0 or higher.\">\r\n            <condition>\r\n                <not>\r\n                    <antversion atleast=\"1.10.0\"/>\r\n                </not>\r\n            </condition>\r\n        </fail>\r\n        <j2seproject3:modulename property=\"module.name\" sourcepath=\"${src.dir}\"/>\r\n        <condition property=\"named.module.internal\">\r\n            <and>\r\n                <isset property=\"module.name\"/>\r\n                <length length=\"0\" string=\"${module.name}\" when=\"greater\"/>\r\n            </and>\r\n        </condition>\r\n        <condition property=\"unnamed.module.internal\">\r\n            <not>\r\n                <isset property=\"named.module.internal\"/>\r\n            </not>\r\n        </condition>\r\n        <property name=\"javac.modulepath\" value=\"\"/>\r\n        <property name=\"run.modulepath\" value=\"${javac.modulepath}\"/>\r\n        <property name=\"module.build.classes.dir\" value=\"${build.classes.dir}\"/>\r\n        <property name=\"debug.modulepath\" value=\"${run.modulepath}\"/>\r\n        <property name=\"javac.upgrademodulepath\" value=\"\"/>\r\n        <property name=\"run.upgrademodulepath\" value=\"${javac.upgrademodulepath}\"/>\r\n        <condition else=\"\" property=\"javac.systemmodulepath.cmd.line.arg\" value=\"--system '${javac.systemmodulepath}'\">\r\n            <and>\r\n                <isset property=\"javac.systemmodulepath\"/>\r\n                <length length=\"0\" string=\"${javac.systemmodulepath}\" when=\"greater\"/>\r\n            </and>\r\n        </condition>\r\n        <property name=\"dist.jlink.dir\" value=\"${dist.dir}/jlink\"/>\r\n        <property name=\"dist.jlink.output\" value=\"${dist.jlink.dir}/${application.title}\"/>\r\n        <property name=\"module.name\" value=\"\"/>\r\n    </target>\r\n    <target depends=\"-pre-init,-init-private,-init-user,-init-project,-init-macrodef-property,-init-modules-supported\" name=\"-do-init\">\r\n        <property name=\"platform.java\" value=\"${java.home}/bin/java\"/>\r\n        <available file=\"${manifest.file}\" property=\"manifest.available\"/>\r\n        <condition property=\"splashscreen.available\">\r\n            <and>\r\n                <not>\r\n                    <equals arg1=\"${application.splash}\" arg2=\"\" trim=\"true\"/>\r\n                </not>\r\n                <available file=\"${application.splash}\"/>\r\n            </and>\r\n        </condition>\r\n        <condition property=\"main.class.available\">\r\n            <and>\r\n                <isset property=\"main.class\"/>\r\n                <not>\r\n                    <equals arg1=\"${main.class}\" arg2=\"\" trim=\"true\"/>\r\n                </not>\r\n            </and>\r\n        </condition>\r\n        <condition property=\"profile.available\">\r\n            <and>\r\n                <isset property=\"javac.profile\"/>\r\n                <length length=\"0\" string=\"${javac.profile}\" when=\"greater\"/>\r\n                <not>\r\n                    <matches pattern=\"1\\.[0-7](\\..*)?\" string=\"${javac.source}\"/>\r\n                </not>\r\n            </and>\r\n        </condition>\r\n        <condition property=\"do.archive\">\r\n            <or>\r\n                <not>\r\n                    <istrue value=\"${jar.archive.disabled}\"/>\r\n                </not>\r\n                <istrue value=\"${not.archive.disabled}\"/>\r\n            </or>\r\n        </condition>\r\n        <condition property=\"do.archive+manifest.available\">\r\n            <and>\r\n                <isset property=\"manifest.available\"/>\r\n                <istrue value=\"${do.archive}\"/>\r\n            </and>\r\n        </condition>\r\n        <condition property=\"do.archive+main.class.available\">\r\n            <and>\r\n                <isset property=\"main.class.available\"/>\r\n                <istrue value=\"${do.archive}\"/>\r\n            </and>\r\n        </condition>\r\n        <condition property=\"do.archive+splashscreen.available\">\r\n            <and>\r\n                <isset property=\"splashscreen.available\"/>\r\n                <istrue value=\"${do.archive}\"/>\r\n            </and>\r\n        </condition>\r\n        <condition property=\"do.archive+profile.available\">\r\n            <and>\r\n                <isset property=\"profile.available\"/>\r\n                <istrue value=\"${do.archive}\"/>\r\n            </and>\r\n        </condition>\r\n        <condition property=\"have.tests\">\r\n            <or>\r\n                <available file=\"${test.src.dir}\"/>\r\n            </or>\r\n        </condition>\r\n        <condition property=\"have.sources\">\r\n            <or>\r\n                <available file=\"${src.dir}\"/>\r\n            </or>\r\n        </condition>\r\n        <condition property=\"netbeans.home+have.tests\">\r\n            <and>\r\n                <isset property=\"netbeans.home\"/>\r\n                <isset property=\"have.tests\"/>\r\n            </and>\r\n        </condition>\r\n        <condition property=\"no.javadoc.preview\">\r\n            <and>\r\n                <isset property=\"javadoc.preview\"/>\r\n                <isfalse value=\"${javadoc.preview}\"/>\r\n            </and>\r\n        </condition>\r\n        <property name=\"run.jvmargs\" value=\"\"/>\r\n        <property name=\"run.jvmargs.ide\" value=\"\"/>\r\n        <property name=\"javac.compilerargs\" value=\"\"/>\r\n        <property name=\"work.dir\" value=\"${basedir}\"/>\r\n        <condition property=\"no.deps\">\r\n            <and>\r\n                <istrue value=\"${no.dependencies}\"/>\r\n            </and>\r\n        </condition>\r\n        <property name=\"javac.debug\" value=\"true\"/>\r\n        <property name=\"javadoc.preview\" value=\"true\"/>\r\n        <property name=\"application.args\" value=\"\"/>\r\n        <property name=\"source.encoding\" value=\"${file.encoding}\"/>\r\n        <property name=\"runtime.encoding\" value=\"${source.encoding}\"/>\r\n        <property name=\"manifest.encoding\" value=\"${source.encoding}\"/>\r\n        <condition property=\"javadoc.encoding.used\" value=\"${javadoc.encoding}\">\r\n            <and>\r\n                <isset property=\"javadoc.encoding\"/>\r\n                <not>\r\n                    <equals arg1=\"${javadoc.encoding}\" arg2=\"\"/>\r\n                </not>\r\n            </and>\r\n        </condition>\r\n        <property name=\"javadoc.encoding.used\" value=\"${source.encoding}\"/>\r\n        <property name=\"includes\" value=\"**\"/>\r\n        <property name=\"excludes\" value=\"\"/>\r\n        <property name=\"do.depend\" value=\"false\"/>\r\n        <condition property=\"do.depend.true\">\r\n            <istrue value=\"${do.depend}\"/>\r\n        </condition>\r\n        <path id=\"endorsed.classpath.path\" path=\"${endorsed.classpath}\"/>\r\n        <condition else=\"\" property=\"endorsed.classpath.cmd.line.arg\" value=\"-Xbootclasspath/p:'${toString:endorsed.classpath.path}'\">\r\n            <and>\r\n                <isset property=\"endorsed.classpath\"/>\r\n                <not>\r\n                    <equals arg1=\"${endorsed.classpath}\" arg2=\"\" trim=\"true\"/>\r\n                </not>\r\n            </and>\r\n        </condition>\r\n        <condition else=\"\" property=\"javac.profile.cmd.line.arg\" value=\"-profile ${javac.profile}\">\r\n            <isset property=\"profile.available\"/>\r\n        </condition>\r\n        <condition else=\"false\" property=\"jdkBug6558476\">\r\n            <and>\r\n                <matches pattern=\"1\\.[56]\" string=\"${java.specification.version}\"/>\r\n                <not>\r\n                    <os family=\"unix\"/>\r\n                </not>\r\n            </and>\r\n        </condition>\r\n        <condition else=\"false\" property=\"javac.fork\">\r\n            <or>\r\n                <istrue value=\"${jdkBug6558476}\"/>\r\n                <istrue value=\"${javac.external.vm}\"/>\r\n            </or>\r\n        </condition>\r\n        <property name=\"jar.index\" value=\"false\"/>\r\n        <property name=\"jar.index.metainf\" value=\"${jar.index}\"/>\r\n        <property name=\"copylibs.rebase\" value=\"true\"/>\r\n        <available file=\"${meta.inf.dir}/persistence.xml\" property=\"has.persistence.xml\"/>\r\n        <condition property=\"junit.available\">\r\n            <or>\r\n                <available classname=\"org.junit.Test\" classpath=\"${run.test.classpath}\"/>\r\n                <available classname=\"junit.framework.Test\" classpath=\"${run.test.classpath}\"/>\r\n            </or>\r\n        </condition>\r\n        <condition property=\"testng.available\">\r\n            <available classname=\"org.testng.annotations.Test\" classpath=\"${run.test.classpath}\"/>\r\n        </condition>\r\n        <condition property=\"junit+testng.available\">\r\n            <and>\r\n                <istrue value=\"${junit.available}\"/>\r\n                <istrue value=\"${testng.available}\"/>\r\n            </and>\r\n        </condition>\r\n        <condition else=\"testng\" property=\"testng.mode\" value=\"mixed\">\r\n            <istrue value=\"${junit+testng.available}\"/>\r\n        </condition>\r\n        <condition else=\"\" property=\"testng.debug.mode\" value=\"-mixed\">\r\n            <istrue value=\"${junit+testng.available}\"/>\r\n        </condition>\r\n        <property name=\"java.failonerror\" value=\"true\"/>\r\n    </target>\r\n    <target name=\"-post-init\">\r\n        <!-- Empty placeholder for easier customization. -->\r\n        <!-- You can override this target in the ../build.xml file. -->\r\n    </target>\r\n    <target depends=\"-pre-init,-init-private,-init-user,-init-project,-do-init\" name=\"-init-check\">\r\n        <fail unless=\"src.dir\">Must set src.dir</fail>\r\n        <fail unless=\"test.src.dir\">Must set test.src.dir</fail>\r\n        <fail unless=\"build.dir\">Must set build.dir</fail>\r\n        <fail unless=\"dist.dir\">Must set dist.dir</fail>\r\n        <fail unless=\"build.classes.dir\">Must set build.classes.dir</fail>\r\n        <fail unless=\"dist.javadoc.dir\">Must set dist.javadoc.dir</fail>\r\n        <fail unless=\"build.test.classes.dir\">Must set build.test.classes.dir</fail>\r\n        <fail unless=\"build.test.results.dir\">Must set build.test.results.dir</fail>\r\n        <fail unless=\"build.classes.excludes\">Must set build.classes.excludes</fail>\r\n        <fail unless=\"dist.jar\">Must set dist.jar</fail>\r\n    </target>\r\n    <target name=\"-init-macrodef-property\">\r\n        <macrodef name=\"property\" uri=\"http://www.netbeans.org/ns/j2se-project/1\">\r\n            <attribute name=\"name\"/>\r\n            <attribute name=\"value\"/>\r\n            <sequential>\r\n                <property name=\"@{name}\" value=\"${@{value}}\"/>\r\n            </sequential>\r\n        </macrodef>\r\n    </target>\r\n    <target depends=\"-init-ap-cmdline-properties,-init-source-module-properties\" if=\"modules.supported.internal\" name=\"-init-macrodef-javac-with-module\">\r\n        <macrodef name=\"javac\" uri=\"http://www.netbeans.org/ns/j2se-project/3\">\r\n            <attribute default=\"${src.dir}\" name=\"srcdir\"/>\r\n            <attribute default=\"${build.classes.dir}\" name=\"destdir\"/>\r\n            <attribute default=\"${javac.classpath}\" name=\"classpath\"/>\r\n            <attribute default=\"${javac.modulepath}\" name=\"modulepath\"/>\r\n            <attribute default=\"${javac.upgrademodulepath}\" name=\"upgrademodulepath\"/>\r\n            <attribute default=\"${javac.processorpath}\" name=\"processorpath\"/>\r\n            <attribute default=\"${javac.processormodulepath}\" name=\"processormodulepath\"/>\r\n            <attribute default=\"${build.generated.sources.dir}/ap-source-output\" name=\"apgeneratedsrcdir\"/>\r\n            <attribute default=\"${includes}\" name=\"includes\"/>\r\n            <attribute default=\"${excludes}\" name=\"excludes\"/>\r\n            <attribute default=\"${javac.debug}\" name=\"debug\"/>\r\n            <attribute default=\"${empty.dir}\" name=\"sourcepath\" unless:set=\"named.module.internal\"/>\r\n            <attribute default=\"${src.dir}\" if:set=\"named.module.internal\" name=\"sourcepath\"/>\r\n            <attribute default=\"${empty.dir}\" name=\"gensrcdir\"/>\r\n            <element name=\"customize\" optional=\"true\"/>\r\n            <sequential>\r\n                <condition property=\"warn.excludes.internal\">\r\n                    <and>\r\n                        <isset property=\"named.module.internal\"/>\r\n                        <length length=\"0\" string=\"@{excludes}\" trim=\"true\" when=\"greater\"/>\r\n                    </and>\r\n                </condition>\r\n                <echo if:set=\"warn.excludes.internal\" level=\"warning\" message=\"The javac excludes are not supported in the JDK 9 Named Module.\"/>\r\n                <property location=\"${build.dir}/empty\" name=\"empty.dir\"/>\r\n                <mkdir dir=\"${empty.dir}\"/>\r\n                <mkdir dir=\"@{apgeneratedsrcdir}\"/>\r\n                <condition property=\"processormodulepath.set\">\r\n                    <resourcecount count=\"0\" when=\"greater\">\r\n                        <path>\r\n                            <pathelement path=\"@{processormodulepath}\"/>\r\n                        </path>\r\n                    </resourcecount>\r\n                </condition>\r\n                <javac debug=\"@{debug}\" deprecation=\"${javac.deprecation}\" destdir=\"@{destdir}\" encoding=\"${source.encoding}\" excludes=\"@{excludes}\" fork=\"${javac.fork}\" includeantruntime=\"false\" includes=\"@{includes}\" source=\"${javac.source}\" sourcepath=\"@{sourcepath}\" srcdir=\"@{srcdir}\" target=\"${javac.target}\" tempdir=\"${java.io.tmpdir}\">\r\n                    <src>\r\n                        <dirset dir=\"@{gensrcdir}\" erroronmissingdir=\"false\">\r\n                            <include name=\"*\"/>\r\n                        </dirset>\r\n                    </src>\r\n                    <classpath>\r\n                        <path path=\"@{classpath}\"/>\r\n                    </classpath>\r\n                    <modulepath>\r\n                        <path path=\"@{modulepath}\"/>\r\n                    </modulepath>\r\n                    <upgrademodulepath>\r\n                        <path path=\"@{upgrademodulepath}\"/>\r\n                    </upgrademodulepath>\r\n                    <compilerarg line=\"${javac.systemmodulepath.cmd.line.arg}\"/>\r\n                    <compilerarg line=\"${javac.profile.cmd.line.arg}\"/>\r\n                    <compilerarg line=\"${javac.compilerargs}\"/>\r\n                    <compilerarg if:set=\"processormodulepath.set\" value=\"--processor-module-path\"/>\r\n                    <compilerarg if:set=\"processormodulepath.set\" path=\"@{processormodulepath}\"/>\r\n                    <compilerarg unless:set=\"processormodulepath.set\" value=\"-processorpath\"/>\r\n                    <compilerarg path=\"@{processorpath}:${empty.dir}\" unless:set=\"processormodulepath.set\"/>\r\n                    <compilerarg line=\"${ap.processors.internal}\"/>\r\n                    <compilerarg line=\"${annotation.processing.processor.options}\"/>\r\n                    <compilerarg value=\"-s\"/>\r\n                    <compilerarg path=\"@{apgeneratedsrcdir}\"/>\r\n                    <compilerarg line=\"${ap.proc.none.internal}\"/>\r\n                    <customize/>\r\n                </javac>\r\n            </sequential>\r\n        </macrodef>\r\n    </target>\r\n    <target depends=\"-init-ap-cmdline-properties,-init-source-module-properties\" if=\"ap.supported.internal\" name=\"-init-macrodef-javac-with-processors\" unless=\"modules.supported.internal\">\r\n        <macrodef name=\"javac\" uri=\"http://www.netbeans.org/ns/j2se-project/3\">\r\n            <attribute default=\"${src.dir}\" name=\"srcdir\"/>\r\n            <attribute default=\"${build.classes.dir}\" name=\"destdir\"/>\r\n            <attribute default=\"${javac.classpath}\" name=\"classpath\"/>\r\n            <attribute default=\"${javac.modulepath}\" name=\"modulepath\"/>\r\n            <attribute default=\"${javac.upgrademodulepath}\" name=\"upgrademodulepath\"/>\r\n            <attribute default=\"${javac.processorpath}\" name=\"processorpath\"/>\r\n            <attribute default=\"${build.generated.sources.dir}/ap-source-output\" name=\"apgeneratedsrcdir\"/>\r\n            <attribute default=\"${includes}\" name=\"includes\"/>\r\n            <attribute default=\"${excludes}\" name=\"excludes\"/>\r\n            <attribute default=\"${javac.debug}\" name=\"debug\"/>\r\n            <attribute default=\"${empty.dir}\" name=\"sourcepath\"/>\r\n            <attribute default=\"${empty.dir}\" name=\"gensrcdir\"/>\r\n            <element name=\"customize\" optional=\"true\"/>\r\n            <sequential>\r\n                <property location=\"${build.dir}/empty\" name=\"empty.dir\"/>\r\n                <mkdir dir=\"${empty.dir}\"/>\r\n                <mkdir dir=\"@{apgeneratedsrcdir}\"/>\r\n                <javac debug=\"@{debug}\" deprecation=\"${javac.deprecation}\" destdir=\"@{destdir}\" encoding=\"${source.encoding}\" excludes=\"@{excludes}\" fork=\"${javac.fork}\" includeantruntime=\"false\" includes=\"@{includes}\" source=\"${javac.source}\" sourcepath=\"@{sourcepath}\" srcdir=\"@{srcdir}\" target=\"${javac.target}\" tempdir=\"${java.io.tmpdir}\">\r\n                    <src>\r\n                        <dirset dir=\"@{gensrcdir}\" erroronmissingdir=\"false\">\r\n                            <include name=\"*\"/>\r\n                        </dirset>\r\n                    </src>\r\n                    <classpath>\r\n                        <path path=\"@{classpath}\"/>\r\n                    </classpath>\r\n                    <compilerarg line=\"${endorsed.classpath.cmd.line.arg}\"/>\r\n                    <compilerarg line=\"${javac.profile.cmd.line.arg}\"/>\r\n                    <compilerarg line=\"${javac.compilerargs}\"/>\r\n                    <compilerarg value=\"-processorpath\"/>\r\n                    <compilerarg path=\"@{processorpath}:${empty.dir}\"/>\r\n                    <compilerarg line=\"${ap.processors.internal}\"/>\r\n                    <compilerarg line=\"${annotation.processing.processor.options}\"/>\r\n                    <compilerarg value=\"-s\"/>\r\n                    <compilerarg path=\"@{apgeneratedsrcdir}\"/>\r\n                    <compilerarg line=\"${ap.proc.none.internal}\"/>\r\n                    <customize/>\r\n                </javac>\r\n            </sequential>\r\n        </macrodef>\r\n    </target>\r\n    <target depends=\"-init-ap-cmdline-properties,-init-source-module-properties\" name=\"-init-macrodef-javac-without-processors\" unless=\"ap.supported.internal\">\r\n        <macrodef name=\"javac\" uri=\"http://www.netbeans.org/ns/j2se-project/3\">\r\n            <attribute default=\"${src.dir}\" name=\"srcdir\"/>\r\n            <attribute default=\"${build.classes.dir}\" name=\"destdir\"/>\r\n            <attribute default=\"${javac.classpath}\" name=\"classpath\"/>\r\n            <attribute default=\"${javac.modulepath}\" name=\"modulepath\"/>\r\n            <attribute default=\"${javac.upgrademodulepath}\" name=\"upgrademodulepath\"/>\r\n            <attribute default=\"${javac.processorpath}\" name=\"processorpath\"/>\r\n            <attribute default=\"${build.generated.sources.dir}/ap-source-output\" name=\"apgeneratedsrcdir\"/>\r\n            <attribute default=\"${includes}\" name=\"includes\"/>\r\n            <attribute default=\"${excludes}\" name=\"excludes\"/>\r\n            <attribute default=\"${javac.debug}\" name=\"debug\"/>\r\n            <attribute default=\"${empty.dir}\" name=\"sourcepath\"/>\r\n            <attribute default=\"${empty.dir}\" name=\"gensrcdir\"/>\r\n            <element name=\"customize\" optional=\"true\"/>\r\n            <sequential>\r\n                <property location=\"${build.dir}/empty\" name=\"empty.dir\"/>\r\n                <mkdir dir=\"${empty.dir}\"/>\r\n                <javac debug=\"@{debug}\" deprecation=\"${javac.deprecation}\" destdir=\"@{destdir}\" encoding=\"${source.encoding}\" excludes=\"@{excludes}\" fork=\"${javac.fork}\" includeantruntime=\"false\" includes=\"@{includes}\" source=\"${javac.source}\" sourcepath=\"@{sourcepath}\" srcdir=\"@{srcdir}\" target=\"${javac.target}\" tempdir=\"${java.io.tmpdir}\">\r\n                    <src>\r\n                        <dirset dir=\"@{gensrcdir}\" erroronmissingdir=\"false\">\r\n                            <include name=\"*\"/>\r\n                        </dirset>\r\n                    </src>\r\n                    <classpath>\r\n                        <path path=\"@{classpath}\"/>\r\n                    </classpath>\r\n                    <compilerarg line=\"${endorsed.classpath.cmd.line.arg}\"/>\r\n                    <compilerarg line=\"${javac.profile.cmd.line.arg}\"/>\r\n                    <compilerarg line=\"${javac.compilerargs}\"/>\r\n                    <customize/>\r\n                </javac>\r\n            </sequential>\r\n        </macrodef>\r\n    </target>\r\n    <target depends=\"-init-macrodef-javac-with-module,-init-macrodef-javac-with-processors,-init-macrodef-javac-without-processors\" name=\"-init-macrodef-javac\">\r\n        <macrodef name=\"depend\" uri=\"http://www.netbeans.org/ns/j2se-project/3\">\r\n            <attribute default=\"${src.dir}\" name=\"srcdir\"/>\r\n            <attribute default=\"${build.classes.dir}\" name=\"destdir\"/>\r\n            <attribute default=\"${javac.classpath}\" name=\"classpath\"/>\r\n            <sequential>\r\n                <depend cache=\"${build.dir}/depcache\" destdir=\"@{destdir}\" excludes=\"${excludes}\" includes=\"${includes}\" srcdir=\"@{srcdir}\">\r\n                    <classpath>\r\n                        <path path=\"@{classpath}\"/>\r\n                    </classpath>\r\n                </depend>\r\n            </sequential>\r\n        </macrodef>\r\n        <macrodef name=\"force-recompile\" uri=\"http://www.netbeans.org/ns/j2se-project/3\">\r\n            <attribute default=\"${build.classes.dir}\" name=\"destdir\"/>\r\n            <sequential>\r\n                <fail unless=\"javac.includes\">Must set javac.includes</fail>\r\n                <pathconvert pathsep=\"${line.separator}\" property=\"javac.includes.binary\">\r\n                    <path>\r\n                        <filelist dir=\"@{destdir}\" files=\"${javac.includes}\"/>\r\n                    </path>\r\n                    <globmapper from=\"*.java\" to=\"*.class\"/>\r\n                </pathconvert>\r\n                <tempfile deleteonexit=\"true\" property=\"javac.includesfile.binary\"/>\r\n                <echo file=\"${javac.includesfile.binary}\" message=\"${javac.includes.binary}\"/>\r\n                <delete>\r\n                    <files includesfile=\"${javac.includesfile.binary}\"/>\r\n                </delete>\r\n                <delete>\r\n                    <fileset file=\"${javac.includesfile.binary}\"/>\r\n                </delete>\r\n            </sequential>\r\n        </macrodef>\r\n    </target>\r\n    <target if=\"${junit.available}\" name=\"-init-macrodef-junit-init\">\r\n        <condition else=\"false\" property=\"nb.junit.batch\" value=\"true\">\r\n            <and>\r\n                <istrue value=\"${junit.available}\"/>\r\n                <not>\r\n                    <isset property=\"test.method\"/>\r\n                </not>\r\n            </and>\r\n        </condition>\r\n        <condition else=\"false\" property=\"nb.junit.single\" value=\"true\">\r\n            <and>\r\n                <istrue value=\"${junit.available}\"/>\r\n                <isset property=\"test.method\"/>\r\n            </and>\r\n        </condition>\r\n    </target>\r\n    <target name=\"-init-test-properties\">\r\n        <property name=\"test.binaryincludes\" value=\"&lt;nothing&gt;\"/>\r\n        <property name=\"test.binarytestincludes\" value=\"\"/>\r\n        <property name=\"test.binaryexcludes\" value=\"\"/>\r\n    </target>\r\n    <target depends=\"-init-modules-supported\" if=\"modules.supported.internal\" name=\"-init-macrodef-junit-prototype-with-module\">\r\n        <macrodef name=\"junit-prototype\" uri=\"http://www.netbeans.org/ns/j2se-project/3\">\r\n            <attribute default=\"${includes}\" name=\"includes\"/>\r\n            <attribute default=\"${excludes}\" name=\"excludes\"/>\r\n            <element name=\"customizePrototype\" optional=\"true\"/>\r\n            <sequential>\r\n                <property name=\"junit.forkmode\" value=\"perTest\"/>\r\n                <junit dir=\"${work.dir}\" errorproperty=\"tests.failed\" failureproperty=\"tests.failed\" fork=\"true\" forkmode=\"${junit.forkmode}\" showoutput=\"true\" tempdir=\"${build.dir}\">\r\n                    <syspropertyset>\r\n                        <propertyref prefix=\"test-sys-prop.\"/>\r\n                        <mapper from=\"test-sys-prop.*\" to=\"*\" type=\"glob\"/>\r\n                    </syspropertyset>\r\n                    <classpath>\r\n                        <path path=\"${run.test.classpath}\"/>\r\n                    </classpath>\r\n                    <modulepath>\r\n                        <path path=\"${run.test.modulepath}\"/>\r\n                    </modulepath>\r\n                    <formatter type=\"brief\" usefile=\"false\"/>\r\n                    <formatter type=\"xml\"/>\r\n                    <jvmarg line=\"${endorsed.classpath.cmd.line.arg}\"/>\r\n                    <jvmarg value=\"-ea\"/>\r\n                    <jvmarg line=\"${run.test.jvmargs}\"/>\r\n                    <customizePrototype/>\r\n                </junit>\r\n            </sequential>\r\n        </macrodef>\r\n    </target>\r\n    <target depends=\"-init-modules-supported\" name=\"-init-macrodef-junit-prototype-without-module\" unless=\"modules.supported.internal\">\r\n        <macrodef name=\"junit-prototype\" uri=\"http://www.netbeans.org/ns/j2se-project/3\">\r\n            <attribute default=\"${includes}\" name=\"includes\"/>\r\n            <attribute default=\"${excludes}\" name=\"excludes\"/>\r\n            <element name=\"customizePrototype\" optional=\"true\"/>\r\n            <sequential>\r\n                <property name=\"junit.forkmode\" value=\"perTest\"/>\r\n                <junit dir=\"${work.dir}\" errorproperty=\"tests.failed\" failureproperty=\"tests.failed\" fork=\"true\" forkmode=\"${junit.forkmode}\" showoutput=\"true\" tempdir=\"${build.dir}\">\r\n                    <syspropertyset>\r\n                        <propertyref prefix=\"test-sys-prop.\"/>\r\n                        <mapper from=\"test-sys-prop.*\" to=\"*\" type=\"glob\"/>\r\n                    </syspropertyset>\r\n                    <classpath>\r\n                        <path path=\"${run.test.classpath}\"/>\r\n                    </classpath>\r\n                    <formatter type=\"brief\" usefile=\"false\"/>\r\n                    <formatter type=\"xml\"/>\r\n                    <jvmarg line=\"${endorsed.classpath.cmd.line.arg}\"/>\r\n                    <jvmarg value=\"-ea\"/>\r\n                    <customizePrototype/>\r\n                </junit>\r\n            </sequential>\r\n        </macrodef>\r\n    </target>\r\n    <target depends=\"-init-test-properties,-init-macrodef-junit-prototype-with-module,-init-macrodef-junit-prototype-without-module\" if=\"${nb.junit.single}\" name=\"-init-macrodef-junit-single\" unless=\"${nb.junit.batch}\">\r\n        <macrodef name=\"junit\" uri=\"http://www.netbeans.org/ns/j2se-project/3\">\r\n            <attribute default=\"${includes}\" name=\"includes\"/>\r\n            <attribute default=\"${excludes}\" name=\"excludes\"/>\r\n            <attribute default=\"**\" name=\"testincludes\"/>\r\n            <attribute default=\"\" name=\"testmethods\"/>\r\n            <element name=\"customize\" optional=\"true\"/>\r\n            <sequential>\r\n                <j2seproject3:junit-prototype>\r\n                    <customizePrototype>\r\n                        <test methods=\"@{testmethods}\" name=\"@{testincludes}\" todir=\"${build.test.results.dir}\"/>\r\n                        <customize/>\r\n                    </customizePrototype>\r\n                </j2seproject3:junit-prototype>\r\n            </sequential>\r\n        </macrodef>\r\n    </target>\r\n    <target depends=\"-init-test-properties,-init-macrodef-junit-prototype-with-module,-init-macrodef-junit-prototype-without-module\" if=\"${nb.junit.batch}\" name=\"-init-macrodef-junit-batch\" unless=\"${nb.junit.single}\">\r\n        <macrodef name=\"junit\" uri=\"http://www.netbeans.org/ns/j2se-project/3\">\r\n            <attribute default=\"${includes}\" name=\"includes\"/>\r\n            <attribute default=\"${excludes}\" name=\"excludes\"/>\r\n            <attribute default=\"**\" name=\"testincludes\"/>\r\n            <attribute default=\"\" name=\"testmethods\"/>\r\n            <element name=\"customize\" optional=\"true\"/>\r\n            <sequential>\r\n                <j2seproject3:junit-prototype>\r\n                    <customizePrototype>\r\n                        <batchtest todir=\"${build.test.results.dir}\">\r\n                            <fileset dir=\"${test.src.dir}\" excludes=\"@{excludes},${excludes}\" includes=\"@{includes}\">\r\n                                <filename name=\"@{testincludes}\"/>\r\n                            </fileset>\r\n                            <fileset dir=\"${build.test.classes.dir}\" excludes=\"@{excludes},${excludes},${test.binaryexcludes}\" includes=\"${test.binaryincludes}\">\r\n                                <filename name=\"${test.binarytestincludes}\"/>\r\n                            </fileset>\r\n                        </batchtest>\r\n                        <customize/>\r\n                    </customizePrototype>\r\n                </j2seproject3:junit-prototype>\r\n            </sequential>\r\n        </macrodef>\r\n    </target>\r\n    <target depends=\"-init-macrodef-junit-init,-init-macrodef-junit-single, -init-macrodef-junit-batch\" if=\"${junit.available}\" name=\"-init-macrodef-junit\"/>\r\n    <target if=\"${testng.available}\" name=\"-init-macrodef-testng\">\r\n        <macrodef name=\"testng\" uri=\"http://www.netbeans.org/ns/j2se-project/3\">\r\n            <attribute default=\"${includes}\" name=\"includes\"/>\r\n            <attribute default=\"${excludes}\" name=\"excludes\"/>\r\n            <attribute default=\"**\" name=\"testincludes\"/>\r\n            <attribute default=\"\" name=\"testmethods\"/>\r\n            <element name=\"customize\" optional=\"true\"/>\r\n            <sequential>\r\n                <condition else=\"\" property=\"testng.methods.arg\" value=\"@{testincludes}.@{testmethods}\">\r\n                    <isset property=\"test.method\"/>\r\n                </condition>\r\n                <union id=\"test.set\">\r\n                    <fileset dir=\"${test.src.dir}\" excludes=\"@{excludes},**/*.xml,${excludes}\" includes=\"@{includes}\">\r\n                        <filename name=\"@{testincludes}\"/>\r\n                    </fileset>\r\n                </union>\r\n                <taskdef classname=\"org.testng.TestNGAntTask\" classpath=\"${run.test.classpath}\" name=\"testng\"/>\r\n                <testng classfilesetref=\"test.set\" failureProperty=\"tests.failed\" listeners=\"org.testng.reporters.VerboseReporter\" methods=\"${testng.methods.arg}\" mode=\"${testng.mode}\" outputdir=\"${build.test.results.dir}\" suitename=\"hms\" testname=\"TestNG tests\" workingDir=\"${work.dir}\">\r\n                    <xmlfileset dir=\"${build.test.classes.dir}\" includes=\"@{testincludes}\"/>\r\n                    <propertyset>\r\n                        <propertyref prefix=\"test-sys-prop.\"/>\r\n                        <mapper from=\"test-sys-prop.*\" to=\"*\" type=\"glob\"/>\r\n                    </propertyset>\r\n                    <classpath>\r\n                        <path path=\"${run.test.classpath}\"/>\r\n                    </classpath>\r\n                    <jvmarg line=\"${endorsed.classpath.cmd.line.arg}\"/>\r\n                    <customize/>\r\n                </testng>\r\n            </sequential>\r\n        </macrodef>\r\n    </target>\r\n    <target name=\"-init-macrodef-test-impl\">\r\n        <macrodef name=\"test-impl\" uri=\"http://www.netbeans.org/ns/j2se-project/3\">\r\n            <attribute default=\"${includes}\" name=\"includes\"/>\r\n            <attribute default=\"${excludes}\" name=\"excludes\"/>\r\n            <attribute default=\"**\" name=\"testincludes\"/>\r\n            <attribute default=\"\" name=\"testmethods\"/>\r\n            <element implicit=\"true\" name=\"customize\" optional=\"true\"/>\r\n            <sequential>\r\n                <echo>No tests executed.</echo>\r\n            </sequential>\r\n        </macrodef>\r\n    </target>\r\n    <target depends=\"-init-macrodef-junit\" if=\"${junit.available}\" name=\"-init-macrodef-junit-impl\">\r\n        <macrodef name=\"test-impl\" uri=\"http://www.netbeans.org/ns/j2se-project/3\">\r\n            <attribute default=\"${includes}\" name=\"includes\"/>\r\n            <attribute default=\"${excludes}\" name=\"excludes\"/>\r\n            <attribute default=\"**\" name=\"testincludes\"/>\r\n            <attribute default=\"\" name=\"testmethods\"/>\r\n            <element implicit=\"true\" name=\"customize\" optional=\"true\"/>\r\n            <sequential>\r\n                <j2seproject3:junit excludes=\"@{excludes}\" includes=\"@{includes}\" testincludes=\"@{testincludes}\" testmethods=\"@{testmethods}\">\r\n                    <customize/>\r\n                </j2seproject3:junit>\r\n            </sequential>\r\n        </macrodef>\r\n    </target>\r\n    <target depends=\"-init-macrodef-testng\" if=\"${testng.available}\" name=\"-init-macrodef-testng-impl\">\r\n        <macrodef name=\"test-impl\" uri=\"http://www.netbeans.org/ns/j2se-project/3\">\r\n            <attribute default=\"${includes}\" name=\"includes\"/>\r\n            <attribute default=\"${excludes}\" name=\"excludes\"/>\r\n            <attribute default=\"**\" name=\"testincludes\"/>\r\n            <attribute default=\"\" name=\"testmethods\"/>\r\n            <element implicit=\"true\" name=\"customize\" optional=\"true\"/>\r\n            <sequential>\r\n                <j2seproject3:testng excludes=\"@{excludes}\" includes=\"@{includes}\" testincludes=\"@{testincludes}\" testmethods=\"@{testmethods}\">\r\n                    <customize/>\r\n                </j2seproject3:testng>\r\n            </sequential>\r\n        </macrodef>\r\n    </target>\r\n    <target depends=\"-init-macrodef-test-impl,-init-macrodef-junit-impl,-init-macrodef-testng-impl\" name=\"-init-macrodef-test\">\r\n        <macrodef name=\"test\" uri=\"http://www.netbeans.org/ns/j2se-project/3\">\r\n            <attribute default=\"${includes}\" name=\"includes\"/>\r\n            <attribute default=\"${excludes}\" name=\"excludes\"/>\r\n            <attribute default=\"**\" name=\"testincludes\"/>\r\n            <attribute default=\"\" name=\"testmethods\"/>\r\n            <sequential>\r\n                <j2seproject3:test-impl excludes=\"@{excludes}\" includes=\"@{includes}\" testincludes=\"@{testincludes}\" testmethods=\"@{testmethods}\">\r\n                    <customize>\r\n                        <jvmarg line=\"${run.jvmargs}\"/>\r\n                        <jvmarg line=\"${run.jvmargs.ide}\"/>\r\n                    </customize>\r\n                </j2seproject3:test-impl>\r\n            </sequential>\r\n        </macrodef>\r\n    </target>\r\n    <target depends=\"-init-macrodef-junit\" if=\"${junit.available}\" name=\"-init-macrodef-junit-debug-impl\">\r\n        <macrodef name=\"test-debug-impl\" uri=\"http://www.netbeans.org/ns/j2se-project/3\">\r\n            <attribute default=\"${includes}\" name=\"includes\"/>\r\n            <attribute default=\"${excludes}\" name=\"excludes\"/>\r\n            <attribute default=\"**\" name=\"testincludes\"/>\r\n            <attribute default=\"\" name=\"testmethods\"/>\r\n            <element name=\"customizeDebuggee\" optional=\"true\"/>\r\n            <sequential>\r\n                <j2seproject3:junit excludes=\"@{excludes}\" includes=\"@{includes}\" testincludes=\"@{testincludes}\" testmethods=\"@{testmethods}\">\r\n                    <customize>\r\n                        <jvmarg value=\"-agentlib:jdwp=transport=${debug-transport},address=${jpda.address}\"/>\r\n                        <customizeDebuggee/>\r\n                    </customize>\r\n                </j2seproject3:junit>\r\n            </sequential>\r\n        </macrodef>\r\n    </target>\r\n    <target if=\"${testng.available}\" name=\"-init-macrodef-testng-debug\">\r\n        <macrodef name=\"testng-debug\" uri=\"http://www.netbeans.org/ns/j2se-project/3\">\r\n            <attribute default=\"${main.class}\" name=\"testClass\"/>\r\n            <attribute default=\"\" name=\"testMethod\"/>\r\n            <element name=\"customize2\" optional=\"true\"/>\r\n            <sequential>\r\n                <condition else=\"-testclass @{testClass}\" property=\"test.class.or.method\" value=\"-methods @{testClass}.@{testMethod}\">\r\n                    <isset property=\"test.method\"/>\r\n                </condition>\r\n                <condition else=\"-suitename hms -testname @{testClass} ${test.class.or.method}\" property=\"testng.cmd.args\" value=\"@{testClass}\">\r\n                    <matches pattern=\".*\\.xml\" string=\"@{testClass}\"/>\r\n                </condition>\r\n                <delete dir=\"${build.test.results.dir}\" quiet=\"true\"/>\r\n                <mkdir dir=\"${build.test.results.dir}\"/>\r\n                <j2seproject3:debug classname=\"org.testng.TestNG\" classpath=\"${debug.test.classpath}\">\r\n                    <customizeDebuggee>\r\n                        <customize2/>\r\n                        <jvmarg value=\"-ea\"/>\r\n                        <arg line=\"${testng.debug.mode}\"/>\r\n                        <arg line=\"-d ${build.test.results.dir}\"/>\r\n                        <arg line=\"-listener org.testng.reporters.VerboseReporter\"/>\r\n                        <arg line=\"${testng.cmd.args}\"/>\r\n                    </customizeDebuggee>\r\n                </j2seproject3:debug>\r\n            </sequential>\r\n        </macrodef>\r\n    </target>\r\n    <target depends=\"-init-macrodef-testng-debug\" if=\"${testng.available}\" name=\"-init-macrodef-testng-debug-impl\">\r\n        <macrodef name=\"testng-debug-impl\" uri=\"http://www.netbeans.org/ns/j2se-project/3\">\r\n            <attribute default=\"${main.class}\" name=\"testClass\"/>\r\n            <attribute default=\"\" name=\"testMethod\"/>\r\n            <element implicit=\"true\" name=\"customize2\" optional=\"true\"/>\r\n            <sequential>\r\n                <j2seproject3:testng-debug testClass=\"@{testClass}\" testMethod=\"@{testMethod}\">\r\n                    <customize2/>\r\n                </j2seproject3:testng-debug>\r\n            </sequential>\r\n        </macrodef>\r\n    </target>\r\n    <target depends=\"-init-macrodef-junit-debug-impl\" if=\"${junit.available}\" name=\"-init-macrodef-test-debug-junit\">\r\n        <macrodef name=\"test-debug\" uri=\"http://www.netbeans.org/ns/j2se-project/3\">\r\n            <attribute default=\"${includes}\" name=\"includes\"/>\r\n            <attribute default=\"${excludes}\" name=\"excludes\"/>\r\n            <attribute default=\"**\" name=\"testincludes\"/>\r\n            <attribute default=\"\" name=\"testmethods\"/>\r\n            <attribute default=\"${main.class}\" name=\"testClass\"/>\r\n            <attribute default=\"\" name=\"testMethod\"/>\r\n            <sequential>\r\n                <j2seproject3:test-debug-impl excludes=\"@{excludes}\" includes=\"@{includes}\" testincludes=\"@{testincludes}\" testmethods=\"@{testmethods}\">\r\n                    <customizeDebuggee>\r\n                        <jvmarg line=\"${run.jvmargs}\"/>\r\n                        <jvmarg line=\"${run.jvmargs.ide}\"/>\r\n                    </customizeDebuggee>\r\n                </j2seproject3:test-debug-impl>\r\n            </sequential>\r\n        </macrodef>\r\n    </target>\r\n    <target depends=\"-init-macrodef-testng-debug-impl\" if=\"${testng.available}\" name=\"-init-macrodef-test-debug-testng\">\r\n        <macrodef name=\"test-debug\" uri=\"http://www.netbeans.org/ns/j2se-project/3\">\r\n            <attribute default=\"${includes}\" name=\"includes\"/>\r\n            <attribute default=\"${excludes}\" name=\"excludes\"/>\r\n            <attribute default=\"**\" name=\"testincludes\"/>\r\n            <attribute default=\"\" name=\"testmethods\"/>\r\n            <attribute default=\"${main.class}\" name=\"testClass\"/>\r\n            <attribute default=\"\" name=\"testMethod\"/>\r\n            <sequential>\r\n                <j2seproject3:testng-debug-impl testClass=\"@{testClass}\" testMethod=\"@{testMethod}\">\r\n                    <customize2>\r\n                        <syspropertyset>\r\n                            <propertyref prefix=\"test-sys-prop.\"/>\r\n                            <mapper from=\"test-sys-prop.*\" to=\"*\" type=\"glob\"/>\r\n                        </syspropertyset>\r\n                    </customize2>\r\n                </j2seproject3:testng-debug-impl>\r\n            </sequential>\r\n        </macrodef>\r\n    </target>\r\n    <target depends=\"-init-macrodef-test-debug-junit,-init-macrodef-test-debug-testng\" name=\"-init-macrodef-test-debug\"/>\r\n    <!--\r\n                pre NB7.2 profiling section; consider it deprecated\r\n            -->\r\n    <target depends=\"-profile-pre-init, init, -profile-post-init, -profile-init-macrodef-profile, -profile-init-check\" if=\"profiler.info.jvmargs.agent\" name=\"profile-init\"/>\r\n    <target if=\"profiler.info.jvmargs.agent\" name=\"-profile-pre-init\">\r\n        <!-- Empty placeholder for easier customization. -->\r\n        <!-- You can override this target in the ../build.xml file. -->\r\n    </target>\r\n    <target if=\"profiler.info.jvmargs.agent\" name=\"-profile-post-init\">\r\n        <!-- Empty placeholder for easier customization. -->\r\n        <!-- You can override this target in the ../build.xml file. -->\r\n    </target>\r\n    <target if=\"profiler.info.jvmargs.agent\" name=\"-profile-init-macrodef-profile\">\r\n        <macrodef name=\"resolve\">\r\n            <attribute name=\"name\"/>\r\n            <attribute name=\"value\"/>\r\n            <sequential>\r\n                <property name=\"@{name}\" value=\"${env.@{value}}\"/>\r\n            </sequential>\r\n        </macrodef>\r\n        <macrodef name=\"profile\">\r\n            <attribute default=\"${main.class}\" name=\"classname\"/>\r\n            <element name=\"customize\" optional=\"true\"/>\r\n            <sequential>\r\n                <property environment=\"env\"/>\r\n                <resolve name=\"profiler.current.path\" value=\"${profiler.info.pathvar}\"/>\r\n                <java classname=\"@{classname}\" dir=\"${profiler.info.dir}\" failonerror=\"${java.failonerror}\" fork=\"true\" jvm=\"${profiler.info.jvm}\">\r\n                    <jvmarg line=\"${endorsed.classpath.cmd.line.arg}\"/>\r\n                    <jvmarg value=\"${profiler.info.jvmargs.agent}\"/>\r\n                    <jvmarg line=\"${profiler.info.jvmargs}\"/>\r\n                    <env key=\"${profiler.info.pathvar}\" path=\"${profiler.info.agentpath}:${profiler.current.path}\"/>\r\n                    <arg line=\"${application.args}\"/>\r\n                    <classpath>\r\n                        <path path=\"${run.classpath}\"/>\r\n                    </classpath>\r\n                    <syspropertyset>\r\n                        <propertyref prefix=\"run-sys-prop.\"/>\r\n                        <mapper from=\"run-sys-prop.*\" to=\"*\" type=\"glob\"/>\r\n                    </syspropertyset>\r\n                    <customize/>\r\n                </java>\r\n            </sequential>\r\n        </macrodef>\r\n    </target>\r\n    <target depends=\"-profile-pre-init, init, -profile-post-init, -profile-init-macrodef-profile\" if=\"profiler.info.jvmargs.agent\" name=\"-profile-init-check\">\r\n        <fail unless=\"profiler.info.jvm\">Must set JVM to use for profiling in profiler.info.jvm</fail>\r\n        <fail unless=\"profiler.info.jvmargs.agent\">Must set profiler agent JVM arguments in profiler.info.jvmargs.agent</fail>\r\n    </target>\r\n    <!--\r\n                end of pre NB7.2 profiling section\r\n            -->\r\n    <target depends=\"-init-debug-args\" name=\"-init-macrodef-nbjpda\">\r\n        <macrodef name=\"nbjpdastart\" uri=\"http://www.netbeans.org/ns/j2se-project/1\">\r\n            <attribute default=\"${main.class}\" name=\"name\"/>\r\n            <attribute default=\"${debug.modulepath}\" name=\"modulepath\"/>\r\n            <attribute default=\"${debug.classpath}\" name=\"classpath\"/>\r\n            <attribute default=\"\" name=\"stopclassname\"/>\r\n            <sequential>\r\n                <nbjpdastart addressproperty=\"jpda.address\" name=\"@{name}\" stopclassname=\"@{stopclassname}\" transport=\"${debug-transport}\">\r\n                    <modulepath>\r\n                        <path path=\"@{modulepath}\"/>\r\n                    </modulepath>\r\n                    <classpath>\r\n                        <path path=\"@{classpath}\"/>\r\n                    </classpath>\r\n                </nbjpdastart>\r\n            </sequential>\r\n        </macrodef>\r\n        <macrodef name=\"nbjpdareload\" uri=\"http://www.netbeans.org/ns/j2se-project/1\">\r\n            <attribute default=\"${build.classes.dir}\" name=\"dir\"/>\r\n            <sequential>\r\n                <nbjpdareload>\r\n                    <fileset dir=\"@{dir}\" includes=\"${fix.classes}\">\r\n                        <include name=\"${fix.includes}*.class\"/>\r\n                    </fileset>\r\n                </nbjpdareload>\r\n            </sequential>\r\n        </macrodef>\r\n    </target>\r\n    <target name=\"-init-debug-args\">\r\n        <condition else=\"dt_socket\" property=\"debug-transport-by-os\" value=\"dt_shmem\">\r\n            <os family=\"windows\"/>\r\n        </condition>\r\n        <condition else=\"${debug-transport-by-os}\" property=\"debug-transport\" value=\"${debug.transport}\">\r\n            <isset property=\"debug.transport\"/>\r\n        </condition>\r\n    </target>\r\n    <target depends=\"-init-debug-args\" name=\"-init-macrodef-debug\">\r\n        <macrodef name=\"debug\" uri=\"http://www.netbeans.org/ns/j2se-project/3\">\r\n            <attribute default=\"${module.name}\" name=\"modulename\"/>\r\n            <attribute default=\"${main.class}\" name=\"classname\"/>\r\n            <attribute default=\"${debug.modulepath}\" name=\"modulepath\"/>\r\n            <attribute default=\"${debug.classpath}\" name=\"classpath\"/>\r\n            <element name=\"customizeDebuggee\" optional=\"true\"/>\r\n            <sequential>\r\n                <j2seproject1:java classname=\"@{classname}\" classpath=\"@{classpath}\" modulename=\"@{modulename}\" modulepath=\"@{modulepath}\">\r\n                    <customize>\r\n                        <jvmarg value=\"-agentlib:jdwp=transport=${debug-transport},address=${jpda.address}\"/>\r\n                        <customizeDebuggee/>\r\n                    </customize>\r\n                </j2seproject1:java>\r\n            </sequential>\r\n        </macrodef>\r\n    </target>\r\n    <target depends=\"-init-source-module-properties\" if=\"named.module.internal\" name=\"-init-macrodef-java-with-module\">\r\n        <macrodef name=\"java\" uri=\"http://www.netbeans.org/ns/j2se-project/1\">\r\n            <attribute default=\"${module.name}\" name=\"modulename\"/>\r\n            <attribute default=\"${main.class}\" name=\"classname\"/>\r\n            <attribute default=\"${run.modulepath}\" name=\"modulepath\"/>\r\n            <attribute default=\"${run.upgrademodulepath}\" name=\"upgrademodulepath\"/>\r\n            <attribute default=\"${run.classpath}\" name=\"classpath\"/>\r\n            <attribute default=\"jvm\" name=\"jvm\"/>\r\n            <element name=\"customize\" optional=\"true\"/>\r\n            <sequential>\r\n                <java classname=\"@{classname}\" dir=\"${work.dir}\" failonerror=\"${java.failonerror}\" fork=\"true\" module=\"@{modulename}\">\r\n                    <classpath>\r\n                        <path path=\"@{classpath}\"/>\r\n                    </classpath>\r\n                    <modulepath>\r\n                        <pathelement path=\"@{modulepath}\"/>\r\n                        <pathelement location=\"${module.build.classes.dir}\"/>\r\n                    </modulepath>\r\n                    <upgrademodulepath>\r\n                        <path path=\"@{upgrademodulepath}\"/>\r\n                    </upgrademodulepath>\r\n                    <jvmarg value=\"-Dfile.encoding=${runtime.encoding}\"/>\r\n                    <redirector errorencoding=\"${runtime.encoding}\" inputencoding=\"${runtime.encoding}\" outputencoding=\"${runtime.encoding}\"/>\r\n                    <jvmarg line=\"${run.jvmargs}\"/>\r\n                    <jvmarg line=\"${run.jvmargs.ide}\"/>\r\n                    <syspropertyset>\r\n                        <propertyref prefix=\"run-sys-prop.\"/>\r\n                        <mapper from=\"run-sys-prop.*\" to=\"*\" type=\"glob\"/>\r\n                    </syspropertyset>\r\n                    <customize/>\r\n                </java>\r\n            </sequential>\r\n        </macrodef>\r\n    </target>\r\n    <target depends=\"-init-source-module-properties\" if=\"unnamed.module.internal\" name=\"-init-macrodef-java-with-unnamed-module\">\r\n        <macrodef name=\"java\" uri=\"http://www.netbeans.org/ns/j2se-project/1\">\r\n            <attribute default=\"\" name=\"modulename\"/>\r\n            <attribute default=\"${main.class}\" name=\"classname\"/>\r\n            <attribute default=\"${run.modulepath}\" name=\"modulepath\"/>\r\n            <attribute default=\"${run.upgrademodulepath}\" name=\"upgrademodulepath\"/>\r\n            <attribute default=\"${run.classpath}\" name=\"classpath\"/>\r\n            <attribute default=\"jvm\" name=\"jvm\"/>\r\n            <element name=\"customize\" optional=\"true\"/>\r\n            <sequential>\r\n                <java classname=\"@{classname}\" dir=\"${work.dir}\" failonerror=\"${java.failonerror}\" fork=\"true\">\r\n                    <classpath>\r\n                        <path path=\"@{classpath}\"/>\r\n                    </classpath>\r\n                    <modulepath>\r\n                        <path path=\"@{modulepath}\"/>\r\n                    </modulepath>\r\n                    <upgrademodulepath>\r\n                        <path path=\"@{upgrademodulepath}\"/>\r\n                    </upgrademodulepath>\r\n                    <jvmarg value=\"-Dfile.encoding=${runtime.encoding}\"/>\r\n                    <redirector errorencoding=\"${runtime.encoding}\" inputencoding=\"${runtime.encoding}\" outputencoding=\"${runtime.encoding}\"/>\r\n                    <jvmarg line=\"${run.jvmargs}\"/>\r\n                    <jvmarg line=\"${run.jvmargs.ide}\"/>\r\n                    <syspropertyset>\r\n                        <propertyref prefix=\"run-sys-prop.\"/>\r\n                        <mapper from=\"run-sys-prop.*\" to=\"*\" type=\"glob\"/>\r\n                    </syspropertyset>\r\n                    <customize/>\r\n                </java>\r\n            </sequential>\r\n        </macrodef>\r\n    </target>\r\n    <target depends=\"-init-source-module-properties\" name=\"-init-macrodef-java-without-module\" unless=\"modules.supported.internal\">\r\n        <macrodef name=\"java\" uri=\"http://www.netbeans.org/ns/j2se-project/1\">\r\n            <attribute default=\"\" name=\"modulename\"/>\r\n            <attribute default=\"${main.class}\" name=\"classname\"/>\r\n            <attribute default=\"\" name=\"modulepath\"/>\r\n            <attribute default=\"${run.classpath}\" name=\"classpath\"/>\r\n            <attribute default=\"jvm\" name=\"jvm\"/>\r\n            <element name=\"customize\" optional=\"true\"/>\r\n            <sequential>\r\n                <java classname=\"@{classname}\" dir=\"${work.dir}\" failonerror=\"${java.failonerror}\" fork=\"true\">\r\n                    <jvmarg line=\"${endorsed.classpath.cmd.line.arg}\"/>\r\n                    <jvmarg value=\"-Dfile.encoding=${runtime.encoding}\"/>\r\n                    <redirector errorencoding=\"${runtime.encoding}\" inputencoding=\"${runtime.encoding}\" outputencoding=\"${runtime.encoding}\"/>\r\n                    <jvmarg line=\"${run.jvmargs}\"/>\r\n                    <jvmarg line=\"${run.jvmargs.ide}\"/>\r\n                    <classpath>\r\n                        <path path=\"@{classpath}\"/>\r\n                    </classpath>\r\n                    <syspropertyset>\r\n                        <propertyref prefix=\"run-sys-prop.\"/>\r\n                        <mapper from=\"run-sys-prop.*\" to=\"*\" type=\"glob\"/>\r\n                    </syspropertyset>\r\n                    <customize/>\r\n                </java>\r\n            </sequential>\r\n        </macrodef>\r\n    </target>\r\n    <target depends=\"-init-macrodef-java-with-module, -init-macrodef-java-with-unnamed-module, -init-macrodef-java-without-module\" name=\"-init-macrodef-java\"/>\r\n    <target name=\"-init-macrodef-copylibs\">\r\n        <macrodef name=\"copylibs\" uri=\"http://www.netbeans.org/ns/j2se-project/3\">\r\n            <attribute default=\"${manifest.file}\" name=\"manifest\"/>\r\n            <element name=\"customize\" optional=\"true\"/>\r\n            <sequential>\r\n                <property location=\"${build.classes.dir}\" name=\"build.classes.dir.resolved\"/>\r\n                <pathconvert property=\"run.classpath.without.build.classes.dir\">\r\n                    <path path=\"${run.classpath}\"/>\r\n                    <map from=\"${build.classes.dir.resolved}\" to=\"\"/>\r\n                </pathconvert>\r\n                <pathconvert pathsep=\" \" property=\"jar.classpath\">\r\n                    <path path=\"${run.classpath.without.build.classes.dir}\"/>\r\n                    <chainedmapper>\r\n                        <flattenmapper/>\r\n                        <filtermapper>\r\n                            <replacestring from=\" \" to=\"%20\"/>\r\n                        </filtermapper>\r\n                        <globmapper from=\"*\" to=\"lib/*\"/>\r\n                    </chainedmapper>\r\n                </pathconvert>\r\n                <taskdef classname=\"org.netbeans.modules.java.j2seproject.copylibstask.CopyLibs\" classpath=\"${libs.CopyLibs.classpath}\" name=\"copylibs\"/>\r\n                <copylibs compress=\"${jar.compress}\" excludeFromCopy=\"${copylibs.excludes}\" index=\"${jar.index}\" indexMetaInf=\"${jar.index.metainf}\" jarfile=\"${dist.jar}\" manifest=\"@{manifest}\" manifestencoding=\"UTF-8\" rebase=\"${copylibs.rebase}\" runtimeclasspath=\"${run.classpath.without.build.classes.dir}\">\r\n                    <fileset dir=\"${build.classes.dir}\" excludes=\"${dist.archive.excludes}\"/>\r\n                    <manifest>\r\n                        <attribute name=\"Class-Path\" value=\"${jar.classpath}\"/>\r\n                        <customize/>\r\n                    </manifest>\r\n                </copylibs>\r\n            </sequential>\r\n        </macrodef>\r\n    </target>\r\n    <target name=\"-init-presetdef-jar\">\r\n        <presetdef name=\"jar\" uri=\"http://www.netbeans.org/ns/j2se-project/1\">\r\n            <jar compress=\"${jar.compress}\" index=\"${jar.index}\" jarfile=\"${dist.jar}\" manifestencoding=\"UTF-8\">\r\n                <j2seproject1:fileset dir=\"${build.classes.dir}\" excludes=\"${dist.archive.excludes}\"/>\r\n            </jar>\r\n        </presetdef>\r\n    </target>\r\n    <target name=\"-init-ap-cmdline-properties\">\r\n        <property name=\"annotation.processing.enabled\" value=\"true\"/>\r\n        <property name=\"annotation.processing.processors.list\" value=\"\"/>\r\n        <property name=\"annotation.processing.processor.options\" value=\"\"/>\r\n        <property name=\"annotation.processing.run.all.processors\" value=\"true\"/>\r\n        <property name=\"javac.processorpath\" value=\"${javac.classpath}\"/>\r\n        <property name=\"javac.test.processorpath\" value=\"${javac.test.classpath}\"/>\r\n        <condition property=\"ap.supported.internal\" value=\"true\">\r\n            <not>\r\n                <matches pattern=\"1\\.[0-5](\\..*)?\" string=\"${javac.source}\"/>\r\n            </not>\r\n        </condition>\r\n    </target>\r\n    <target depends=\"-init-ap-cmdline-properties\" if=\"ap.supported.internal\" name=\"-init-ap-cmdline-supported\">\r\n        <condition else=\"\" property=\"ap.processors.internal\" value=\"-processor ${annotation.processing.processors.list}\">\r\n            <isfalse value=\"${annotation.processing.run.all.processors}\"/>\r\n        </condition>\r\n        <condition else=\"\" property=\"ap.proc.none.internal\" value=\"-proc:none\">\r\n            <isfalse value=\"${annotation.processing.enabled}\"/>\r\n        </condition>\r\n    </target>\r\n    <target depends=\"-init-ap-cmdline-properties,-init-ap-cmdline-supported\" name=\"-init-ap-cmdline\">\r\n        <property name=\"ap.cmd.line.internal\" value=\"\"/>\r\n    </target>\r\n    <target depends=\"-pre-init,-init-private,-init-user,-init-project,-do-init,-post-init,-init-check,-init-macrodef-property,-init-macrodef-javac,-init-macrodef-test,-init-macrodef-test-debug,-init-macrodef-nbjpda,-init-macrodef-debug,-init-macrodef-java,-init-presetdef-jar,-init-ap-cmdline\" name=\"init\"/>\r\n    <!--\r\n                ===================\r\n                COMPILATION SECTION\r\n                ===================\r\n            -->\r\n    <target name=\"-deps-jar-init\" unless=\"built-jar.properties\">\r\n        <property location=\"${build.dir}/built-jar.properties\" name=\"built-jar.properties\"/>\r\n        <delete file=\"${built-jar.properties}\" quiet=\"true\"/>\r\n    </target>\r\n    <target if=\"already.built.jar.${basedir}\" name=\"-warn-already-built-jar\">\r\n        <echo level=\"warn\" message=\"Cycle detected: hms was already built\"/>\r\n    </target>\r\n    <target depends=\"init,-deps-jar-init\" name=\"deps-jar\" unless=\"no.deps\">\r\n        <mkdir dir=\"${build.dir}\"/>\r\n        <touch file=\"${built-jar.properties}\" verbose=\"false\"/>\r\n        <property file=\"${built-jar.properties}\" prefix=\"already.built.jar.\"/>\r\n        <antcall target=\"-warn-already-built-jar\"/>\r\n        <propertyfile file=\"${built-jar.properties}\">\r\n            <entry key=\"${basedir}\" value=\"\"/>\r\n        </propertyfile>\r\n    </target>\r\n    <target depends=\"init,-check-automatic-build,-clean-after-automatic-build\" name=\"-verify-automatic-build\"/>\r\n    <target depends=\"init\" name=\"-check-automatic-build\">\r\n        <available file=\"${build.classes.dir}/.netbeans_automatic_build\" property=\"netbeans.automatic.build\"/>\r\n    </target>\r\n    <target depends=\"init\" if=\"netbeans.automatic.build\" name=\"-clean-after-automatic-build\">\r\n        <antcall target=\"clean\">\r\n            <param name=\"no.dependencies\" value=\"true\"/>\r\n        </antcall>\r\n    </target>\r\n    <target depends=\"init,deps-jar\" name=\"-pre-pre-compile\">\r\n        <mkdir dir=\"${build.classes.dir}\"/>\r\n    </target>\r\n    <target name=\"-pre-compile\">\r\n        <!-- Empty placeholder for easier customization. -->\r\n        <!-- You can override this target in the ../build.xml file. -->\r\n    </target>\r\n    <target if=\"do.depend.true\" name=\"-compile-depend\">\r\n        <pathconvert property=\"build.generated.subdirs\">\r\n            <dirset dir=\"${build.generated.sources.dir}\" erroronmissingdir=\"false\">\r\n                <include name=\"*\"/>\r\n            </dirset>\r\n        </pathconvert>\r\n        <j2seproject3:depend srcdir=\"${src.dir}:${build.generated.subdirs}\"/>\r\n    </target>\r\n    <target depends=\"init,deps-jar,-pre-pre-compile,-pre-compile, -copy-persistence-xml,-compile-depend\" if=\"have.sources\" name=\"-do-compile\">\r\n        <j2seproject3:javac gensrcdir=\"${build.generated.sources.dir}\"/>\r\n        <copy todir=\"${build.classes.dir}\">\r\n            <fileset dir=\"${src.dir}\" excludes=\"${build.classes.excludes},${excludes}\" includes=\"${includes}\"/>\r\n        </copy>\r\n    </target>\r\n    <target if=\"has.persistence.xml\" name=\"-copy-persistence-xml\">\r\n        <mkdir dir=\"${build.classes.dir}/META-INF\"/>\r\n        <copy todir=\"${build.classes.dir}/META-INF\">\r\n            <fileset dir=\"${meta.inf.dir}\" includes=\"persistence.xml orm.xml\"/>\r\n        </copy>\r\n    </target>\r\n    <target name=\"-post-compile\">\r\n        <!-- Empty placeholder for easier customization. -->\r\n        <!-- You can override this target in the ../build.xml file. -->\r\n    </target>\r\n    <target depends=\"init,deps-jar,-verify-automatic-build,-pre-pre-compile,-pre-compile,-do-compile,-post-compile\" description=\"Compile project.\" name=\"compile\"/>\r\n    <target name=\"-pre-compile-single\">\r\n        <!-- Empty placeholder for easier customization. -->\r\n        <!-- You can override this target in the ../build.xml file. -->\r\n    </target>\r\n    <target depends=\"init,deps-jar,-pre-pre-compile\" name=\"-do-compile-single\">\r\n        <fail unless=\"javac.includes\">Must select some files in the IDE or set javac.includes</fail>\r\n        <j2seproject3:force-recompile/>\r\n        <j2seproject3:javac excludes=\"\" gensrcdir=\"${build.generated.sources.dir}\" includes=\"${javac.includes}, module-info.java\" sourcepath=\"${src.dir}\"/>\r\n    </target>\r\n    <target name=\"-post-compile-single\">\r\n        <!-- Empty placeholder for easier customization. -->\r\n        <!-- You can override this target in the ../build.xml file. -->\r\n    </target>\r\n    <target depends=\"init,deps-jar,-verify-automatic-build,-pre-pre-compile,-pre-compile-single,-do-compile-single,-post-compile-single\" name=\"compile-single\"/>\r\n    <!--\r\n                ====================\r\n                JAR BUILDING SECTION\r\n                ====================\r\n            -->\r\n    <target depends=\"init\" name=\"-pre-pre-jar\">\r\n        <dirname file=\"${dist.jar}\" property=\"dist.jar.dir\"/>\r\n        <mkdir dir=\"${dist.jar.dir}\"/>\r\n    </target>\r\n    <target name=\"-pre-jar\">\r\n        <!-- Empty placeholder for easier customization. -->\r\n        <!-- You can override this target in the ../build.xml file. -->\r\n    </target>\r\n    <target depends=\"init,compile\" name=\"-check-module-main-class\">\r\n        <pathconvert property=\"main.class.file\">\r\n            <string value=\"${main.class}\"/>\r\n            <unpackagemapper from=\"*\" to=\"*.class\"/>\r\n        </pathconvert>\r\n        <condition property=\"do.module.main.class\">\r\n            <and>\r\n                <isset property=\"main.class.available\"/>\r\n                <available file=\"${build.classes.dir}/module-info.class\"/>\r\n                <available file=\"${build.classes.dir}/${main.class.file}\"/>\r\n                <isset property=\"libs.CopyLibs.classpath\"/>\r\n                <available classname=\"org.netbeans.modules.java.j2seproject.moduletask.ModuleMainClass\" classpath=\"${libs.CopyLibs.classpath}\"/>\r\n            </and>\r\n        </condition>\r\n    </target>\r\n    <target depends=\"-check-module-main-class\" if=\"do.module.main.class\" name=\"-set-module-main-class\">\r\n        <taskdef classname=\"org.netbeans.modules.java.j2seproject.moduletask.ModuleMainClass\" classpath=\"${libs.CopyLibs.classpath}\" name=\"modulemainclass\"/>\r\n        <modulemainclass failonerror=\"false\" mainclass=\"${main.class}\" moduleinfo=\"${build.classes.dir}/module-info.class\"/>\r\n    </target>\r\n    <target depends=\"init\" if=\"do.archive\" name=\"-do-jar-create-manifest\" unless=\"manifest.available\">\r\n        <tempfile deleteonexit=\"true\" destdir=\"${build.dir}\" property=\"tmp.manifest.file\"/>\r\n        <touch file=\"${tmp.manifest.file}\" verbose=\"false\"/>\r\n    </target>\r\n    <target depends=\"init\" if=\"do.archive+manifest.available\" name=\"-do-jar-copy-manifest\">\r\n        <tempfile deleteonexit=\"true\" destdir=\"${build.dir}\" property=\"tmp.manifest.file\"/>\r\n        <copy encoding=\"${manifest.encoding}\" file=\"${manifest.file}\" outputencoding=\"UTF-8\" tofile=\"${tmp.manifest.file}\"/>\r\n    </target>\r\n    <target depends=\"init,-do-jar-create-manifest,-do-jar-copy-manifest\" if=\"do.archive+main.class.available\" name=\"-do-jar-set-mainclass\">\r\n        <manifest encoding=\"UTF-8\" file=\"${tmp.manifest.file}\" mode=\"update\">\r\n            <attribute name=\"Main-Class\" value=\"${main.class}\"/>\r\n        </manifest>\r\n    </target>\r\n    <target depends=\"init,-do-jar-create-manifest,-do-jar-copy-manifest\" if=\"do.archive+profile.available\" name=\"-do-jar-set-profile\">\r\n        <manifest encoding=\"UTF-8\" file=\"${tmp.manifest.file}\" mode=\"update\">\r\n            <attribute name=\"Profile\" value=\"${javac.profile}\"/>\r\n        </manifest>\r\n    </target>\r\n    <target depends=\"init,-do-jar-create-manifest,-do-jar-copy-manifest\" if=\"do.archive+splashscreen.available\" name=\"-do-jar-set-splashscreen\">\r\n        <basename file=\"${application.splash}\" property=\"splashscreen.basename\"/>\r\n        <mkdir dir=\"${build.classes.dir}/META-INF\"/>\r\n        <copy failonerror=\"false\" file=\"${application.splash}\" todir=\"${build.classes.dir}/META-INF\"/>\r\n        <manifest encoding=\"UTF-8\" file=\"${tmp.manifest.file}\" mode=\"update\">\r\n            <attribute name=\"SplashScreen-Image\" value=\"META-INF/${splashscreen.basename}\"/>\r\n        </manifest>\r\n    </target>\r\n    <target depends=\"init,compile\" name=\"-check-do-mkdist\">\r\n        <condition property=\"do.mkdist\">\r\n            <and>\r\n                <isset property=\"do.archive\"/>\r\n                <isset property=\"libs.CopyLibs.classpath\"/>\r\n                <not>\r\n                    <istrue value=\"${mkdist.disabled}\"/>\r\n                </not>\r\n                <not>\r\n                    <available file=\"${build.classes.dir}/module-info.class\"/>\r\n                </not>\r\n            </and>\r\n        </condition>\r\n    </target>\r\n    <target depends=\"init,-init-macrodef-copylibs,compile,-pre-pre-jar,-pre-jar,-do-jar-create-manifest,-do-jar-copy-manifest,-do-jar-set-mainclass,-do-jar-set-profile,-do-jar-set-splashscreen,-check-do-mkdist\" if=\"do.mkdist\" name=\"-do-jar-copylibs\">\r\n        <j2seproject3:copylibs manifest=\"${tmp.manifest.file}\"/>\r\n        <echo level=\"info\">To run this application from the command line without Ant, try:</echo>\r\n        <property location=\"${dist.jar}\" name=\"dist.jar.resolved\"/>\r\n        <echo level=\"info\">java -jar \"${dist.jar.resolved}\"</echo>\r\n    </target>\r\n    <target depends=\"init,compile,-pre-pre-jar,-pre-jar,-do-jar-create-manifest,-do-jar-copy-manifest,-do-jar-set-mainclass,-do-jar-set-profile,-do-jar-set-splashscreen,-check-do-mkdist\" if=\"do.archive\" name=\"-do-jar-jar\" unless=\"do.mkdist\">\r\n        <j2seproject1:jar manifest=\"${tmp.manifest.file}\"/>\r\n        <property location=\"${build.classes.dir}\" name=\"build.classes.dir.resolved\"/>\r\n        <property location=\"${dist.jar}\" name=\"dist.jar.resolved\"/>\r\n        <condition else=\"${dist.jar.resolved}\" property=\"jar.usage.message.class.path.replacement\" value=\"\">\r\n            <isset property=\"named.module.internal\"/>\r\n        </condition>\r\n        <pathconvert property=\"run.classpath.with.dist.jar\">\r\n            <path path=\"${run.classpath}\"/>\r\n            <map from=\"${build.classes.dir.resolved}\" to=\"${jar.usage.message.class.path.replacement}\"/>\r\n        </pathconvert>\r\n        <pathconvert property=\"run.modulepath.with.dist.jar\">\r\n            <path location=\"${dist.jar.resolved}\"/>\r\n            <path path=\"${run.modulepath}\"/>\r\n            <map from=\"${build.classes.dir.resolved}\" to=\"${dist.jar.resolved}\"/>\r\n        </pathconvert>\r\n        <condition else=\"${run.modulepath}\" property=\"jar.usage.message.run.modulepath.with.dist.jar\" value=\"${run.modulepath.with.dist.jar}\">\r\n            <isset property=\"named.module.internal\"/>\r\n        </condition>\r\n        <condition else=\"\" property=\"jar.usage.message.module.path\" value=\" -p ${jar.usage.message.run.modulepath.with.dist.jar}\">\r\n            <and>\r\n                <isset property=\"modules.supported.internal\"/>\r\n                <length length=\"0\" string=\"${jar.usage.message.run.modulepath.with.dist.jar}\" when=\"greater\"/>\r\n            </and>\r\n        </condition>\r\n        <condition else=\"\" property=\"jar.usage.message.class.path\" value=\" -cp ${run.classpath.with.dist.jar}\">\r\n            <length length=\"0\" string=\"${run.classpath.with.dist.jar}\" when=\"greater\"/>\r\n        </condition>\r\n        <condition else=\"/${main.class}\" property=\"jar.usage.message.main.class.class.selector\" value=\"\">\r\n            <isset property=\"do.module.main.class\"/>\r\n        </condition>\r\n        <condition else=\" ${main.class}\" property=\"jar.usage.message.main.class\" value=\" -m ${module.name}${jar.usage.message.main.class.class.selector}\">\r\n            <isset property=\"named.module.internal\"/>\r\n        </condition>\r\n        <condition else=\"\" property=\"jar.usage.message\" value=\"To run this application from the command line without Ant, try:${line.separator}${platform.java}${jar.usage.message.module.path}${jar.usage.message.class.path}${jar.usage.message.main.class}\">\r\n            <isset property=\"main.class.available\"/>\r\n        </condition>\r\n        <condition else=\"debug\" property=\"jar.usage.level\" value=\"info\">\r\n            <isset property=\"main.class.available\"/>\r\n        </condition>\r\n        <echo level=\"${jar.usage.level}\" message=\"${jar.usage.message}\"/>\r\n    </target>\r\n    <target depends=\"-do-jar-copylibs\" if=\"do.archive\" name=\"-do-jar-delete-manifest\">\r\n        <delete>\r\n            <fileset file=\"${tmp.manifest.file}\"/>\r\n        </delete>\r\n    </target>\r\n    <target depends=\"init,compile,-pre-pre-jar,-pre-jar,-do-jar-create-manifest,-do-jar-copy-manifest,-do-jar-set-mainclass,-do-jar-set-profile,-do-jar-set-splashscreen,-do-jar-jar,-do-jar-delete-manifest\" name=\"-do-jar-without-libraries\"/>\r\n    <target depends=\"init,compile,-pre-pre-jar,-pre-jar,-do-jar-create-manifest,-do-jar-copy-manifest,-do-jar-set-mainclass,-do-jar-set-profile,-do-jar-set-splashscreen,-do-jar-copylibs,-do-jar-delete-manifest\" name=\"-do-jar-with-libraries\"/>\r\n    <target name=\"-post-jar\">\r\n        <!-- Empty placeholder for easier customization. -->\r\n        <!-- You can override this target in the ../build.xml file. -->\r\n    </target>\r\n    <target depends=\"init,compile,-pre-jar,-set-module-main-class,-do-jar-without-libraries,-do-jar-with-libraries,-post-jar\" name=\"-do-jar\"/>\r\n    <target depends=\"init,compile,-pre-jar,-do-jar,-post-jar,deploy\" description=\"Build JAR.\" name=\"jar\"/>\r\n    <!--\r\n                =================\r\n                DEPLOY SECTION\r\n                =================\r\n            -->\r\n    <target name=\"-pre-deploy\">\r\n        <!-- Empty placeholder for easier customization. -->\r\n        <!-- You can override this target in the ../build.xml file. -->\r\n    </target>\r\n    <target depends=\"init\" name=\"-check-jlink\">\r\n        <condition property=\"do.jlink.internal\">\r\n            <and>\r\n                <istrue value=\"${do.jlink}\"/>\r\n                <isset property=\"do.archive\"/>\r\n                <isset property=\"named.module.internal\"/>\r\n            </and>\r\n        </condition>\r\n    </target>\r\n    <target depends=\"init,-do-jar,-post-jar,-pre-deploy,-check-jlink\" if=\"do.jlink.internal\" name=\"-do-deploy\">\r\n        <delete dir=\"${dist.jlink.dir}\" failonerror=\"false\" quiet=\"true\"/>\r\n        <property name=\"jlink.launcher.name\" value=\"${application.title}\"/>\r\n        <condition else=\"${module.name}\" property=\"jlink.add.modules\" value=\"${module.name},${jlink.additionalmodules}\">\r\n            <and>\r\n                <isset property=\"jlink.additionalmodules\"/>\r\n                <length length=\"0\" string=\"${jlink.additionalmodules}\" when=\"greater\"/>\r\n            </and>\r\n        </condition>\r\n        <condition property=\"jlink.do.strip.internal\">\r\n            <and>\r\n                <isset property=\"jlink.strip\"/>\r\n                <istrue value=\"${jlink.strip}\"/>\r\n            </and>\r\n        </condition>\r\n        <condition property=\"jlink.do.additionalparam.internal\">\r\n            <and>\r\n                <isset property=\"jlink.additionalparam\"/>\r\n                <length length=\"0\" string=\"${jlink.additionalparam}\" when=\"greater\"/>\r\n            </and>\r\n        </condition>\r\n        <condition property=\"jlink.do.launcher.internal\">\r\n            <and>\r\n                <istrue value=\"${jlink.launcher}\"/>\r\n                <isset property=\"main.class.available\"/>\r\n            </and>\r\n        </condition>\r\n        <property name=\"platform.jlink\" value=\"${jdk.home}/bin/jlink\"/>\r\n        <property name=\"jlink.systemmodules.internal\" value=\"${jdk.home}/jmods\"/>\r\n        <exec executable=\"${platform.jlink}\">\r\n            <arg value=\"--module-path\"/>\r\n            <arg path=\"${jlink.systemmodules.internal}:${run.modulepath}:${dist.jar}\"/>\r\n            <arg value=\"--add-modules\"/>\r\n            <arg value=\"${jlink.add.modules}\"/>\r\n            <arg if:set=\"jlink.do.strip.internal\" value=\"--strip-debug\"/>\r\n            <arg if:set=\"jlink.do.launcher.internal\" value=\"--launcher\"/>\r\n            <arg if:set=\"jlink.do.launcher.internal\" value=\"${jlink.launcher.name}=${module.name}/${main.class}\"/>\r\n            <arg if:set=\"jlink.do.additionalparam.internal\" line=\"${jlink.additionalparam}\"/>\r\n            <arg value=\"--output\"/>\r\n            <arg value=\"${dist.jlink.output}\"/>\r\n        </exec>\r\n    </target>\r\n    <target name=\"-post-deploy\">\r\n        <!-- Empty placeholder for easier customization. -->\r\n        <!-- You can override this target in the ../build.xml file. -->\r\n    </target>\r\n    <target depends=\"-do-jar,-post-jar,-pre-deploy,-do-deploy,-post-deploy\" name=\"deploy\"/>\r\n    <!--\r\n                =================\r\n                EXECUTION SECTION\r\n                =================\r\n            -->\r\n    <target depends=\"init,compile\" description=\"Run a main class.\" name=\"run\">\r\n        <j2seproject1:java>\r\n            <customize>\r\n                <arg line=\"${application.args}\"/>\r\n            </customize>\r\n        </j2seproject1:java>\r\n    </target>\r\n    <target name=\"-do-not-recompile\">\r\n        <property name=\"javac.includes.binary\" value=\"\"/>\r\n    </target>\r\n    <target depends=\"init,compile-single\" name=\"run-single\">\r\n        <fail unless=\"run.class\">Must select one file in the IDE or set run.class</fail>\r\n        <j2seproject1:java classname=\"${run.class}\"/>\r\n    </target>\r\n    <target depends=\"init,compile-test-single\" name=\"run-test-with-main\">\r\n        <fail unless=\"run.class\">Must select one file in the IDE or set run.class</fail>\r\n        <j2seproject1:java classname=\"${run.class}\" classpath=\"${run.test.classpath}\"/>\r\n    </target>\r\n    <!--\r\n                =================\r\n                DEBUGGING SECTION\r\n                =================\r\n            -->\r\n    <target depends=\"init\" if=\"netbeans.home\" name=\"-debug-start-debugger\">\r\n        <j2seproject1:nbjpdastart name=\"${debug.class}\"/>\r\n    </target>\r\n    <target depends=\"init\" if=\"netbeans.home\" name=\"-debug-start-debugger-main-test\">\r\n        <j2seproject1:nbjpdastart classpath=\"${debug.test.classpath}\" name=\"${debug.class}\"/>\r\n    </target>\r\n    <target depends=\"init,compile\" name=\"-debug-start-debuggee\">\r\n        <j2seproject3:debug>\r\n            <customizeDebuggee>\r\n                <arg line=\"${application.args}\"/>\r\n            </customizeDebuggee>\r\n        </j2seproject3:debug>\r\n    </target>\r\n    <target depends=\"init,compile,-debug-start-debugger,-debug-start-debuggee\" description=\"Debug project in IDE.\" if=\"netbeans.home\" name=\"debug\"/>\r\n    <target depends=\"init\" if=\"netbeans.home\" name=\"-debug-start-debugger-stepinto\">\r\n        <j2seproject1:nbjpdastart stopclassname=\"${main.class}\"/>\r\n    </target>\r\n    <target depends=\"init,compile,-debug-start-debugger-stepinto,-debug-start-debuggee\" if=\"netbeans.home\" name=\"debug-stepinto\"/>\r\n    <target depends=\"init,compile-single\" if=\"netbeans.home\" name=\"-debug-start-debuggee-single\">\r\n        <fail unless=\"debug.class\">Must select one file in the IDE or set debug.class</fail>\r\n        <j2seproject3:debug classname=\"${debug.class}\"/>\r\n    </target>\r\n    <target depends=\"init,compile-single,-debug-start-debugger,-debug-start-debuggee-single\" if=\"netbeans.home\" name=\"debug-single\"/>\r\n    <target depends=\"init,compile-test-single\" if=\"netbeans.home\" name=\"-debug-start-debuggee-main-test\">\r\n        <fail unless=\"debug.class\">Must select one file in the IDE or set debug.class</fail>\r\n        <j2seproject3:debug classname=\"${debug.class}\" classpath=\"${debug.test.classpath}\"/>\r\n    </target>\r\n    <target depends=\"init,compile-test-single,-debug-start-debugger-main-test,-debug-start-debuggee-main-test\" if=\"netbeans.home\" name=\"debug-test-with-main\"/>\r\n    <target depends=\"init\" name=\"-pre-debug-fix\">\r\n        <fail unless=\"fix.includes\">Must set fix.includes</fail>\r\n        <property name=\"javac.includes\" value=\"${fix.includes}.java\"/>\r\n    </target>\r\n    <target depends=\"init,-pre-debug-fix,compile-single\" if=\"netbeans.home\" name=\"-do-debug-fix\">\r\n        <j2seproject1:nbjpdareload/>\r\n    </target>\r\n    <target depends=\"init,-pre-debug-fix,-do-debug-fix\" if=\"netbeans.home\" name=\"debug-fix\"/>\r\n    <!--\r\n                =================\r\n                PROFILING SECTION\r\n                =================\r\n            -->\r\n    <!--\r\n                pre NB7.2 profiler integration\r\n            -->\r\n    <target depends=\"profile-init,compile\" description=\"Profile a project in the IDE.\" if=\"profiler.info.jvmargs.agent\" name=\"-profile-pre72\">\r\n        <fail unless=\"netbeans.home\">This target only works when run from inside the NetBeans IDE.</fail>\r\n        <nbprofiledirect>\r\n            <classpath>\r\n                <path path=\"${run.classpath}\"/>\r\n            </classpath>\r\n        </nbprofiledirect>\r\n        <profile/>\r\n    </target>\r\n    <target depends=\"profile-init,compile-single\" description=\"Profile a selected class in the IDE.\" if=\"profiler.info.jvmargs.agent\" name=\"-profile-single-pre72\">\r\n        <fail unless=\"profile.class\">Must select one file in the IDE or set profile.class</fail>\r\n        <fail unless=\"netbeans.home\">This target only works when run from inside the NetBeans IDE.</fail>\r\n        <nbprofiledirect>\r\n            <classpath>\r\n                <path path=\"${run.classpath}\"/>\r\n            </classpath>\r\n        </nbprofiledirect>\r\n        <profile classname=\"${profile.class}\"/>\r\n    </target>\r\n    <target depends=\"profile-init,compile-single\" if=\"profiler.info.jvmargs.agent\" name=\"-profile-applet-pre72\">\r\n        <fail unless=\"netbeans.home\">This target only works when run from inside the NetBeans IDE.</fail>\r\n        <nbprofiledirect>\r\n            <classpath>\r\n                <path path=\"${run.classpath}\"/>\r\n            </classpath>\r\n        </nbprofiledirect>\r\n        <profile classname=\"sun.applet.AppletViewer\">\r\n            <customize>\r\n                <arg value=\"${applet.url}\"/>\r\n            </customize>\r\n        </profile>\r\n    </target>\r\n    <target depends=\"-init-macrodef-junit,profile-init,compile-test-single\" if=\"profiler.info.jvmargs.agent\" name=\"-profile-test-single-pre72\">\r\n        <fail unless=\"netbeans.home\">This target only works when run from inside the NetBeans IDE.</fail>\r\n        <nbprofiledirect>\r\n            <classpath>\r\n                <path path=\"${run.test.classpath}\"/>\r\n            </classpath>\r\n        </nbprofiledirect>\r\n        <j2seproject3:junit excludes=\"${excludes}\" includes=\"${includes}\" testincludes=\"${profile.class}\" testmethods=\"\">\r\n            <customize>\r\n                <jvmarg value=\"-agentlib:jdwp=transport=${debug-transport},address=${jpda.address}\"/>\r\n                <env key=\"${profiler.info.pathvar}\" path=\"${profiler.info.agentpath}:${profiler.current.path}\"/>\r\n                <jvmarg value=\"${profiler.info.jvmargs.agent}\"/>\r\n                <jvmarg line=\"${profiler.info.jvmargs}\"/>\r\n                <classpath>\r\n                    <path path=\"${run.test.classpath}\"/>\r\n                </classpath>\r\n            </customize>\r\n        </j2seproject3:junit>\r\n    </target>\r\n    <!--\r\n                end of pre NB72 profiling section\r\n            -->\r\n    <target if=\"netbeans.home\" name=\"-profile-check\">\r\n        <condition property=\"profiler.configured\">\r\n            <or>\r\n                <contains casesensitive=\"true\" string=\"${run.jvmargs.ide}\" substring=\"-agentpath:\"/>\r\n                <contains casesensitive=\"true\" string=\"${run.jvmargs.ide}\" substring=\"-javaagent:\"/>\r\n            </or>\r\n        </condition>\r\n    </target>\r\n    <target depends=\"-profile-check,-profile-pre72\" description=\"Profile a project in the IDE.\" if=\"profiler.configured\" name=\"profile\" unless=\"profiler.info.jvmargs.agent\">\r\n        <startprofiler/>\r\n        <antcall target=\"run\"/>\r\n    </target>\r\n    <target depends=\"-profile-check,-profile-single-pre72\" description=\"Profile a selected class in the IDE.\" if=\"profiler.configured\" name=\"profile-single\" unless=\"profiler.info.jvmargs.agent\">\r\n        <fail unless=\"run.class\">Must select one file in the IDE or set run.class</fail>\r\n        <startprofiler/>\r\n        <antcall target=\"run-single\"/>\r\n    </target>\r\n    <target depends=\"-profile-test-single-pre72\" description=\"Profile a selected test in the IDE.\" name=\"profile-test-single\"/>\r\n    <target depends=\"-profile-check\" description=\"Profile a selected test in the IDE.\" if=\"profiler.configured\" name=\"profile-test\" unless=\"profiler.info.jvmargs\">\r\n        <fail unless=\"test.includes\">Must select some files in the IDE or set test.includes</fail>\r\n        <startprofiler/>\r\n        <antcall target=\"test-single\"/>\r\n    </target>\r\n    <target depends=\"-profile-check\" description=\"Profile a selected class in the IDE.\" if=\"profiler.configured\" name=\"profile-test-with-main\">\r\n        <fail unless=\"run.class\">Must select one file in the IDE or set run.class</fail>\r\n        <startprofiler/>\r\n        <antcall target=\"run-test-with-main\"/>\r\n    </target>\r\n    <target depends=\"-profile-check,-profile-applet-pre72\" if=\"profiler.configured\" name=\"profile-applet\" unless=\"profiler.info.jvmargs.agent\">\r\n        <fail unless=\"applet.url\">Must select one file in the IDE or set applet.url</fail>\r\n        <startprofiler/>\r\n        <antcall target=\"run-applet\"/>\r\n    </target>\r\n    <!--\r\n                ===============\r\n                JAVADOC SECTION\r\n                ===============\r\n            -->\r\n    <target depends=\"init\" if=\"have.sources\" name=\"-javadoc-build\">\r\n        <mkdir dir=\"${dist.javadoc.dir}\"/>\r\n        <condition else=\"\" property=\"javadoc.endorsed.classpath.cmd.line.arg\" value=\"-J${endorsed.classpath.cmd.line.arg}\">\r\n            <and>\r\n                <isset property=\"endorsed.classpath.cmd.line.arg\"/>\r\n                <not>\r\n                    <equals arg1=\"${endorsed.classpath.cmd.line.arg}\" arg2=\"\"/>\r\n                </not>\r\n            </and>\r\n        </condition>\r\n        <condition else=\"\" property=\"bug5101868workaround\" value=\"*.java\">\r\n            <matches pattern=\"1\\.[56](\\..*)?\" string=\"${java.version}\"/>\r\n        </condition>\r\n        <condition else=\"\" property=\"javadoc.html5.cmd.line.arg\" value=\"-html5\">\r\n            <and>\r\n                <isset property=\"javadoc.html5\"/>\r\n                <available file=\"${jdk.home}${file.separator}lib${file.separator}jrt-fs.jar\"/>\r\n            </and>\r\n        </condition>\r\n        <javadoc additionalparam=\"-J-Dfile.encoding=${file.encoding} ${javadoc.additionalparam}\" author=\"${javadoc.author}\" charset=\"UTF-8\" destdir=\"${dist.javadoc.dir}\" docencoding=\"UTF-8\" encoding=\"${javadoc.encoding.used}\" failonerror=\"true\" noindex=\"${javadoc.noindex}\" nonavbar=\"${javadoc.nonavbar}\" notree=\"${javadoc.notree}\" private=\"${javadoc.private}\" source=\"${javac.source}\" splitindex=\"${javadoc.splitindex}\" use=\"${javadoc.use}\" useexternalfile=\"true\" version=\"${javadoc.version}\" windowtitle=\"${javadoc.windowtitle}\">\r\n            <classpath>\r\n                <path path=\"${javac.classpath}\"/>\r\n            </classpath>\r\n            <fileset dir=\"${src.dir}\" excludes=\"${bug5101868workaround},${excludes}\" includes=\"${includes}\">\r\n                <filename name=\"**/*.java\"/>\r\n            </fileset>\r\n            <fileset dir=\"${build.generated.sources.dir}\" erroronmissingdir=\"false\">\r\n                <include name=\"**/*.java\"/>\r\n                <exclude name=\"*.java\"/>\r\n            </fileset>\r\n            <arg line=\"${javadoc.endorsed.classpath.cmd.line.arg}\"/>\r\n            <arg line=\"${javadoc.html5.cmd.line.arg}\"/>\r\n        </javadoc>\r\n        <copy todir=\"${dist.javadoc.dir}\">\r\n            <fileset dir=\"${src.dir}\" excludes=\"${excludes}\" includes=\"${includes}\">\r\n                <filename name=\"**/doc-files/**\"/>\r\n            </fileset>\r\n            <fileset dir=\"${build.generated.sources.dir}\" erroronmissingdir=\"false\">\r\n                <include name=\"**/doc-files/**\"/>\r\n            </fileset>\r\n        </copy>\r\n    </target>\r\n    <target depends=\"init,-javadoc-build\" if=\"netbeans.home\" name=\"-javadoc-browse\" unless=\"no.javadoc.preview\">\r\n        <nbbrowse file=\"${dist.javadoc.dir}/index.html\"/>\r\n    </target>\r\n    <target depends=\"init,-javadoc-build,-javadoc-browse\" description=\"Build Javadoc.\" name=\"javadoc\"/>\r\n    <!--\r\n                =========================\r\n                TEST COMPILATION SECTION\r\n                =========================\r\n            -->\r\n    <target depends=\"init,compile\" if=\"have.tests\" name=\"-pre-pre-compile-test\">\r\n        <mkdir dir=\"${build.test.classes.dir}\"/>\r\n    </target>\r\n    <target name=\"-pre-compile-test\">\r\n        <!-- Empty placeholder for easier customization. -->\r\n        <!-- You can override this target in the ../build.xml file. -->\r\n    </target>\r\n    <target depends=\"-init-source-module-properties\" if=\"named.module.internal\" name=\"-init-test-javac-module-properties-with-module\">\r\n        <j2seproject3:modulename property=\"test.module.name\" sourcepath=\"${test.src.dir}\"/>\r\n        <condition else=\"${empty.dir}\" property=\"javac.test.sourcepath\" value=\"${test.src.dir}\">\r\n            <and>\r\n                <isset property=\"test.module.name\"/>\r\n                <length length=\"0\" string=\"${test.module.name}\" when=\"greater\"/>\r\n            </and>\r\n        </condition>\r\n        <condition else=\"--patch-module ${module.name}=${test.src.dir} --add-reads ${module.name}=ALL-UNNAMED\" property=\"javac.test.compilerargs\" value=\"--add-reads ${test.module.name}=ALL-UNNAMED\">\r\n            <and>\r\n                <isset property=\"test.module.name\"/>\r\n                <length length=\"0\" string=\"${test.module.name}\" when=\"greater\"/>\r\n            </and>\r\n        </condition>\r\n    </target>\r\n    <target depends=\"-init-source-module-properties\" if=\"named.module.internal\" name=\"-init-test-run-module-properties\">\r\n        <condition else=\"${module.name}\" property=\"run.test.addexport.source.module.internal\" value=\"${test.module.name}\">\r\n            <and>\r\n                <isset property=\"test.module.name\"/>\r\n                <length length=\"0\" string=\"${test.module.name}\" when=\"greater\"/>\r\n            </and>\r\n        </condition>\r\n        <fileset dir=\"${build.test.classes.dir}\" id=\"run.test.packages.internal\" includes=\"**/*.class\"/>\r\n        <property location=\"${build.test.classes.dir}\" name=\"build.test.classes.dir.abs.internal\"/>\r\n        <pathconvert pathsep=\" \" property=\"run.test.addexports.internal\" refid=\"run.test.packages.internal\">\r\n            <chainedmapper>\r\n                <regexpmapper from=\"^(.*)\\Q${file.separator}\\E.*\\.class$$\" to=\"\\1\"/>\r\n                <filtermapper>\r\n                    <uniqfilter/>\r\n                    <replacestring from=\"${build.test.classes.dir.abs.internal}\" to=\"\"/>\r\n                </filtermapper>\r\n                <cutdirsmapper dirs=\"1\"/>\r\n                <packagemapper from=\"*\" to=\"--add-exports ${run.test.addexport.source.module.internal}/*=ALL-UNNAMED\"/>\r\n            </chainedmapper>\r\n        </pathconvert>\r\n        <condition else=\"--patch-module ${module.name}=${build.test.classes.dir} --add-modules ${module.name} --add-reads ${module.name}=ALL-UNNAMED ${run.test.addexports.internal}\" property=\"run.test.jvmargs\" value=\"--add-modules ${test.module.name} --add-reads ${test.module.name}=ALL-UNNAMED ${run.test.addexports.internal}\">\r\n            <and>\r\n                <isset property=\"test.module.name\"/>\r\n                <length length=\"0\" string=\"${test.module.name}\" when=\"greater\"/>\r\n            </and>\r\n        </condition>\r\n    </target>\r\n    <target depends=\"-init-source-module-properties\" name=\"-init-test-module-properties-without-module\" unless=\"named.module.internal\">\r\n        <property name=\"javac.test.sourcepath\" value=\"${empty.dir}\"/>\r\n        <property name=\"javac.test.compilerargs\" value=\"\"/>\r\n        <property name=\"run.test.jvmargs\" value=\"\"/>\r\n    </target>\r\n    <target depends=\"-init-test-javac-module-properties-with-module,-init-test-module-properties-without-module\" name=\"-init-test-module-properties\"/>\r\n    <target if=\"do.depend.true\" name=\"-compile-test-depend\">\r\n        <j2seproject3:depend classpath=\"${javac.test.classpath}\" destdir=\"${build.test.classes.dir}\" srcdir=\"${test.src.dir}\"/>\r\n    </target>\r\n    <target depends=\"init,deps-jar,compile,-init-test-module-properties,-pre-pre-compile-test,-pre-compile-test,-compile-test-depend\" if=\"have.tests\" name=\"-do-compile-test\">\r\n        <j2seproject3:javac apgeneratedsrcdir=\"${build.test.classes.dir}\" classpath=\"${javac.test.classpath}\" debug=\"true\" destdir=\"${build.test.classes.dir}\" modulepath=\"${javac.test.modulepath}\" processorpath=\"${javac.test.processorpath}\" sourcepath=\"${javac.test.sourcepath}\" srcdir=\"${test.src.dir}\">\r\n            <customize>\r\n                <compilerarg line=\"${javac.test.compilerargs}\"/>\r\n            </customize>\r\n        </j2seproject3:javac>\r\n        <copy todir=\"${build.test.classes.dir}\">\r\n            <fileset dir=\"${test.src.dir}\" excludes=\"${build.classes.excludes},${excludes}\" includes=\"${includes}\"/>\r\n        </copy>\r\n    </target>\r\n    <target name=\"-post-compile-test\">\r\n        <!-- Empty placeholder for easier customization. -->\r\n        <!-- You can override this target in the ../build.xml file. -->\r\n    </target>\r\n    <target depends=\"init,compile,-pre-pre-compile-test,-pre-compile-test,-do-compile-test,-post-compile-test\" name=\"compile-test\"/>\r\n    <target name=\"-pre-compile-test-single\">\r\n        <!-- Empty placeholder for easier customization. -->\r\n        <!-- You can override this target in the ../build.xml file. -->\r\n    </target>\r\n    <target depends=\"init,deps-jar,compile,-init-test-module-properties,-pre-pre-compile-test,-pre-compile-test-single\" if=\"have.tests\" name=\"-do-compile-test-single\">\r\n        <fail unless=\"javac.includes\">Must select some files in the IDE or set javac.includes</fail>\r\n        <j2seproject3:force-recompile destdir=\"${build.test.classes.dir}\"/>\r\n        <j2seproject3:javac apgeneratedsrcdir=\"${build.test.classes.dir}\" classpath=\"${javac.test.classpath}\" debug=\"true\" destdir=\"${build.test.classes.dir}\" excludes=\"\" includes=\"${javac.includes}, module-info.java\" modulepath=\"${javac.test.modulepath}\" processorpath=\"${javac.test.processorpath}\" sourcepath=\"${test.src.dir}\" srcdir=\"${test.src.dir}\">\r\n            <customize>\r\n                <compilerarg line=\"${javac.test.compilerargs}\"/>\r\n            </customize>\r\n        </j2seproject3:javac>\r\n        <copy todir=\"${build.test.classes.dir}\">\r\n            <fileset dir=\"${test.src.dir}\" excludes=\"${build.classes.excludes},${excludes}\" includes=\"${includes}\"/>\r\n        </copy>\r\n    </target>\r\n    <target name=\"-post-compile-test-single\">\r\n        <!-- Empty placeholder for easier customization. -->\r\n        <!-- You can override this target in the ../build.xml file. -->\r\n    </target>\r\n    <target depends=\"init,compile,-pre-pre-compile-test,-pre-compile-test-single,-do-compile-test-single,-post-compile-test-single\" name=\"compile-test-single\"/>\r\n    <!--\r\n                =======================\r\n                TEST EXECUTION SECTION\r\n                =======================\r\n            -->\r\n    <target depends=\"init\" if=\"have.tests\" name=\"-pre-test-run\">\r\n        <mkdir dir=\"${build.test.results.dir}\"/>\r\n    </target>\r\n    <target depends=\"init,compile-test,-init-test-run-module-properties,-pre-test-run\" if=\"have.tests\" name=\"-do-test-run\">\r\n        <j2seproject3:test includes=\"${includes}\" testincludes=\"**/*Test.java\"/>\r\n    </target>\r\n    <target depends=\"init,compile-test,-pre-test-run,-do-test-run\" if=\"have.tests\" name=\"-post-test-run\">\r\n        <fail if=\"tests.failed\" unless=\"ignore.failing.tests\">Some tests failed; see details above.</fail>\r\n    </target>\r\n    <target depends=\"init\" if=\"have.tests\" name=\"test-report\"/>\r\n    <target depends=\"init\" if=\"netbeans.home+have.tests\" name=\"-test-browse\"/>\r\n    <target depends=\"init,compile-test,-pre-test-run,-do-test-run,test-report,-post-test-run,-test-browse\" description=\"Run unit tests.\" name=\"test\"/>\r\n    <target depends=\"init\" if=\"have.tests\" name=\"-pre-test-run-single\">\r\n        <mkdir dir=\"${build.test.results.dir}\"/>\r\n    </target>\r\n    <target depends=\"init,compile-test-single,-init-test-run-module-properties,-pre-test-run-single\" if=\"have.tests\" name=\"-do-test-run-single\">\r\n        <fail unless=\"test.includes\">Must select some files in the IDE or set test.includes</fail>\r\n        <j2seproject3:test excludes=\"\" includes=\"${test.includes}\" testincludes=\"${test.includes}\"/>\r\n    </target>\r\n    <target depends=\"init,compile-test-single,-pre-test-run-single,-do-test-run-single\" if=\"have.tests\" name=\"-post-test-run-single\">\r\n        <fail if=\"tests.failed\" unless=\"ignore.failing.tests\">Some tests failed; see details above.</fail>\r\n    </target>\r\n    <target depends=\"init,compile-test-single,-init-test-run-module-properties,-pre-test-run-single,-do-test-run-single,-post-test-run-single\" description=\"Run single unit test.\" name=\"test-single\"/>\r\n    <target depends=\"init,compile-test-single,-pre-test-run-single\" if=\"have.tests\" name=\"-do-test-run-single-method\">\r\n        <fail unless=\"test.class\">Must select some files in the IDE or set test.class</fail>\r\n        <fail unless=\"test.method\">Must select some method in the IDE or set test.method</fail>\r\n        <j2seproject3:test excludes=\"\" includes=\"${javac.includes}\" testincludes=\"${test.class}\" testmethods=\"${test.method}\"/>\r\n    </target>\r\n    <target depends=\"init,compile-test-single,-pre-test-run-single,-do-test-run-single-method\" if=\"have.tests\" name=\"-post-test-run-single-method\">\r\n        <fail if=\"tests.failed\" unless=\"ignore.failing.tests\">Some tests failed; see details above.</fail>\r\n    </target>\r\n    <target depends=\"init,compile-test-single,-init-test-run-module-properties,-pre-test-run-single,-do-test-run-single-method,-post-test-run-single-method\" description=\"Run single unit test.\" name=\"test-single-method\"/>\r\n    <!--\r\n                =======================\r\n                TEST DEBUGGING SECTION\r\n                =======================\r\n            -->\r\n    <target depends=\"init,compile-test-single,-pre-test-run-single\" if=\"have.tests\" name=\"-debug-start-debuggee-test\">\r\n        <fail unless=\"test.class\">Must select one file in the IDE or set test.class</fail>\r\n        <j2seproject3:test-debug excludes=\"\" includes=\"${javac.includes}\" testClass=\"${test.class}\" testincludes=\"${javac.includes}\"/>\r\n    </target>\r\n    <target depends=\"init,compile-test-single,-pre-test-run-single\" if=\"have.tests\" name=\"-debug-start-debuggee-test-method\">\r\n        <fail unless=\"test.class\">Must select one file in the IDE or set test.class</fail>\r\n        <fail unless=\"test.method\">Must select some method in the IDE or set test.method</fail>\r\n        <j2seproject3:test-debug excludes=\"\" includes=\"${javac.includes}\" testClass=\"${test.class}\" testMethod=\"${test.method}\" testincludes=\"${test.class}\" testmethods=\"${test.method}\"/>\r\n    </target>\r\n    <target depends=\"init,compile-test\" if=\"netbeans.home+have.tests\" name=\"-debug-start-debugger-test\">\r\n        <j2seproject1:nbjpdastart classpath=\"${debug.test.classpath}\" name=\"${test.class}\"/>\r\n    </target>\r\n    <target depends=\"init,compile-test-single,-init-test-run-module-properties,-debug-start-debugger-test,-debug-start-debuggee-test\" name=\"debug-test\"/>\r\n    <target depends=\"init,compile-test-single,-init-test-run-module-properties,-debug-start-debugger-test,-debug-start-debuggee-test-method\" name=\"debug-test-method\"/>\r\n    <target depends=\"debug-test-method\" name=\"debug-single-method\"/>\r\n    <target depends=\"init,-pre-debug-fix,compile-test-single\" if=\"netbeans.home\" name=\"-do-debug-fix-test\">\r\n        <j2seproject1:nbjpdareload dir=\"${build.test.classes.dir}\"/>\r\n    </target>\r\n    <target depends=\"init,-pre-debug-fix,-do-debug-fix-test\" if=\"netbeans.home\" name=\"debug-fix-test\"/>\r\n    <!--\r\n                =========================\r\n                APPLET EXECUTION SECTION\r\n                =========================\r\n            -->\r\n    <target depends=\"init,compile-single\" name=\"run-applet\">\r\n        <fail unless=\"applet.url\">Must select one file in the IDE or set applet.url</fail>\r\n        <j2seproject1:java classname=\"sun.applet.AppletViewer\">\r\n            <customize>\r\n                <arg value=\"${applet.url}\"/>\r\n            </customize>\r\n        </j2seproject1:java>\r\n    </target>\r\n    <!--\r\n                =========================\r\n                APPLET DEBUGGING  SECTION\r\n                =========================\r\n            -->\r\n    <target depends=\"init,compile-single\" if=\"netbeans.home\" name=\"-debug-start-debuggee-applet\">\r\n        <fail unless=\"applet.url\">Must select one file in the IDE or set applet.url</fail>\r\n        <j2seproject3:debug classname=\"sun.applet.AppletViewer\">\r\n            <customizeDebuggee>\r\n                <arg value=\"${applet.url}\"/>\r\n            </customizeDebuggee>\r\n        </j2seproject3:debug>\r\n    </target>\r\n    <target depends=\"init,compile-single,-debug-start-debugger,-debug-start-debuggee-applet\" if=\"netbeans.home\" name=\"debug-applet\"/>\r\n    <!--\r\n                ===============\r\n                CLEANUP SECTION\r\n                ===============\r\n            -->\r\n    <target name=\"-deps-clean-init\" unless=\"built-clean.properties\">\r\n        <property location=\"${build.dir}/built-clean.properties\" name=\"built-clean.properties\"/>\r\n        <delete file=\"${built-clean.properties}\" quiet=\"true\"/>\r\n    </target>\r\n    <target if=\"already.built.clean.${basedir}\" name=\"-warn-already-built-clean\">\r\n        <echo level=\"warn\" message=\"Cycle detected: hms was already built\"/>\r\n    </target>\r\n    <target depends=\"init,-deps-clean-init\" name=\"deps-clean\" unless=\"no.deps\">\r\n        <mkdir dir=\"${build.dir}\"/>\r\n        <touch file=\"${built-clean.properties}\" verbose=\"false\"/>\r\n        <property file=\"${built-clean.properties}\" prefix=\"already.built.clean.\"/>\r\n        <antcall target=\"-warn-already-built-clean\"/>\r\n        <propertyfile file=\"${built-clean.properties}\">\r\n            <entry key=\"${basedir}\" value=\"\"/>\r\n        </propertyfile>\r\n    </target>\r\n    <target depends=\"init\" name=\"-do-clean\">\r\n        <delete dir=\"${build.dir}\"/>\r\n        <delete dir=\"${dist.jlink.output}\"/>\r\n        <delete dir=\"${dist.dir}\" followsymlinks=\"false\" includeemptydirs=\"true\"/>\r\n    </target>\r\n    <target name=\"-post-clean\">\r\n        <!-- Empty placeholder for easier customization. -->\r\n        <!-- You can override this target in the ../build.xml file. -->\r\n    </target>\r\n    <target depends=\"init,deps-clean,-do-clean,-post-clean\" description=\"Clean build products.\" name=\"clean\"/>\r\n    <target name=\"-check-call-dep\">\r\n        <property file=\"${call.built.properties}\" prefix=\"already.built.\"/>\r\n        <condition property=\"should.call.dep\">\r\n            <and>\r\n                <not>\r\n                    <isset property=\"already.built.${call.subproject}\"/>\r\n                </not>\r\n                <available file=\"${call.script}\"/>\r\n            </and>\r\n        </condition>\r\n    </target>\r\n    <target depends=\"-check-call-dep\" if=\"should.call.dep\" name=\"-maybe-call-dep\">\r\n        <ant antfile=\"${call.script}\" inheritall=\"false\" target=\"${call.target}\">\r\n            <propertyset>\r\n                <propertyref prefix=\"transfer.\"/>\r\n                <mapper from=\"transfer.*\" to=\"*\" type=\"glob\"/>\r\n            </propertyset>\r\n        </ant>\r\n    </target>\r\n</project>\r\n",
      "info": {
        "size": 100661,
        "last_modified": "2025-12-14T02:19:24.7826134",
        "mime_type": "application/xml",
        "extension": ".xml"
      }
    },
    {
      "path": "nbproject\\genfiles.properties",
      "content": "build.xml.data.CRC32=852f225d\r\nbuild.xml.script.CRC32=32bc0a6d\r\nbuild.xml.stylesheet.CRC32=f85dc8f2@1.108.0.48\r\n# This file is used by a NetBeans-based IDE to track changes in generated files such as build-impl.xml.\r\n# Do not edit this file. You may delete it but then the IDE will never regenerate such files for you.\r\nnbproject/build-impl.xml.data.CRC32=852f225d\r\nnbproject/build-impl.xml.script.CRC32=57034e5e\r\nnbproject/build-impl.xml.stylesheet.CRC32=12e0a6c2@1.108.0.48\r\n",
      "info": {
        "size": 477,
        "last_modified": "2025-12-14T02:19:24.79368",
        "mime_type": "text/x-java-properties",
        "extension": ".properties"
      }
    },
    {
      "path": "nbproject\\private\\private.properties",
      "content": "compile.on.save=true\r\nuser.properties.file=C:\\\\Users\\\\ahmed\\\\AppData\\\\Roaming\\\\NetBeans\\\\23\\\\build.properties\r\n",
      "info": {
        "size": 111,
        "last_modified": "2025-12-14T02:19:24.8041532",
        "mime_type": "text/x-java-properties",
        "extension": ".properties"
      }
    },
    {
      "path": "nbproject\\private\\private.xml",
      "content": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project-private xmlns=\"http://www.netbeans.org/ns/project-private/1\">\r\n    <editor-bookmarks xmlns=\"http://www.netbeans.org/ns/editor-bookmarks/2\" lastBookmarkId=\"0\"/>\r\n    <open-files xmlns=\"http://www.netbeans.org/ns/projectui-open-files/2\">\r\n        <group/>\r\n    </open-files>\r\n</project-private>\r\n",
      "info": {
        "size": 343,
        "last_modified": "2025-12-14T02:19:24.8158555",
        "mime_type": "application/xml",
        "extension": ".xml"
      }
    },
    {
      "path": "nbproject\\project.properties",
      "content": "annotation.processing.enabled=true\r\nannotation.processing.enabled.in.editor=false\r\nannotation.processing.processor.options=\r\nannotation.processing.processors.list=\r\nannotation.processing.run.all.processors=true\r\nannotation.processing.source.output=${build.generated.sources.dir}/ap-source-output\r\nbuild.classes.dir=${build.dir}/classes\r\nbuild.classes.excludes=**/*.java,**/*.form\r\n# This directory is removed when the project is cleaned:\r\nbuild.dir=build\r\nbuild.generated.dir=${build.dir}/generated\r\nbuild.generated.sources.dir=${build.dir}/generated-sources\r\n# Only compile against the classpath explicitly listed here:\r\nbuild.sysclasspath=ignore\r\nbuild.test.classes.dir=${build.dir}/test/classes\r\nbuild.test.results.dir=${build.dir}/test/results\r\n# Uncomment to specify the preferred debugger connection transport:\r\n#debug.transport=dt_socket\r\ndebug.classpath=\\\r\n    ${run.classpath}\r\ndebug.modulepath=\\\r\n    ${run.modulepath}\r\ndebug.test.classpath=\\\r\n    ${run.test.classpath}\r\ndebug.test.modulepath=\\\r\n    ${run.test.modulepath}\r\n# Files in build.classes.dir which should be excluded from distribution jar\r\ndist.archive.excludes=\r\n# This directory is removed when the project is cleaned:\r\ndist.dir=dist\r\ndist.jar=${dist.dir}/hms.jar\r\ndist.javadoc.dir=${dist.dir}/javadoc\r\ndist.jlink.dir=${dist.dir}/jlink\r\ndist.jlink.output=${dist.jlink.dir}/hms\r\nexcludes=\r\nincludes=**\r\njar.compress=false\r\njavac.classpath=\r\n# Space-separated list of extra javac options\r\njavac.compilerargs=\r\njavac.deprecation=false\r\njavac.external.vm=true\r\njavac.modulepath=\r\njavac.processormodulepath=\r\njavac.processorpath=\\\r\n    ${javac.classpath}\r\njavac.source=11\r\njavac.target=11\r\njavac.test.classpath=\\\r\n    ${javac.classpath}:\\\r\n    ${build.classes.dir}\r\njavac.test.modulepath=\\\r\n    ${javac.modulepath}\r\njavac.test.processorpath=\\\r\n    ${javac.test.classpath}\r\njavadoc.additionalparam=\r\njavadoc.author=false\r\njavadoc.encoding=${source.encoding}\r\njavadoc.html5=false\r\njavadoc.noindex=false\r\njavadoc.nonavbar=false\r\njavadoc.notree=false\r\njavadoc.private=false\r\njavadoc.splitindex=true\r\njavadoc.use=true\r\njavadoc.version=false\r\njavadoc.windowtitle=\r\n# The jlink additional root modules to resolve\r\njlink.additionalmodules=\r\n# The jlink additional command line parameters\r\njlink.additionalparam=\r\njlink.launcher=true\r\njlink.launcher.name=hms\r\nmain.class=Main.Main\r\nmanifest.file=manifest.mf\r\nmeta.inf.dir=${src.dir}/META-INF\r\nmkdist.disabled=false\r\nplatform.active=default_platform\r\nrun.classpath=\\\r\n    ${javac.classpath}:\\\r\n    ${build.classes.dir}\r\n# Space-separated list of JVM arguments used when running the project.\r\n# You may also define separate properties like run-sys-prop.name=value instead of -Dname=value.\r\n# To set system properties for unit tests define test-sys-prop.name=value:\r\nrun.jvmargs=\r\nrun.modulepath=\\\r\n    ${javac.modulepath}\r\nrun.test.classpath=\\\r\n    ${javac.test.classpath}:\\\r\n    ${build.test.classes.dir}\r\nrun.test.modulepath=\\\r\n    ${javac.test.modulepath}\r\nsource.encoding=UTF-8\r\nsrc.dir=src\r\ntest.src.dir=test\r\n",
      "info": {
        "size": 3022,
        "last_modified": "2025-12-14T02:19:24.8318798",
        "mime_type": "text/x-java-properties",
        "extension": ".properties"
      }
    },
    {
      "path": "nbproject\\project.xml",
      "content": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project xmlns=\"http://www.netbeans.org/ns/project/1\">\r\n    <type>org.netbeans.modules.java.j2seproject</type>\r\n    <configuration>\r\n        <data xmlns=\"http://www.netbeans.org/ns/j2se-project/3\">\r\n            <name>hms</name>\r\n            <source-roots>\r\n                <root id=\"src.dir\"/>\r\n            </source-roots>\r\n            <test-roots>\r\n                <root id=\"test.src.dir\"/>\r\n            </test-roots>\r\n        </data>\r\n    </configuration>\r\n</project>\r\n",
      "info": {
        "size": 511,
        "last_modified": "2025-12-14T02:19:24.8399169",
        "mime_type": "application/xml",
        "extension": ".xml"
      }
    },
    {
      "path": "referrals_output.txt",
      "content": "=== Referral ID:  ===\r\nUrgency: \r\nChannel: \r\nDate: \r\nSummary:\r\n\r\n====================================\r\n\r\n",
      "info": {
        "size": 105,
        "last_modified": "2025-12-14T02:19:24.8455379",
        "mime_type": "text/plain",
        "extension": ".txt"
      }
    },
    {
      "path": "src\\controller\\AppointmentController.java",
      "content": "package controller;\r\n\r\nimport model.*;\r\nimport view.*;\r\n\r\nimport java.time.LocalDate;\r\nimport java.time.format.DateTimeFormatter;\r\nimport java.util.List;\r\n\r\npublic class AppointmentController {\r\n\r\n    private final AppointmentRepository repo;\r\n    private final PatientRepository patientRepo;\r\n    private final ClinicianRepository clinicianRepo;\r\n    private final FacilityRepository facilityRepo;\r\n    private final AppointmentView view;\r\n    private final DateTimeFormatter fmt = DateTimeFormatter.ofPattern(\"dd/MM/yyyy\");\r\n\r\n    public AppointmentController(AppointmentRepository repo,\r\n                                 PatientRepository patientRepo,\r\n                                 ClinicianRepository clinicianRepo,\r\n                                 FacilityRepository facilityRepo,\r\n                                 AppointmentView view) {\r\n\r\n        this.repo = repo;\r\n        this.patientRepo = patientRepo;\r\n        this.clinicianRepo = clinicianRepo;\r\n        this.facilityRepo = facilityRepo;\r\n        this.view = view;\r\n\r\n        view.setController(this);\r\n        refreshAppointments();\r\n        view.loadDropdowns(getPatientIds(), getClinicianIds(), getFacilityIds());\r\n    }\r\n\r\n    public AppointmentView getView() {\r\n        return view;\r\n    }\r\n\r\n    public void refreshAppointments() {\r\n        view.showAppointments(repo.getAll());\r\n    }\r\n\r\n    public String generateId() {\r\n        return repo.generateNewId();\r\n    }\r\n\r\n    public List<String> getPatientIds() {\r\n        return patientRepo.getAllIds();\r\n    }\r\n\r\n    public List<String> getClinicianIds() {\r\n        return clinicianRepo.getAllIds();\r\n    }\r\n\r\n    public List<String> getFacilityIds() {\r\n        return facilityRepo.getAllIds();\r\n    }\r\n\r\n    public void addAppointment(Appointment a) {\r\n        repo.addAndAppend(a);\r\n        refreshAppointments();\r\n    }\r\n\r\n    public void deleteById(String id) {\r\n        Appointment a = repo.findById(id);\r\n        if (a != null) repo.remove(a);\r\n        refreshAppointments();\r\n    }\r\n}\r\n\r\n",
      "info": {
        "size": 2020,
        "last_modified": "2025-12-14T02:19:24.8614653",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    },
    {
      "path": "src\\controller\\ClinicianController.java",
      "content": "package controller;\r\n\r\nimport model.Clinician;\r\nimport model.ClinicianRepository;\r\nimport view.ClinicianView;\r\n\r\nimport java.util.List;\r\n\r\npublic class ClinicianController {\r\n\r\n    public final ClinicianRepository repository;\r\n    private final ClinicianView view;\r\n\r\n    public ClinicianController(ClinicianRepository repo, ClinicianView view) {\r\n        this.repository = repo;\r\n        this.view = view;\r\n        this.view.setController(this);\r\n        refresh();\r\n    }\r\npublic ClinicianView getView() {\r\n    return view;\r\n}\r\n    // ============================================================\r\n    // ID GENERATOR\r\n    // ============================================================\r\n    public String generateId() {\r\n        return repository.generateNewId();\r\n    }\r\n\r\n    // ============================================================\r\n    // REFRESH TABLE\r\n    // ============================================================\r\n    public void refresh() {\r\n        view.showClinicians(repository.getAll());\r\n    }\r\n\r\n    // ============================================================\r\n    // ADD CLINICIAN\r\n    // ============================================================\r\n    public void addClinician(Clinician c) {\r\n        repository.addAndAppend(c);\r\n        refresh();\r\n    }\r\n\r\n    // ============================================================\r\n    // DELETE CLINICIAN BY ID\r\n    // ============================================================\r\n    public void deleteById(String id) {\r\n        Clinician c = repository.findById(id);\r\n        if (c != null) {\r\n            repository.remove(c);\r\n            refresh();\r\n        }\r\n    }\r\n}\r\n",
      "info": {
        "size": 1660,
        "last_modified": "2025-12-14T02:19:24.8614653",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    },
    {
      "path": "src\\controller\\PatientController.java",
      "content": "package controller;\r\n\r\nimport model.Patient;\r\nimport model.PatientRepository;\r\nimport view.PatientView;\r\nimport java.util.List;\r\n\r\npublic class PatientController {\r\n\r\n    private final PatientRepository repository;\r\n    private final PatientView view;\r\n\r\n    public PatientController(PatientRepository repository, PatientView view) {\r\n        this.repository = repository;\r\n        this.view = view;\r\n        this.view.setController(this);\r\n        refreshView();\r\n    }\r\n    public PatientView getView() {\r\n    return view;\r\n}\r\n\r\n\r\n    public void refreshView() {\r\n        List<Patient> patients = repository.getAll();\r\n        view.showPatients(patients);\r\n    }\r\n\r\n    public void addPatient(Patient p) {\r\n        repository.addAndAppend(p);\r\n        refreshView();\r\n    }\r\n\r\n    public void deletePatient(Patient p) {\r\n        repository.remove(p);\r\n        refreshView();\r\n    }\r\n\r\n    public Patient findById(String id) {\r\n        return repository.findById(id);\r\n    }\r\n}\r\n",
      "info": {
        "size": 980,
        "last_modified": "2025-12-14T02:19:24.8614653",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    },
    {
      "path": "src\\controller\\PrescriptionController.java",
      "content": "package controller;\r\n\r\nimport model.Prescription;\r\nimport model.PrescriptionRepository;\r\nimport model.PatientRepository;\r\nimport model.ClinicianRepository;\r\nimport model.AppointmentRepository;\r\nimport model.Patient;\r\nimport model.Clinician;\r\nimport model.Appointment;\r\nimport view.PrescriptionView;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class PrescriptionController {\r\n\r\n    private final PrescriptionRepository repository;\r\n    private final PatientRepository patientRepository;\r\n    private final ClinicianRepository clinicianRepository;\r\n    private final AppointmentRepository appointmentRepository;\r\n    private final PrescriptionView view;\r\n\r\n    public PrescriptionController(PrescriptionRepository repository,\r\n                                  PatientRepository patientRepository,\r\n                                  ClinicianRepository clinicianRepository,\r\n                                  AppointmentRepository appointmentRepository,\r\n                                  PrescriptionView view) {\r\n\r\n        this.repository = repository;\r\n        this.patientRepository = patientRepository;\r\n        this.clinicianRepository = clinicianRepository;\r\n        this.appointmentRepository = appointmentRepository;\r\n        this.view = view;\r\n\r\n        view.setController(this);\r\n\r\n        // Populate dropdowns\r\n        view.populateDropdowns(\r\n                getPatientIds(),\r\n                getClinicianIds(),\r\n                repository.getMedicationOptions(),\r\n                repository.getPharmacyOptions(),\r\n                getAppointmentIds()\r\n        );\r\n\r\n        refreshView();\r\n    }\r\n\r\n    public PrescriptionView getView() {\r\n        return view;\r\n    }\r\n\r\n    public void refreshView() {\r\n        view.showPrescriptions(repository.getAll());\r\n        view.setNextId(repository.generateNewId());\r\n    }\r\n\r\n    // Expose lists for view\r\n    public List<String> getPatientIds() {\r\n        List<String> ids = new ArrayList<>();\r\n        for (Patient p : patientRepository.getAll()) {\r\n            ids.add(p.getId());\r\n        }\r\n        return ids;\r\n    }\r\n\r\n    public List<String> getClinicianIds() {\r\n        List<String> ids = new ArrayList<>();\r\n        for (Clinician c : clinicianRepository.getAll()) {\r\n            ids.add(c.getId());\r\n        }\r\n        return ids;\r\n    }\r\n\r\n    public List<String> getAppointmentIds() {\r\n        List<String> ids = new ArrayList<>();\r\n        for (Appointment a : appointmentRepository.getAll()) {\r\n            ids.add(a.getId());\r\n        }\r\n        return ids;\r\n    }\r\n\r\n    // ---------- CRUD called by view ----------\r\n\r\n    public void addPrescription(Prescription p) {\r\n        repository.addAndAppend(p);\r\n        refreshView();\r\n    }\r\n\r\n    public void updatePrescription(Prescription p) {\r\n        repository.update(p);\r\n        refreshView();\r\n    }\r\n\r\n    public void deleteById(String id) {\r\n        repository.removeById(id);\r\n        refreshView();\r\n    }\r\n}\r\n",
      "info": {
        "size": 2963,
        "last_modified": "2025-12-14T02:19:24.8775107",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    },
    {
      "path": "src\\controller\\ReferralController.java",
      "content": "package controller;\r\n\r\nimport model.*;\r\nimport view.ReferralView;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class ReferralController {\r\n\r\n    private final ReferralManager referralManager;\r\n    private final PatientRepository patientRepo;\r\n    private final ClinicianRepository clinicianRepo;\r\n    private final FacilityRepository facilityRepo;\r\n    private final AppointmentRepository appointmentRepo;\r\n    private final ReferralView view;\r\n\r\n    public ReferralController(ReferralManager rm,\r\n                              PatientRepository pr,\r\n                              ClinicianRepository cr,\r\n                              FacilityRepository fr,\r\n                              AppointmentRepository ar,\r\n                              ReferralView view) {\r\n\r\n        this.referralManager = rm;\r\n        this.patientRepo = pr;\r\n        this.clinicianRepo = cr;\r\n        this.facilityRepo = fr;\r\n        this.appointmentRepo = ar;\r\n        this.view = view;\r\n\r\n        // hook controller into view\r\n        this.view.setController(this);\r\n\r\n        refreshReferrals();\r\n    }\r\n\r\n    // ---------------------------------------------\r\n    // VIEW HOOKS\r\n    // ---------------------------------------------\r\n    public ReferralView getView() {\r\n        return view;\r\n    }\r\n\r\n    public void refreshReferrals() {\r\n        view.showReferrals(referralManager.getAllReferrals());\r\n    }\r\n\r\n    // ---------------------------------------------\r\n    // COMBOBOX DATA\r\n    // ---------------------------------------------\r\n    public List<String> getPatientIds() {\r\n        List<String> ids = new ArrayList<>();\r\n        for (Patient p : patientRepo.getAll()) {\r\n            ids.add(p.getId());\r\n        }\r\n        return ids;\r\n    }\r\n\r\n    public List<String> getClinicianIds() {\r\n        List<String> ids = new ArrayList<>();\r\n        for (Clinician c : clinicianRepo.getAll()) {\r\n            ids.add(c.getId());\r\n        }\r\n        return ids;\r\n    }\r\n\r\n    public List<String> getFacilityIds() {\r\n        List<String> ids = new ArrayList<>();\r\n        for (Facility f : facilityRepo.getAll()) {\r\n            ids.add(f.getId());\r\n        }\r\n        return ids;\r\n    }\r\n\r\n    public List<String> getAppointmentIds() {\r\n        List<String> ids = new ArrayList<>();\r\n        for (Appointment a : appointmentRepo.getAll()) {\r\n            ids.add(a.getId());\r\n        }\r\n        return ids;\r\n    }\r\n\r\n    // ---------------------------------------------\r\n    // AUTO ID GENERATOR\r\n    // ---------------------------------------------\r\n    public String getNextReferralId() {\r\n\r\n        int max = 0;\r\n\r\n        for (Referral r : referralManager.getAllReferrals()) {\r\n            String id = r.getId();   // Example: \"R012\"\r\n            if (id != null && id.startsWith(\"R\")) {\r\n                try {\r\n                    int num = Integer.parseInt(id.substring(1));\r\n                    if (num > max) max = num;\r\n                } catch (NumberFormatException ignored) {}\r\n            }\r\n        }\r\n\r\n        int next = max + 1;\r\n        return String.format(\"R%03d\", next);\r\n    }\r\n\r\n    // ---------------------------------------------\r\n    // ADD REFERRAL\r\n    // ---------------------------------------------\r\n    public void addReferral(Referral r) {\r\n        referralManager.createReferral(r);   // Saves CSV + writes text file\r\n        refreshReferrals();\r\n    }\r\n}\r\n",
      "info": {
        "size": 3394,
        "last_modified": "2025-12-14T02:19:24.8934266",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    },
    {
      "path": "src\\data\\appointments.csv",
      "content": "appointment_id,patient_id,clinician_id,facility_id,appointment_date,appointment_time,duration_minutes,appointment_type,status,reason_for_visit,notes,created_date,last_modified\nA001,P001,C001,S001,2025-09-20,09:00,15,Routine Consultation,Scheduled,Annual health check,\"Patient due for routine screening\",2025-09-15,2025-09-15\nA002,P002,C009,S001,2025-09-20,10:30,30,Vaccination,Scheduled,Flu vaccination,\"Annual flu jab appointment\",2025-09-14,2025-09-14\nA003,P003,C003,S002,2025-09-21,14:00,15,Follow-up,Scheduled,Blood pressure check,\"Follow-up for hypertension management\",2025-09-16,2025-09-16\nA004,P004,C002,S001,2025-09-22,11:15,20,Urgent Consultation,Scheduled,Chest pain,\"Patient reports chest discomfort\",2025-09-17,2025-09-17\nA005,P005,C005,H001,2025-09-25,15:30,45,Specialist Consultation,Scheduled,Cardiology referral,\"Referred for heart murmur investigation\",2025-09-10,2025-09-10\nA006,P006,C004,S003,2025-09-23,09:45,15,Routine Consultation,Scheduled,Prescription review,\"Review of chronic medications\",2025-09-18,2025-09-18\nA007,P007,C001,S001,2025-09-24,16:00,15,Emergency,Cancelled,Sudden illness,\"Patient cancelled due to recovery\",2025-09-19,2025-09-20\nA008,P008,C010,S002,2025-09-26,10:00,30,Health Check,Scheduled,Well woman screening,\"Routine cervical screening\",2025-09-12,2025-09-12\nA009,P009,C007,H002,2025-09-27,13:00,60,Specialist Consultation,Scheduled,Orthopaedic assessment,\"Knee pain investigation\",2025-09-11,2025-09-11\nA010,P010,C002,S001,2025-09-28,08:30,20,Follow-up,Scheduled,Diabetes review,\"3-month diabetes check-up\",2025-09-13,2025-09-13\nA011,P001,C006,H001,2025-10-02,14:15,45,Specialist Consultation,Scheduled,Neurology referral,\"Headache investigation\",2025-09-20,2025-09-20\nA012,P003,C012,H002,2025-10-05,11:00,30,Specialist Consultation,Scheduled,Gastroenterology,\"Digestive issues assessment\",2025-09-18,2025-09-18",
      "info": {
        "size": 1859,
        "last_modified": "2025-12-14T02:19:24.8934266",
        "mime_type": "text/csv",
        "extension": ".csv"
      }
    },
    {
      "path": "src\\data\\clinicians.csv",
      "content": "clinician_id,first_name,last_name,title,speciality,gmc_number,phone_number,email,workplace_id,workplace_type,employment_status,start_date\nC001,Dr. David,Thompson,GP,General Practice,7654321,07111222333,d.thompson@birminghamgp.nhs.uk,S001,GP Surgery,Full-time,2018-04-01\nC002,Dr. Helen,Roberts,GP,General Practice,7654322,07111222334,h.roberts@birminghamgp.nhs.uk,S001,GP Surgery,Part-time,2019-09-15\nC003,Dr. Mark,Davies,GP,General Practice,7654323,07111222335,m.davies@solihullgp.nhs.uk,S002,GP Surgery,Full-time,2017-02-20\nC004,Dr. Susan,Clarke,GP,General Practice,7654324,07111222336,s.clarke@suttongp.nhs.uk,S003,GP Surgery,Full-time,2020-01-10\nC005,Dr. Richard,Evans,Consultant,Cardiology,7654325,07111222337,r.evans@heartlandshospital.nhs.uk,H001,Hospital,Full-time,2015-08-12\nC006,Dr. Maria,Rodriguez,Consultant,Neurology,7654326,07111222338,m.rodriguez@heartlandshospital.nhs.uk,H001,Hospital,Full-time,2016-11-05\nC007,Dr. Andrew,White,Consultant,Orthopaedics,7654327,07111222339,a.white@queenshospital.nhs.uk,H002,Hospital,Full-time,2019-03-18\nC008,Dr. Jennifer,Lee,Consultant,Dermatology,7654328,07111222340,j.lee@birminghamhospital.nhs.uk,H003,Hospital,Part-time,2021-06-01\nC009,Sister Mary,Kelly,Senior Nurse,General Nursing,N654321,07111222341,m.kelly@birminghamgp.nhs.uk,S001,GP Surgery,Full-time,2019-01-15\nC010,Nurse Jane,Phillips,Practice Nurse,Practice Nursing,N654322,07111222342,j.phillips@solihullgp.nhs.uk,S002,GP Surgery,Full-time,2020-05-20\nC011,Nurse Robert,Green,Staff Nurse,General Nursing,N654323,07111222343,r.green@heartlandshospital.nhs.uk,H001,Hospital,Full-time,2018-09-10\nC012,Dr. Paul,Harris,Consultant,Gastroenterology,7654329,07111222344,p.harris@queenshospital.nhs.uk,H002,Hospital,Full-time,2017-12-03",
      "info": {
        "size": 1740,
        "last_modified": "2025-12-14T02:19:24.9093486",
        "mime_type": "text/csv",
        "extension": ".csv"
      }
    },
    {
      "path": "src\\data\\facilities.csv",
      "content": "facility_id,facility_name,facility_type,address,postcode,phone_number,email,opening_hours,manager_name,capacity,specialities_offered\nS001,Birmingham Central GP Surgery,GP Surgery,\"100 High Street, Birmingham\",B1 1ZZ,0121-123-4567,contact@birminghamgp.nhs.uk,\"Mon-Fri: 8:00-18:00, Sat: 8:00-12:00\",Dr. David Thompson,1500,General Practice|Vaccinations|Minor Surgery\nS002,Solihull Family Practice,GP Surgery,\"250 Station Road, Solihull\",B91 2AA,0121-234-5678,enquiries@solihullgp.nhs.uk,\"Mon-Fri: 8:30-17:30, Sat: 9:00-13:00\",Dr. Mark Davies,1200,General Practice|Family Planning|Travel Clinic\nS003,Sutton Coldfield Medical Centre,GP Surgery,\"75 Parade, Sutton Coldfield\",B72 1PX,0121-345-6789,reception@suttongp.nhs.uk,\"Mon-Fri: 8:00-18:30, Sat: 8:30-12:30\",Dr. Susan Clarke,2000,General Practice|Chronic Disease Management|Mental Health\nH001,Heartlands Hospital,Hospital,\"Bordesley Green East, Birmingham\",B9 5SS,0121-424-2000,enquiries@heartlandshospital.nhs.uk,\"24/7 Emergency, Outpatients: Mon-Fri 8:00-17:00\",Sarah Mitchell,800,Cardiology|Neurology|Emergency Medicine|General Surgery\nH002,Queen Elizabeth Hospital,Hospital,\"Mindelsohn Way, Birmingham\",B15 2TH,0121-627-2000,contact@queenshospital.nhs.uk,\"24/7 Emergency, Outpatients: Mon-Fri 7:30-18:00\",Michael Brown,1200,Orthopaedics|Oncology|Transplant Surgery|Critical Care\nH003,Birmingham Children's Hospital,Hospital,\"Steelhouse Lane, Birmingham\",B4 6NH,0121-333-9999,info@birminghamhospital.nhs.uk,\"24/7 Emergency, Outpatients: Mon-Fri 8:30-17:30\",Emma Thompson,400,Paediatrics|Dermatology|Child Psychology|Neonatal Care",
      "info": {
        "size": 1581,
        "last_modified": "2025-12-14T02:19:24.9093486",
        "mime_type": "text/csv",
        "extension": ".csv"
      }
    },
    {
      "path": "src\\data\\patients.csv",
      "content": "patient_id,first_name,last_name,date_of_birth,nhs_number,gender,phone_number,email,address,postcode,emergency_contact_name,emergency_contact_phone,registration_date,gp_surgery_id\nP001,John,Smith,1985-03-15,1234567890,M,07123456789,john.smith@email.com,\"123 Oak Street, Birmingham\",B1 1AA,Sarah Smith,07987654321,2020-01-15,S001\nP002,Emma,Johnson,1990-07-22,2345678901,F,07234567890,emma.johnson@email.com,\"456 Pine Avenue, Birmingham\",B2 2BB,Michael Johnson,07876543210,2019-05-10,S001\nP003,Robert,Williams,1975-11-08,3456789012,M,07345678901,robert.williams@email.com,\"789 Maple Road, Solihull\",B91 3CC,Lisa Williams,07765432109,2021-03-22,S002\nP004,Sarah,Brown,1988-09-14,4567890123,F,07456789012,sarah.brown@email.com,\"321 Elm Close, Birmingham\",B3 4DD,David Brown,07654321098,2020-08-05,S001\nP005,Michael,Davis,1982-12-03,5678901234,M,07567890123,michael.davis@email.com,\"654 Birch Lane, Sutton Coldfield\",B75 5EE,Jennifer Davis,07543210987,2019-11-18,S003\nP006,Linda,Miller,1978-04-27,6789012345,F,07678901234,linda.miller@email.com,\"987 Cedar Grove, Birmingham\",B4 6FF,Mark Miller,07432109876,2020-12-01,S002\nP007,James,Wilson,1992-01-19,7890123456,M,07789012345,james.wilson@email.com,\"147 Willow Way, Birmingham\",B5 7GG,Helen Wilson,07321098765,2021-02-14,S001\nP008,Patricia,Moore,1983-06-11,8901234567,F,07890123456,patricia.moore@email.com,\"258 Ash Court, Erdington\",B23 8HH,Thomas Moore,07210987654,2020-04-30,S003\nP009,Christopher,Taylor,1979-10-05,9012345678,M,07901234567,christopher.taylor@email.com,\"369 Holly Drive, Birmingham\",B6 9II,Amanda Taylor,07109876543,2019-09-12,S002\nP010,Elizabeth,Anderson,1987-08-30,0123456789,F,07012345678,elizabeth.anderson@email.com,\"741 Poplar Street, Kings Heath\",B14 0JJ,Richard Anderson,07098765432,2021-01-08,S001",
      "info": {
        "size": 1768,
        "last_modified": "2025-12-14T02:19:24.9310331",
        "mime_type": "text/csv",
        "extension": ".csv"
      }
    },
    {
      "path": "src\\data\\prescriptions.csv",
      "content": "prescription_id,patient_id,clinician_id,appointment_id,prescription_date,medication_name,dosage,frequency,duration_days,quantity,instructions,pharmacy_name,status,issue_date,collection_date\nRX001,P001,C001,A001,2025-09-20,Simvastatin,20mg,Once daily,28,28 tablets,Take with evening meal,Boots Pharmacy Birmingham,Issued,2025-09-20,\nRX002,P002,C009,A002,2025-09-20,Paracetamol,500mg,As required,7,16 tablets,Max 8 tablets in 24 hours,Superdrug Birmingham Central,Issued,2025-09-20,\nRX003,P003,C003,A003,2025-09-21,Ramipril,5mg,Once daily,28,28 tablets,Take in morning,Lloyds Pharmacy Solihull,Issued,2025-09-21,\nRX004,P004,C002,A004,2025-09-22,GTN Spray,400mcg,As required,30,1 spray bottle,Use for chest pain episodes,Boots Pharmacy Birmingham,Issued,2025-09-22,\nRX005,P006,C004,A006,2025-09-23,Metformin,500mg,Twice daily,28,56 tablets,Take with meals,Asda Pharmacy Sutton,Issued,2025-09-23,\nRX006,P008,C010,A008,2025-09-26,Folic Acid,5mg,Once daily,28,28 tablets,Take before food,Well Pharmacy Solihull,Issued,2025-09-26,\nRX007,P010,C002,A010,2025-09-28,Insulin Glargine,100units/ml,Once daily,28,1 pen,Inject at same time daily,Boots Pharmacy Birmingham,Issued,2025-09-28,\nRX008,P001,C001,,2025-09-15,Ibuprofen,400mg,Three times daily,7,21 tablets,Take with food,Boots Pharmacy Birmingham,Collected,2025-09-15,2025-09-16\nRX009,P003,C003,,2025-08-20,Amlodipine,5mg,Once daily,28,28 tablets,Take in morning,Lloyds Pharmacy Solihull,Collected,2025-08-20,2025-08-22\nRX010,P005,C005,A005,2025-09-25,Atorvastatin,40mg,Once daily,28,28 tablets,Take in evening,Heartlands Hospital Pharmacy,Issued,2025-09-25,",
      "info": {
        "size": 1603,
        "last_modified": "2025-12-14T02:19:24.9353415",
        "mime_type": "text/csv",
        "extension": ".csv"
      }
    },
    {
      "path": "src\\data\\referrals.csv",
      "content": "referral_id,patient_id,referring_clinician_id,referred_to_clinician_id,referring_facility_id,referred_to_facility_id,referral_date,urgency_level,referral_reason,clinical_summary,requested_investigations,status,appointment_id,notes,created_date,last_updated\nR001,P005,C001,C005,S001,H001,2025-09-10,Routine,Heart murmur investigation,\"35-year-old male with Grade 2/6 systolic murmur detected during routine examination. No symptoms of chest pain or breathlessness.\",Echocardiogram|ECG,Completed,A005,\"Patient seen, echo normal\",2025-09-10,2025-09-25\nR002,P001,C001,C006,S001,H001,2025-09-20,Urgent,Persistent headaches,\"40-year-old male with 3-month history of severe morning headaches. No focal neurological signs but concerned about intracranial pressure.\",MRI Brain|Neurological assessment,Pending,A011,Awaiting MRI results,2025-09-20,2025-09-20\nR003,P003,C003,C012,S002,H002,2025-09-18,Routine,Chronic abdominal pain,\"48-year-old male with 6-month history of epigastric pain and weight loss. Normal blood tests but symptoms persisting.\",Upper GI Endoscopy|CT Abdomen,Pending,A012,Patient anxious about procedure,2025-09-18,2025-09-18\nR004,P009,C004,C007,S003,H002,2025-09-11,Routine,Chronic knee pain,\"44-year-old male with 2-year history of right knee pain affecting mobility. X-ray shows mild degenerative changes.\",MRI Knee|Orthopaedic assessment,In Progress,A009,Physiotherapy commenced,2025-09-11,2025-09-27\nR005,P007,C002,C008,S001,H003,2025-09-15,Non-urgent,Suspicious skin lesion,\"33-year-old male with changing mole on back. No family history of melanoma but lesion has irregular borders.\",Dermatoscopy|Possible biopsy,Pending,,Routine 2-week wait referral,2025-09-15,2025-09-15\nR006,P004,C002,C005,S001,H001,2025-09-22,Urgent,Chest pain episodes,\"37-year-old female with recent onset chest pain and family history of cardiac disease. ECG shows minor T-wave changes.\",Exercise Stress Test|Cardiac enzymes,New,,Fast-track cardiology referral,2025-09-22,2025-09-22\nR007,P008,C010,C008,S002,H003,2025-09-20,Routine,Chronic eczema,\"42-year-old female with severe atopic eczema not responding to standard treatments. Affects quality of life significantly.\",Patch testing|Specialist dermatology review,New,,Considering immunosuppressive therapy,2025-09-20,2025-09-20\nR008,P002,C009,C011,S001,H001,2025-09-14,Non-urgent,Post-vaccination care,\"35-year-old female requiring follow-up after adverse reaction to vaccination. Mild allergic response managed successfully.\",Allergy assessment|Immunization review,Completed,,Standard protocol followed,2025-09-14,2025-09-20\nR009,P010,C002,C005,S001,H001,2025-09-13,Routine,Diabetes complications screening,\"38-year-old female with Type 2 diabetes requiring annual cardiovascular risk assessment. HbA1c slightly elevated.\",Diabetic retinal screening|Cardiovascular assessment,Pending,,Annual diabetes review referral,2025-09-13,2025-09-13\nR010,P006,C004,C006,S003,H001,2025-09-12,Urgent,Memory problems,\"47-year-old female reporting significant memory issues and confusion. Family concerned about early onset dementia.\",Cognitive assessment|MRI Brain,Pending,,Early intervention referral requested,2025-09-12,2025-09-12,,,,,,,\r\nR011,R005,C003,C004,S001,S002,23/11/2025,Urgent,Chest Pain,Very very Critical,ECG,Pending,A013,Nil,23/11/2025,23/11/2025\r\n",
      "info": {
        "size": 3296,
        "last_modified": "2025-12-14T02:19:24.9438197",
        "mime_type": "text/csv",
        "extension": ".csv"
      }
    },
    {
      "path": "src\\data\\referrals_output.txt",
      "content": "==============================================\r\n            REFERRAL SUMMARY REPORT           \r\n==============================================\r\nReferral ID: R011\r\nReferring Clinician: Dr. Mark Davies GP (Dr. Mark - General Practice)\r\nReferred To: Dr. Susan Clarke GP (Dr. Susan - General Practice)\r\nReferring Facility: Birmingham Central GP Surgery (GP Surgery)\r\nReferred To Facility: Solihull Family Practice (GP Surgery)\r\nReferral Date: 23/11/2025\r\nUrgency Level: Urgent\r\nReason for Referral: Chest Pain\r\nRequested Service: ECG\r\nStatus: Pending\r\nClinical Summary:\r\nVery very Critical\r\nNotes:\r\nNil\r\nCreated Date: 23/11/2025\r\nLast Updated: 23/11/2025\r\n----------------------------------------------\r\n\r\n",
      "info": {
        "size": 702,
        "last_modified": "2025-12-14T02:19:24.9565774",
        "mime_type": "text/plain",
        "extension": ".txt"
      }
    },
    {
      "path": "src\\data\\staff.csv",
      "content": "staff_id,first_name,last_name,role,department,facility_id,phone_number,email,employment_status,start_date,line_manager,access_level\nST001,Michelle,Adams,Practice Manager,Administration,S001,07111333444,m.adams@birminghamgp.nhs.uk,Full-time,2019-03-01,Dr. David Thompson,Manager\nST002,James,Wilson,Receptionist,Front Desk,S001,07111333445,j.wilson@birminghamgp.nhs.uk,Part-time,2020-07-15,Michelle Adams,Basic\nST003,Carol,Smith,Medical Secretary,Administration,S001,07111333446,c.smith@birminghamgp.nhs.uk,Full-time,2018-11-20,Michelle Adams,Standard\nST004,Peter,Johnson,Healthcare Assistant,Clinical Support,S001,07111333447,p.johnson@birminghamgp.nhs.uk,Full-time,2021-01-10,Sister Mary Kelly,Standard\nST005,Sandra,Brown,Practice Manager,Administration,S002,07111333448,s.brown@solihullgp.nhs.uk,Full-time,2017-05-12,Dr. Mark Davies,Manager\nST006,Kevin,Davis,Receptionist,Front Desk,S002,07111333449,k.davis@solihullgp.nhs.uk,Full-time,2019-09-03,Sandra Brown,Basic\nST007,Lisa,Miller,Medical Secretary,Administration,S002,07111333450,l.miller@solihullgp.nhs.uk,Part-time,2020-02-18,Sandra Brown,Standard\nST008,Margaret,Taylor,Practice Manager,Administration,S003,07111333451,m.taylor@suttongp.nhs.uk,Full-time,2018-08-25,Dr. Susan Clarke,Manager\nST009,Robert,Anderson,Receptionist,Front Desk,S003,07111333452,r.anderson@suttongp.nhs.uk,Full-time,2021-04-07,Margaret Taylor,Basic\nST010,Helen,White,Healthcare Assistant,Clinical Support,S003,07111333453,h.white@suttongp.nhs.uk,Full-time,2020-10-14,Dr. Susan Clarke,Standard\nST011,David,Thompson,Hospital Administrator,Administration,H001,07111333454,d.thompson@heartlandshospital.nhs.uk,Full-time,2016-12-01,Sarah Mitchell,Manager\nST012,Julie,Roberts,Ward Clerk,Administration,H001,07111333455,j.roberts@heartlandshospital.nhs.uk,Full-time,2019-06-22,David Thompson,Standard\nST013,Mark,Evans,Porter,Support Services,H001,07111333456,m.evans@heartlandshospital.nhs.uk,Full-time,2020-01-15,David Thompson,Basic\nST014,Susan,Clarke,Appointments Coordinator,Administration,H002,07111333457,s.clarke@queenshospital.nhs.uk,Full-time,2018-04-30,Michael Brown,Standard\nST015,Andrew,Phillips,Medical Records Clerk,Administration,H002,07111333458,a.phillips@queenshospital.nhs.uk,Part-time,2021-02-08,Susan Clarke,Standard\nST016,Patricia,Green,Children's Unit Coordinator,Administration,H003,07111333459,p.green@birminghamhospital.nhs.uk,Full-time,2017-10-12,Emma Thompson,Manager",
      "info": {
        "size": 2419,
        "last_modified": "2025-12-14T02:19:24.9592472",
        "mime_type": "text/csv",
        "extension": ".csv"
      }
    },
    {
      "path": "src\\Main\\Main.java",
      "content": "package Main;\r\n\r\nimport controller.*;\r\nimport model.*;\r\nimport view.*;\r\nimport javax.swing.SwingUtilities;\r\n\r\npublic class Main {\r\n\r\n    public static void main(String[] args) {\r\n\r\n        SwingUtilities.invokeLater(() -> {\r\n\r\n            // ================================\r\n            // REPOSITORIES\r\n            // ================================\r\n            PatientRepository pr =\r\n                    new PatientRepository(\"src/data/patients.csv\");\r\n\r\n            ClinicianRepository cr =\r\n                    new ClinicianRepository(\"src/data/clinicians.csv\");\r\n\r\n            FacilityRepository fr =\r\n                    new FacilityRepository(\"src/data/facilities.csv\");\r\n\r\n            AppointmentRepository ar =\r\n                    new AppointmentRepository(\"src/data/appointments.csv\");\r\n\r\n            PrescriptionRepository pResR =\r\n                    new PrescriptionRepository(\"src/data/prescriptions.csv\");\r\n\r\n            ReferralRepository rR =\r\n                    new ReferralRepository(\"src/data/referrals.csv\");\r\n\r\n            // ================================\r\n            // REFERRAL MANAGER (Singleton)\r\n            // ================================\r\n            ReferralManager rm = ReferralManager.getInstance(\r\n                    rR, pr, cr, fr,\r\n                    \"src/data/referrals_output.txt\"\r\n            );\r\n\r\n            // ================================\r\n            // VIEWS\r\n            // ================================\r\n            PatientView pv = new PatientView();\r\n            ClinicianView cv = new ClinicianView();\r\n            AppointmentView av = new AppointmentView();\r\n            PrescriptionView presV = new PrescriptionView();\r\n            ReferralView rv = new ReferralView();\r\n\r\n            // ================================\r\n            // CONTROLLERS (MATCHING YOUR CONSTRUCTORS)\r\n            // ================================\r\n            PatientController pc = new PatientController(pr, pv);\r\n\r\n            ClinicianController cc = new ClinicianController(cr, cv);\r\n\r\n            AppointmentController ac = new AppointmentController(\r\n                    ar,   // AppointmentRepository\r\n                    pr,   // PatientRepository\r\n                    cr,   // ClinicianRepository\r\n                    fr,   // FacilityRepository\r\n                    av    // AppointmentView\r\n            );\r\n\r\n            PrescriptionController prc = new PrescriptionController(\r\n                    pResR,\r\n                    pr,\r\n                    cr,\r\n                    ar,\r\n                    presV\r\n            );\r\n\r\n            ReferralController rc = new ReferralController(\r\n                    rm,   // ReferralManager\r\n                    pr,   // PatientRepository\r\n                    cr,   // ClinicianRepository\r\n                    fr,   // FacilityRepository\r\n                    ar,   // AppointmentRepository\r\n                    rv    // ReferralView\r\n            );\r\n\r\n            // ================================\r\n            // MAIN FRAME\r\n            // ================================\r\n            MainFrame frame = new MainFrame(pc, cc, ac, prc, rc);\r\n            frame.setVisible(true);\r\n        });\r\n    }\r\n}\r\n",
      "info": {
        "size": 3211,
        "last_modified": "2025-12-14T02:19:24.9746291",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    },
    {
      "path": "src\\model\\Appointment.java",
      "content": "package model;\r\n\r\npublic class Appointment {\r\n\r\n    private String id;                  // appointment_id\r\n    private String patientId;           // patient_id\r\n    private String clinicianId;         // clinician_id\r\n    private String facilityId;          // facility_id\r\n    private String appointmentDate;     // appointment_date  (e.g. 20/09/2025)\r\n    private String appointmentTime;     // appointment_time  (e.g. 09:00)\r\n    private String durationMinutes;     // duration_minutes  (e.g. 15)\r\n    private String appointmentType;     // appointment_type  (e.g. Routine Consultation)\r\n    private String status;              // status            (Scheduled, Cancelled, etc.)\r\n    private String reasonForVisit;      // reason_for_visit\r\n    private String notes;               // notes\r\n    private String createdDate;         // created_date\r\n    private String lastModified;        // last_modified\r\n\r\n    public Appointment() { }\r\n\r\n    public Appointment(String id,\r\n                       String patientId,\r\n                       String clinicianId,\r\n                       String facilityId,\r\n                       String appointmentDate,\r\n                       String appointmentTime,\r\n                       String durationMinutes,\r\n                       String appointmentType,\r\n                       String status,\r\n                       String reasonForVisit,\r\n                       String notes,\r\n                       String createdDate,\r\n                       String lastModified) {\r\n\r\n        this.id = id;\r\n        this.patientId = patientId;\r\n        this.clinicianId = clinicianId;\r\n        this.facilityId = facilityId;\r\n        this.appointmentDate = appointmentDate;\r\n        this.appointmentTime = appointmentTime;\r\n        this.durationMinutes = durationMinutes;\r\n        this.appointmentType = appointmentType;\r\n        this.status = status;\r\n        this.reasonForVisit = reasonForVisit;\r\n        this.notes = notes;\r\n        this.createdDate = createdDate;\r\n        this.lastModified = lastModified;\r\n    }\r\n\r\n    public String getId()                { return id; }\r\n    public String getPatientId()         { return patientId; }\r\n    public String getClinicianId()       { return clinicianId; }\r\n    public String getFacilityId()        { return facilityId; }\r\n    public String getAppointmentDate()   { return appointmentDate; }\r\n    public String getAppointmentTime()   { return appointmentTime; }\r\n    public String getDurationMinutes()   { return durationMinutes; }\r\n    public String getAppointmentType()   { return appointmentType; }\r\n    public String getStatus()            { return status; }\r\n    public String getReasonForVisit()    { return reasonForVisit; }\r\n    public String getNotes()             { return notes; }\r\n    public String getCreatedDate()       { return createdDate; }\r\n    public String getLastModified()      { return lastModified; }\r\n\r\n    public void setId(String id)                          { this.id = id; }\r\n    public void setPatientId(String patientId)            { this.patientId = patientId; }\r\n    public void setClinicianId(String clinicianId)        { this.clinicianId = clinicianId; }\r\n    public void setFacilityId(String facilityId)          { this.facilityId = facilityId; }\r\n    public void setAppointmentDate(String appointmentDate){ this.appointmentDate = appointmentDate; }\r\n    public void setAppointmentTime(String appointmentTime){ this.appointmentTime = appointmentTime; }\r\n    public void setDurationMinutes(String durationMinutes){ this.durationMinutes = durationMinutes; }\r\n    public void setAppointmentType(String appointmentType){ this.appointmentType = appointmentType; }\r\n    public void setStatus(String status)                  { this.status = status; }\r\n    public void setReasonForVisit(String reasonForVisit)  { this.reasonForVisit = reasonForVisit; }\r\n    public void setNotes(String notes)                    { this.notes = notes; }\r\n    public void setCreatedDate(String createdDate)        { this.createdDate = createdDate; }\r\n    public void setLastModified(String lastModified)      { this.lastModified = lastModified; }\r\n}\r\n",
      "info": {
        "size": 4141,
        "last_modified": "2025-12-14T02:19:24.9949141",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    },
    {
      "path": "src\\model\\AppointmentRepository.java",
      "content": "package model;\r\n\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class AppointmentRepository {\r\n\r\n    private final List<Appointment> appointments = new ArrayList<>();\r\n    private final String csvPath;\r\n\r\n    public AppointmentRepository(String csvPath) {\r\n        this.csvPath = csvPath;\r\n        load();\r\n    }\r\n\r\n    private void load() {\r\n        try {\r\n            for (String[] row : CsvUtils.readCsv(csvPath)) {\r\n                // CSV columns (14):\r\n                // 0: appointment_id\r\n                // 1: patient_id\r\n                // 2: clinician_id\r\n                // 3: facility_id\r\n                // 4: appointment_date\r\n                // 5: appointment_time\r\n                // 6: duration_minutes\r\n                // 7: appointment_type\r\n                // 8: status\r\n                // 9: reason_for_visit\r\n                //10: notes\r\n                //11: created_date\r\n                //12: last_modified\r\n\r\n                Appointment a = new Appointment(\r\n                        row[0],  // id\r\n                        row[1],  // patient_id\r\n                        row[2],  // clinician_id\r\n                        row[3],  // facility_id\r\n                        row[4],  // appointment_date\r\n                        row[5],  // appointment_time\r\n                        row[6],  // duration_minutes\r\n                        row[7],  // appointment_type\r\n                        row[8],  // status\r\n                        row[9],  // reason_for_visit\r\n                        row[10], // notes\r\n                        row[11], // created_date\r\n                        row[12]  // last_modified\r\n                );\r\n\r\n                appointments.add(a);\r\n            }\r\n        } catch (IOException ex) {\r\n            System.err.println(\"Failed to load appointments: \" + ex.getMessage());\r\n        }\r\n    }\r\n\r\n    public List<Appointment> getAll() {\r\n        return appointments;\r\n    }\r\n\r\n    // Optional but handy\r\n    public String generateNewId() {\r\n        int max = 0;\r\n        for (Appointment a : appointments) {\r\n            try {\r\n                int n = Integer.parseInt(a.getId().substring(1)); // \"A001\"  1\r\n                if (n > max) max = n;\r\n            } catch (Exception ignore) {}\r\n        }\r\n        return String.format(\"A%03d\", max + 1);\r\n    }\r\n\r\n    public void add(Appointment a) {\r\n        appointments.add(a);\r\n    }\r\n\r\n    public void addAndAppend(Appointment a) {\r\n        appointments.add(a);\r\n        try {\r\n            CsvUtils.appendLine(csvPath, new String[]{\r\n                    a.getId(),\r\n                    a.getPatientId(),\r\n                    a.getClinicianId(),\r\n                    a.getFacilityId(),\r\n                    a.getAppointmentDate(),\r\n                    a.getAppointmentTime(),\r\n                    a.getDurationMinutes(),\r\n                    a.getAppointmentType(),\r\n                    a.getStatus(),\r\n                    a.getReasonForVisit(),\r\n                    a.getNotes(),\r\n                    a.getCreatedDate(),\r\n                    a.getLastModified()\r\n            });\r\n        } catch (IOException ex) {\r\n            System.err.println(\"Failed to append appointment: \" + ex.getMessage());\r\n        }\r\n    }\r\n\r\n    public void remove(Appointment a) {\r\n        appointments.remove(a);\r\n    }\r\n\r\n    public Appointment findById(String id) {\r\n        for (Appointment a : appointments)\r\n            if (a.getId().equals(id)) return a;\r\n        return null;\r\n    }\r\n}\r\n",
      "info": {
        "size": 3521,
        "last_modified": "2025-12-14T02:19:24.9949141",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    },
    {
      "path": "src\\model\\Clinician.java",
      "content": "package model;\r\n\r\npublic class Clinician {\r\n\r\n    private String id;\r\n    private String firstName;\r\n    private String lastName;\r\n    private String title;\r\n    private String speciality;\r\n    private String gmcNumber;\r\n    private String phone;\r\n    private String email;\r\n    private String workplaceId;\r\n    private String workplaceType;\r\n    private String employmentStatus;\r\n    private String startDate;\r\n\r\n    public Clinician() {}\r\n\r\n    public Clinician(String id, String title, String firstName, String lastName,\r\n                     String speciality, String gmcNumber, String phone,\r\n                     String email, String workplaceId, String workplaceType,\r\n                     String employmentStatus, String startDate) {\r\n\r\n        this.id = id;\r\n        this.title = title;\r\n        this.firstName = firstName;\r\n        this.lastName = lastName;\r\n        this.speciality = speciality;\r\n        this.gmcNumber = gmcNumber;\r\n        this.phone = phone;\r\n        this.email = email;\r\n        this.workplaceId = workplaceId;\r\n        this.workplaceType = workplaceType;\r\n        this.employmentStatus = employmentStatus;\r\n        this.startDate = startDate;\r\n    }\r\n\r\n    // ---- Getters ----\r\n    public String getId() { return id; }\r\n    public String getTitle() { return title; }\r\n    public String getFirstName() { return firstName; }\r\n    public String getLastName() { return lastName; }\r\n    public String getSpeciality() { return speciality; }\r\n    public String getGmcNumber() { return gmcNumber; }\r\n    public String getPhone() { return phone; }\r\n    public String getEmail() { return email; }\r\n    public String getWorkplaceId() { return workplaceId; }\r\n    public String getWorkplaceType() { return workplaceType; }\r\n    public String getEmploymentStatus() { return employmentStatus; }\r\n    public String getStartDate() { return startDate; }\r\n\r\n    public String getFullName() {\r\n        return title + \" \" + firstName + \" \" + lastName;\r\n    }\r\n}\r\n",
      "info": {
        "size": 1977,
        "last_modified": "2025-12-14T02:19:25.0083097",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    },
    {
      "path": "src\\model\\ClinicianRepository.java",
      "content": "package model;\r\n\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class ClinicianRepository {\r\n\r\n    private final List<Clinician> clinicians = new ArrayList<>();\r\n    private final String csvPath;\r\n\r\n    public ClinicianRepository(String csvPath) {\r\n        this.csvPath = csvPath;\r\n        load();\r\n    }\r\n    public List<String> getAllIds() {\r\n    List<String> ids = new ArrayList<>();\r\n    for (Clinician c : clinicians) ids.add(c.getId());\r\n    return ids;\r\n}\r\n\r\n\r\n    private void load() {\r\n        try {\r\n            for (String[] row : CsvUtils.readCsv(csvPath)) {\r\n                Clinician c = new Clinician(\r\n                        row[0],   // id\r\n                        row[1],   // title\r\n                        row[2],   // first\r\n                        row[3],   // last\r\n                        row[4],   // speciality\r\n                        row[5],   // gmc\r\n                        row[6],   // phone\r\n                        row[7],   // email\r\n                        row[8],   // workplace id\r\n                        row[9],   // workplace type\r\n                        row[10],  // employment\r\n                        row[11]   // start date\r\n                );\r\n                clinicians.add(c);\r\n            }\r\n        } catch (IOException ex) {\r\n            System.err.println(\"Failed to load clinicians: \" + ex.getMessage());\r\n        }\r\n    }\r\n\r\n    // ============================================================\r\n    // AUTO-ID: C001  C002  C003...\r\n    // ============================================================\r\n    public String generateNewId() {\r\n        int max = 0;\r\n        for (Clinician c : clinicians) {\r\n            try {\r\n                int n = Integer.parseInt(c.getId().substring(1));\r\n                if (n > max) max = n;\r\n            } catch (Exception ignored) {}\r\n        }\r\n        return String.format(\"C%03d\", max + 1);\r\n    }\r\n\r\n    // ============================================================\r\n    // ADD + APPEND TO CSV\r\n    // ============================================================\r\n    public void addAndAppend(Clinician c) {\r\n        clinicians.add(c);\r\n        try {\r\n            CsvUtils.appendLine(csvPath, new String[]{\r\n                    c.getId(), c.getTitle(), c.getFirstName(), c.getLastName(),\r\n                    c.getSpeciality(), c.getGmcNumber(), c.getPhone(), c.getEmail(),\r\n                    c.getWorkplaceId(), c.getWorkplaceType(), c.getEmploymentStatus(),\r\n                    c.getStartDate()\r\n            });\r\n        } catch (IOException ex) {\r\n            System.err.println(\"Failed to append clinician: \" + ex.getMessage());\r\n        }\r\n    }\r\n\r\n    public List<Clinician> getAll() {\r\n        return clinicians;\r\n    }\r\n\r\n    // ============================================================\r\n    // REMOVE\r\n    // ============================================================\r\n    public void remove(Clinician c) {\r\n        clinicians.remove(c);\r\n    }\r\n\r\n    public Clinician findById(String id) {\r\n        for (Clinician c : clinicians)\r\n            if (c.getId().equals(id)) return c;\r\n        return null;\r\n    }\r\n}\r\n",
      "info": {
        "size": 3177,
        "last_modified": "2025-12-14T02:19:25.0083097",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    },
    {
      "path": "src\\model\\CsvUtils.java",
      "content": "package model;\r\n\r\nimport java.io.*;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class CsvUtils {\r\n\r\n public static List<String[]> readCsv(String path) throws IOException {\r\n    List<String[]> rows = new ArrayList<>();\r\n\r\n    try (BufferedReader br = new BufferedReader(new FileReader(path))) {\r\n\r\n        String line;\r\n        boolean headerSkipped = false;\r\n\r\n        while ((line = br.readLine()) != null) {\r\n\r\n            if (!headerSkipped) { headerSkipped = true; continue; }\r\n\r\n            // Split on commas that are NOT inside quotes\r\n            String[] values = line.split(\",(?=([^\\\"]*\\\"[^\\\"]*\\\")*[^\\\"]*$)\");\r\n\r\n            // Remove surrounding quotes (optional)\r\n            for (int i = 0; i < values.length; i++) {\r\n                values[i] = values[i].replaceAll(\"^\\\"|\\\"$\", \"\").trim();\r\n            }\r\n\r\n            rows.add(values);\r\n        }\r\n    }\r\n    return rows;\r\n}\r\n\r\n    public static void appendLine(String path, String[] values) throws IOException {\r\n        try (BufferedWriter bw = new BufferedWriter(new FileWriter(path, true))) {\r\n            bw.write(String.join(\",\", values));\r\n            bw.newLine();\r\n        }\r\n    }\r\n}\r\n",
      "info": {
        "size": 1179,
        "last_modified": "2025-12-14T02:19:25.0281772",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    },
    {
      "path": "src\\model\\Facility.java",
      "content": "package model;\r\n\r\npublic class Facility {\r\n\r\n    private String id;\r\n    private String name;\r\n    private String type;               // GP Surgery / Hospital\r\n    private String address;\r\n    private String postcode;\r\n    private String phone;\r\n    private String email;\r\n    private String openingHours;\r\n    private String managerName;\r\n    private int capacity;\r\n    private String specialities;\r\n\r\n    public Facility() { }\r\n\r\n    public Facility(String id, String name, String type,\r\n                    String address, String postcode, String phone,\r\n                    String email, String openingHours, String managerName,\r\n                    int capacity, String specialities) {\r\n\r\n        this.id = id;\r\n        this.name = name;\r\n        this.type = type;\r\n        this.address = address;\r\n        this.postcode = postcode;\r\n        this.phone = phone;\r\n        this.email = email;\r\n        this.openingHours = openingHours;\r\n        this.managerName = managerName;\r\n        this.capacity = capacity;\r\n        this.specialities = specialities;\r\n    }\r\n\r\n    // Getters & Setters\r\n    public String getId() { return id; }\r\n    public void setId(String id) { this.id = id; }\r\n\r\n    public String getName() { return name; }\r\n    public void setName(String name) { this.name = name; }\r\n\r\n    public String getType() { return type; }\r\n    public void setType(String type) { this.type = type; }\r\n\r\n    public String getAddress() { return address; }\r\n    public void setAddress(String address) { this.address = address; }\r\n\r\n    public String getPostcode() { return postcode; }\r\n    public void setPostcode(String postcode) { this.postcode = postcode; }\r\n\r\n    public String getPhone() { return phone; }\r\n    public void setPhone(String phone) { this.phone = phone; }\r\n\r\n    public String getEmail() { return email; }\r\n    public void setEmail(String email) { this.email = email; }\r\n\r\n    public String getOpeningHours() { return openingHours; }\r\n    public void setOpeningHours(String openingHours) { this.openingHours = openingHours; }\r\n\r\n    public String getManagerName() { return managerName; }\r\n    public void setManagerName(String managerName) { this.managerName = managerName; }\r\n\r\n    public int getCapacity() { return capacity; }\r\n    public void setCapacity(int capacity) { this.capacity = capacity; }\r\n\r\n    public String getSpecialities() { return specialities; }\r\n    public void setSpecialities(String specialities) { this.specialities = specialities; }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return id + \" - \" + name;\r\n    }\r\n}\r\n",
      "info": {
        "size": 2572,
        "last_modified": "2025-12-14T02:19:25.0362086",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    },
    {
      "path": "src\\model\\FacilityRepository.java",
      "content": "package model;\r\n\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class FacilityRepository {\r\n\r\n    private final List<Facility> facilities = new ArrayList<>();\r\n    private final String csvPath;\r\n\r\n    public FacilityRepository(String csvPath) {\r\n        this.csvPath = csvPath;\r\n        load();\r\n    }\r\n    \r\n    public List<String> getAllIds() {\r\n    List<String> ids = new ArrayList<>();\r\n    for (Facility f : facilities) {\r\n        ids.add(f.getId());\r\n    }\r\n    \r\n    \r\n    return ids;\r\n}\r\n\r\n    private void load() {\r\n        try {\r\n            for (String[] row : CsvUtils.readCsv(csvPath)) {\r\n\r\n                // Read ALL columns correctly\r\n                String id            = row[0];\r\n                String name          = row[1];\r\n                String type          = row[2];\r\n                String address       = row[3];\r\n                String postcode      = row[4];\r\n                String phone         = row[5];\r\n                String email         = row[6];\r\n                String openingHours  = row[7];\r\n                String managerName   = row[8];\r\n\r\n                int capacity = 0;\r\n                try {\r\n                    capacity = Integer.parseInt(row[9]);\r\n                } catch (Exception ex) {\r\n                    System.out.println(\"Warning: Invalid capacity  \" + row[9]);\r\n                }\r\n\r\n                String specialities = row[10];\r\n\r\n                // Create Facility object correctly\r\n                Facility f = new Facility(\r\n                        id, name, type,\r\n                        address, postcode, phone,\r\n                        email, openingHours, managerName,\r\n                        capacity, specialities\r\n                );\r\n\r\n                facilities.add(f);\r\n            }\r\n        } catch (IOException ex) {\r\n            System.err.println(\"Failed to load facilities: \" + ex.getMessage());\r\n        }\r\n    }\r\n\r\n    public List<Facility> getAll() {\r\n        return facilities;\r\n    }\r\n\r\n    public Facility findById(String id) {\r\n        for (Facility f : facilities) {\r\n            if (f.getId().equals(id)) return f;\r\n        }\r\n        return null;\r\n    }\r\n}\r\n",
      "info": {
        "size": 2201,
        "last_modified": "2025-12-14T02:19:25.0399693",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    },
    {
      "path": "src\\model\\Patient.java",
      "content": "package model;\r\n\r\npublic class Patient {\r\n\r\n    private String id;\r\n    private String firstName;\r\n    private String lastName;\r\n    private String dateOfBirth;\r\n    private String nhsNumber;\r\n    private String gender;\r\n    private String phoneNumber;\r\n    private String email;\r\n    private String address;\r\n    private String postcode;\r\n    private String emergencyContactName;\r\n    private String emergencyContactPhone;\r\n    private String registrationDate;\r\n    private String gpSurgeryId;\r\n\r\n    public Patient() {}\r\n\r\n    public Patient(String id, String firstName, String lastName,\r\n                   String dateOfBirth, String nhsNumber, String gender,\r\n                   String phoneNumber, String email, String address, String postcode,\r\n                   String emergencyContactName, String emergencyContactPhone,\r\n                   String registrationDate, String gpSurgeryId) {\r\n\r\n        this.id = id;\r\n        this.firstName = firstName;\r\n        this.lastName = lastName;\r\n        this.dateOfBirth = dateOfBirth;\r\n        this.nhsNumber = nhsNumber;\r\n        this.gender = gender;\r\n        this.phoneNumber = phoneNumber;\r\n        this.email = email;\r\n        this.address = address;\r\n        this.postcode = postcode;\r\n        this.emergencyContactName = emergencyContactName;\r\n        this.emergencyContactPhone = emergencyContactPhone;\r\n        this.registrationDate = registrationDate;\r\n        this.gpSurgeryId = gpSurgeryId;\r\n    }\r\n\r\n    // Backward compatibility for older code\r\n    public String getName() {\r\n        return getFullName();\r\n    }\r\n\r\n    // ============================================================\r\n    // GETTERS\r\n    // ============================================================\r\n    public String getId() { return id; }\r\n    public String getFirstName() { return firstName; }\r\n    public String getLastName() { return lastName; }\r\n    public String getFullName() { return firstName + \" \" + lastName; }\r\n\r\n    public String getDateOfBirth() { return dateOfBirth; }\r\n    public String getNhsNumber() { return nhsNumber; }\r\n    public String getGender() { return gender; }\r\n    public String getPhoneNumber() { return phoneNumber; }\r\n    public String getEmail() { return email; }\r\n    public String getAddress() { return address; }\r\n    public String getPostcode() { return postcode; }\r\n    public String getEmergencyContactName() { return emergencyContactName; }\r\n    public String getEmergencyContactPhone() { return emergencyContactPhone; }\r\n    public String getRegistrationDate() { return registrationDate; }\r\n    public String getGpSurgeryId() { return gpSurgeryId; }\r\n\r\n    // ============================================================\r\n    // SETTERS\r\n    // ============================================================\r\n    public void setId(String id) { this.id = id; }\r\n    public void setFirstName(String firstName) { this.firstName = firstName; }\r\n    public void setLastName(String lastName) { this.lastName = lastName; }\r\n    public void setDateOfBirth(String dateOfBirth) { this.dateOfBirth = dateOfBirth; }\r\n    public void setNhsNumber(String nhsNumber) { this.nhsNumber = nhsNumber; }\r\n    public void setGender(String gender) { this.gender = gender; }\r\n    public void setPhoneNumber(String phoneNumber) { this.phoneNumber = phoneNumber; }\r\n    public void setEmail(String email) { this.email = email; }\r\n    public void setAddress(String address) { this.address = address; }\r\n    public void setPostcode(String postcode) { this.postcode = postcode; }\r\n    public void setEmergencyContactName(String emergencyContactName) { this.emergencyContactName = emergencyContactName; }\r\n    public void setEmergencyContactPhone(String emergencyContactPhone) { this.emergencyContactPhone = emergencyContactPhone; }\r\n    public void setRegistrationDate(String registrationDate) { this.registrationDate = registrationDate; }\r\n    public void setGpSurgeryId(String gpSurgeryId) { this.gpSurgeryId = gpSurgeryId; }\r\n}\r\n",
      "info": {
        "size": 3978,
        "last_modified": "2025-12-14T02:19:25.0399693",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    },
    {
      "path": "src\\model\\PatientRepository.java",
      "content": "package model;\r\n\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class PatientRepository {\r\n\r\n    private final List<Patient> patients = new ArrayList<>();\r\n    private final String csvPath;\r\n\r\n    public PatientRepository(String csvPath) {\r\n        this.csvPath = csvPath;\r\n        load();\r\n    }\r\n\r\n    public List<String> getAllIds() {\r\n    List<String> ids = new ArrayList<>();\r\n    for (Patient p : patients) ids.add(p.getId());\r\n    return ids;\r\n}\r\n\r\n    // ============================================================\r\n    // LOAD PATIENTS FROM CSV (all 14 fields)\r\n    // ============================================================\r\n    private void load() {\r\n        try {\r\n            for (String[] row : CsvUtils.readCsv(csvPath)) {\r\n\r\n                Patient p = new Patient(\r\n                        row[0],   // patient_id\r\n                        row[1],   // first_name\r\n                        row[2],   // last_name\r\n                        row[3],   // date_of_birth\r\n                        row[4],   // nhs_number\r\n                        row[5],   // gender\r\n                        row[6],   // phone_number\r\n                        row[7],   // email\r\n                        row[8],   // address\r\n                        row[9],   // postcode\r\n                        row[10],  // emergency_contact_name\r\n                        row[11],  // emergency_contact_phone\r\n                        row[12],  // registration_date\r\n                        row[13]   // gp_surgery_id\r\n                );\r\n\r\n                patients.add(p);\r\n            }\r\n\r\n        } catch (IOException ex) {\r\n            System.err.println(\"Failed to load patients: \" + ex.getMessage());\r\n        }\r\n    }\r\n\r\n    // ============================================================\r\n    // AUTO-ID GENERATOR  (P001  P002  P003  )\r\n    // ============================================================\r\n    public String generateNewId() {\r\n\r\n        int max = 0;\r\n\r\n        for (Patient p : patients) {\r\n            try {\r\n                int num = Integer.parseInt(p.getId().substring(1));\r\n                if (num > max) max = num;\r\n            } catch (Exception ignore) {}\r\n        }\r\n\r\n        return String.format(\"P%03d\", max + 1);\r\n    }\r\n\r\n    // ============================================================\r\n    // ADD PATIENT + APPEND TO CSV\r\n    // ============================================================\r\n    public void addAndAppend(Patient p) {\r\n        patients.add(p);\r\n\r\n        try {\r\n            CsvUtils.appendLine(csvPath, new String[]{\r\n                    p.getId(),\r\n                    p.getFirstName(),\r\n                    p.getLastName(),\r\n                    p.getDateOfBirth(),\r\n                    p.getNhsNumber(),\r\n                    p.getGender(),\r\n                    p.getPhoneNumber(),\r\n                    p.getEmail(),\r\n                    p.getAddress(),\r\n                    p.getPostcode(),\r\n                    p.getEmergencyContactName(),\r\n                    p.getEmergencyContactPhone(),\r\n                    p.getRegistrationDate(),\r\n                    p.getGpSurgeryId()\r\n            });\r\n\r\n        } catch (IOException ex) {\r\n            System.err.println(\"Failed to append patient: \" + ex.getMessage());\r\n        }\r\n    }\r\n\r\n    public List<Patient> getAll() {\r\n        return patients;\r\n    }\r\n\r\n    public void remove(Patient p) {\r\n        patients.remove(p);\r\n    }\r\n\r\n    public Patient findById(String id) {\r\n        for (Patient p : patients) {\r\n            if (p.getId().equals(id)) {\r\n                return p;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n}\r\n",
      "info": {
        "size": 3686,
        "last_modified": "2025-12-14T02:19:25.0579862",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    },
    {
      "path": "src\\model\\Person.java",
      "content": "package model;\r\n\r\npublic abstract class Person {\r\n\r\n    protected String id;\r\n    protected String name;\r\n    protected String phone;\r\n    protected String email;\r\n\r\n    public Person() { }\r\n\r\n    public Person(String id, String name, String phone, String email) {\r\n        this.id = id;\r\n        this.name = name;\r\n        this.phone = phone;\r\n        this.email = email;\r\n    }\r\n\r\n    public String getId() { return id; }\r\n    public void setId(String id) { this.id = id; }\r\n\r\n    public String getName() { return name; }\r\n    public void setName(String name) { this.name = name; }\r\n\r\n    public String getPhone() { return phone; }\r\n    public void setPhone(String phone) { this.phone = phone; }\r\n\r\n    public String getEmail() { return email; }\r\n    public void setEmail(String email) { this.email = email; }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return id + \" - \" + name;\r\n    }\r\n}\r\n",
      "info": {
        "size": 907,
        "last_modified": "2025-12-14T02:19:25.075915",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    },
    {
      "path": "src\\model\\Prescription.java",
      "content": "package model;\r\n\r\npublic class Prescription {\r\n\r\n    private String id;               // prescription_id (RX001)\r\n    private String patientId;        // patient_id (P001)\r\n    private String clinicianId;      // clinician_id (C001)\r\n    private String appointmentId;    // appointment_id (A001)\r\n    private String prescriptionDate; // prescription_date (yyyy-MM-dd)\r\n\r\n    private String medication;       // medication_name\r\n    private String dosage;           // dosage (e.g. 20mg)\r\n    private String frequency;        // frequency (e.g. Once daily)\r\n    private String durationDays;     // duration_days (e.g. 28)\r\n    private String quantity;         // quantity (e.g. 28 tablets)\r\n\r\n    private String instructions;     // instructions\r\n    private String pharmacyName;     // pharmacy_name\r\n    private String status;           // status (Issued / Collected / etc.)\r\n    private String issueDate;        // issue_date (yyyy-MM-dd)\r\n    private String collectionDate;   // collection_date (yyyy-MM-dd or \"\")\r\n\r\n    public Prescription() { }\r\n\r\n    public Prescription(String id,\r\n                        String patientId,\r\n                        String clinicianId,\r\n                        String appointmentId,\r\n                        String prescriptionDate,\r\n                        String medication,\r\n                        String dosage,\r\n                        String frequency,\r\n                        String durationDays,\r\n                        String quantity,\r\n                        String instructions,\r\n                        String pharmacyName,\r\n                        String status,\r\n                        String issueDate,\r\n                        String collectionDate) {\r\n\r\n        this.id = id;\r\n        this.patientId = patientId;\r\n        this.clinicianId = clinicianId;\r\n        this.appointmentId = appointmentId;\r\n        this.prescriptionDate = prescriptionDate;\r\n        this.medication = medication;\r\n        this.dosage = dosage;\r\n        this.frequency = frequency;\r\n        this.durationDays = durationDays;\r\n        this.quantity = quantity;\r\n        this.instructions = instructions;\r\n        this.pharmacyName = pharmacyName;\r\n        this.status = status;\r\n        this.issueDate = issueDate;\r\n        this.collectionDate = collectionDate;\r\n    }\r\n\r\n    public String getId()               { return id; }\r\n    public String getPatientId()        { return patientId; }\r\n    public String getClinicianId()      { return clinicianId; }\r\n    public String getAppointmentId()    { return appointmentId; }\r\n    public String getPrescriptionDate() { return prescriptionDate; }\r\n    public String getMedication()       { return medication; }\r\n    public String getDosage()           { return dosage; }\r\n    public String getFrequency()        { return frequency; }\r\n    public String getDurationDays()     { return durationDays; }\r\n    public String getQuantity()         { return quantity; }\r\n    public String getInstructions()     { return instructions; }\r\n    public String getPharmacyName()     { return pharmacyName; }\r\n    public String getStatus()           { return status; }\r\n    public String getIssueDate()        { return issueDate; }\r\n    public String getCollectionDate()   { return collectionDate; }\r\n\r\n    public void setId(String id)                             { this.id = id; }\r\n    public void setPatientId(String patientId)               { this.patientId = patientId; }\r\n    public void setClinicianId(String clinicianId)           { this.clinicianId = clinicianId; }\r\n    public void setAppointmentId(String appointmentId)       { this.appointmentId = appointmentId; }\r\n    public void setPrescriptionDate(String prescriptionDate) { this.prescriptionDate = prescriptionDate; }\r\n    public void setMedication(String medication)             { this.medication = medication; }\r\n    public void setDosage(String dosage)                     { this.dosage = dosage; }\r\n    public void setFrequency(String frequency)               { this.frequency = frequency; }\r\n    public void setDurationDays(String durationDays)         { this.durationDays = durationDays; }\r\n    public void setQuantity(String quantity)                 { this.quantity = quantity; }\r\n    public void setInstructions(String instructions)         { this.instructions = instructions; }\r\n    public void setPharmacyName(String pharmacyName)         { this.pharmacyName = pharmacyName; }\r\n    public void setStatus(String status)                     { this.status = status; }\r\n    public void setIssueDate(String issueDate)               { this.issueDate = issueDate; }\r\n    public void setCollectionDate(String collectionDate)     { this.collectionDate = collectionDate; }\r\n}\r\n",
      "info": {
        "size": 4710,
        "last_modified": "2025-12-14T02:19:25.0857162",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    },
    {
      "path": "src\\model\\PrescriptionRepository.java",
      "content": "package model;\r\n\r\nimport java.io.IOException;\r\nimport java.util.*;\r\n\r\npublic class PrescriptionRepository {\r\n\r\n    private final List<Prescription> prescriptions = new ArrayList<>();\r\n    private final String csvPath;\r\n\r\n    // CSV has EXACTLY 15 columns\r\n    private static final int COLUMN_COUNT = 15;\r\n\r\n    public PrescriptionRepository(String csvPath) {\r\n        this.csvPath = csvPath;\r\n        load();\r\n    }\r\n\r\n    // ============================================================\r\n    // LOAD ALL PRESCRIPTIONS SAFELY\r\n    // ============================================================\r\n    private void load() {\r\n        try {\r\n            for (String[] row : CsvUtils.readCsv(csvPath)) {\r\n\r\n                // Skip header row\r\n                if (row.length == 0 || row[0].equalsIgnoreCase(\"prescription_id\"))\r\n                    continue;\r\n\r\n                // Guarantee 15 columns to prevent ArrayIndexOutOfBounds\r\n                String[] safe = new String[COLUMN_COUNT];\r\n                for (int i = 0; i < COLUMN_COUNT; i++) {\r\n                    safe[i] = (i < row.length) ? row[i] : \"\";\r\n                }\r\n\r\n                Prescription p = new Prescription(\r\n                        safe[0], // prescription_id\r\n                        safe[1], // patient_id\r\n                        safe[2], // clinician_id\r\n                        safe[3], // appointment_id\r\n                        safe[4], // prescription_date\r\n                        safe[5], // medication_name\r\n                        safe[6], // dosage\r\n                        safe[7], // frequency\r\n                        safe[8], // duration_days\r\n                        safe[9], // quantity\r\n                        safe[10],// instructions\r\n                        safe[11],// pharmacy_name\r\n                        safe[12],// status\r\n                        safe[13],// issue_date\r\n                        safe[14] // collection_date\r\n                );\r\n\r\n                prescriptions.add(p);\r\n            }\r\n\r\n        } catch (IOException ex) {\r\n            System.err.println(\"Failed to load prescriptions: \" + ex.getMessage());\r\n        }\r\n    }\r\n\r\n    public List<Prescription> getAll() {\r\n        return prescriptions;\r\n    }\r\n\r\n    // ============================================================\r\n    // AUTO-GENERATE RX IDs\r\n    // ============================================================\r\n    public String generateNewId() {\r\n        int max = 0;\r\n        for (Prescription p : prescriptions) {\r\n            try {\r\n                String id = p.getId();\r\n                if (id != null && id.startsWith(\"RX\")) {\r\n                    int num = Integer.parseInt(id.substring(2));\r\n                    if (num > max) max = num;\r\n                }\r\n            } catch (Exception ignore) {}\r\n        }\r\n        return String.format(\"RX%03d\", max + 1);\r\n    }\r\n\r\n    // ============================================================\r\n    // DROPDOWN OPTIONS\r\n    // ============================================================\r\n    public List<String> getMedicationOptions() {\r\n        Set<String> meds = new TreeSet<>();\r\n        for (Prescription p : prescriptions) {\r\n            if (p.getMedication() != null && !p.getMedication().isBlank())\r\n                meds.add(p.getMedication());\r\n        }\r\n        return new ArrayList<>(meds);\r\n    }\r\n\r\n    public List<String> getPharmacyOptions() {\r\n        Set<String> pharms = new TreeSet<>();\r\n        for (Prescription p : prescriptions) {\r\n            if (p.getPharmacyName() != null && !p.getPharmacyName().isBlank())\r\n                pharms.add(p.getPharmacyName());\r\n        }\r\n        return new ArrayList<>(pharms);\r\n    }\r\n\r\n    // ============================================================\r\n    // ADD + APPEND TO CSV\r\n    // ============================================================\r\n    public void addAndAppend(Prescription p) {\r\n\r\n        prescriptions.add(p);\r\n\r\n        try {\r\n            CsvUtils.appendLine(csvPath, new String[]{\r\n                    p.getId(),\r\n                    p.getPatientId(),\r\n                    p.getClinicianId(),\r\n                    p.getAppointmentId(),\r\n                    p.getPrescriptionDate(),\r\n                    p.getMedication(),\r\n                    p.getDosage(),\r\n                    p.getFrequency(),\r\n                    p.getDurationDays(),\r\n                    p.getQuantity(),\r\n                    p.getInstructions(),\r\n                    p.getPharmacyName(),\r\n                    p.getStatus(),\r\n                    p.getIssueDate(),\r\n                    p.getCollectionDate()\r\n            });\r\n\r\n        } catch (IOException ex) {\r\n            System.err.println(\"Failed to append prescription: \" + ex.getMessage());\r\n        }\r\n    }\r\n\r\n    // ============================================================\r\n    // UPDATE IN-MEMORY ENTRY (no CSV rewrite)\r\n    // ============================================================\r\n    public void update(Prescription p) {\r\n        for (int i = 0; i < prescriptions.size(); i++) {\r\n            if (prescriptions.get(i).getId().equals(p.getId())) {\r\n                prescriptions.set(i, p);\r\n                return;\r\n            }\r\n        }\r\n    }\r\n\r\n    public void removeById(String id) {\r\n        prescriptions.removeIf(p -> p.getId().equals(id));\r\n        // No CSV rewriteacceptable for coursework\r\n    }\r\n}\r\n",
      "info": {
        "size": 5384,
        "last_modified": "2025-12-14T02:19:25.0957687",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    },
    {
      "path": "src\\model\\Referral.java",
      "content": "package model;\r\n\r\npublic class Referral {\r\n\r\n    private String id;                    // referral_id\r\n    private String patientId;             // patient_id\r\n    private String referringClinicianId;  // referring_clinician\r\n    private String referredToClinicianId; // referred_to\r\n    private String referringFacilityId;   // referring_facility\r\n    private String referredToFacilityId;  // referred_to_facility\r\n    private String referralDate;          // referral_date\r\n    private String urgencyLevel;          // urgency_level\r\n    private String referralReason;        // referral_reason\r\n    private String clinicalSummary;       // clinical_summary\r\n    private String requestedService;      // requested_service\r\n    private String status;                // status\r\n    private String appointmentId;         // appointment_id\r\n    private String notes;                 // notes\r\n    private String createdDate;           // created_date\r\n    private String lastUpdated;           // last_updated\r\n\r\n    public Referral() {}\r\n\r\n    public Referral(String id, String patientId, String referringClinicianId,\r\n                    String referredToClinicianId, String referringFacilityId,\r\n                    String referredToFacilityId, String referralDate,\r\n                    String urgencyLevel, String referralReason,\r\n                    String clinicalSummary, String requestedService,\r\n                    String status, String appointmentId, String notes,\r\n                    String createdDate, String lastUpdated) {\r\n\r\n        this.id = id;\r\n        this.patientId = patientId;\r\n        this.referringClinicianId = referringClinicianId;\r\n        this.referredToClinicianId = referredToClinicianId;\r\n        this.referringFacilityId = referringFacilityId;\r\n        this.referredToFacilityId = referredToFacilityId;\r\n        this.referralDate = referralDate;\r\n        this.urgencyLevel = urgencyLevel;\r\n        this.referralReason = referralReason;\r\n        this.clinicalSummary = clinicalSummary;\r\n        this.requestedService = requestedService;\r\n        this.status = status;\r\n        this.appointmentId = appointmentId;\r\n        this.notes = notes;\r\n        this.createdDate = createdDate;\r\n        this.lastUpdated = lastUpdated;\r\n    }\r\n\r\n    // Getters and Setters  \r\n    public String getId() { return id; }\r\n    public void setId(String id) { this.id = id; }\r\n\r\n    public String getPatientId() { return patientId; }\r\n    public void setPatientId(String patientId) { this.patientId = patientId; }\r\n\r\n    public String getReferringClinicianId() { return referringClinicianId; }\r\n    public void setReferringClinicianId(String referringClinicianId) { this.referringClinicianId = referringClinicianId; }\r\n\r\n    public String getReferredToClinicianId() { return referredToClinicianId; }\r\n    public void setReferredToClinicianId(String referredToClinicianId) { this.referredToClinicianId = referredToClinicianId; }\r\n\r\n    public String getReferringFacilityId() { return referringFacilityId; }\r\n    public void setReferringFacilityId(String referringFacilityId) { this.referringFacilityId = referringFacilityId; }\r\n\r\n    public String getReferredToFacilityId() { return referredToFacilityId; }\r\n    public void setReferredToFacilityId(String referredToFacilityId) { this.referredToFacilityId = referredToFacilityId; }\r\n\r\n    public String getReferralDate() { return referralDate; }\r\n    public void setReferralDate(String referralDate) { this.referralDate = referralDate; }\r\n\r\n    public String getUrgencyLevel() { return urgencyLevel; }\r\n    public void setUrgencyLevel(String urgencyLevel) { this.urgencyLevel = urgencyLevel; }\r\n\r\n    public String getReferralReason() { return referralReason; }\r\n    public void setReferralReason(String referralReason) { this.referralReason = referralReason; }\r\n\r\n    public String getClinicalSummary() { return clinicalSummary; }\r\n    public void setClinicalSummary(String clinicalSummary) { this.clinicalSummary = clinicalSummary; }\r\n\r\n    public String getRequestedService() { return requestedService; }\r\n    public void setRequestedService(String requestedService) { this.requestedService = requestedService; }\r\n\r\n    public String getStatus() { return status; }\r\n    public void setStatus(String status) { this.status = status; }\r\n\r\n    public String getAppointmentId() { return appointmentId; }\r\n    public void setAppointmentId(String appointmentId) { this.appointmentId = appointmentId; }\r\n\r\n    public String getNotes() { return notes; }\r\n    public void setNotes(String notes) { this.notes = notes; }\r\n\r\n    public String getCreatedDate() { return createdDate; }\r\n    public void setCreatedDate(String createdDate) { this.createdDate = createdDate; }\r\n\r\n    public String getLastUpdated() { return lastUpdated; }\r\n    public void setLastUpdated(String lastUpdated) { this.lastUpdated = lastUpdated; }\r\n}\r\n",
      "info": {
        "size": 4876,
        "last_modified": "2025-12-14T02:19:25.1016646",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    },
    {
      "path": "src\\model\\ReferralManager.java",
      "content": "package model;\r\n\r\nimport java.io.BufferedWriter;\r\nimport java.io.FileWriter;\r\nimport java.io.IOException;\r\nimport java.util.List;\r\n\r\npublic class ReferralManager {\r\n\r\n    private static ReferralManager instance;\r\n\r\n    private final ReferralRepository referralRepository;\r\n    private final PatientRepository patientRepository;\r\n    private final ClinicianRepository clinicianRepository;\r\n    private final FacilityRepository facilityRepository;\r\n    private final String referralTextPath;\r\n\r\n    private ReferralManager(ReferralRepository rr,\r\n                            PatientRepository pr,\r\n                            ClinicianRepository cr,\r\n                            FacilityRepository fr,\r\n                            String referralTextPath) {\r\n\r\n        this.referralRepository = rr;\r\n        this.patientRepository = pr;\r\n        this.clinicianRepository = cr;\r\n        this.facilityRepository = fr;\r\n        this.referralTextPath = referralTextPath;\r\n    }\r\n\r\n\r\n    // Singleton access\r\n    public static synchronized ReferralManager getInstance(\r\n            ReferralRepository rr,\r\n            PatientRepository pr,\r\n            ClinicianRepository cr,\r\n            FacilityRepository fr,\r\n            String referralTextPath) {\r\n\r\n        if (instance == null) {\r\n            instance = new ReferralManager(rr, pr, cr, fr, referralTextPath);\r\n        }\r\n        return instance;\r\n    }\r\n\r\n\r\n    public void createReferral(Referral r) {\r\n        referralRepository.addAndAppend(r);\r\n        writeReferralText(r);\r\n    }\r\n\r\n    public List<Referral> getAllReferrals() {\r\n        return referralRepository.getAll();\r\n    }\r\n\r\n\r\n    /**\r\n     * Writes a nicely formatted referral text file showing full details.\r\n     * This is what gets you marks under output text file of referral content.\r\n     */\r\n    private void writeReferralText(Referral r) {\r\n\r\n        Patient patient = patientRepository.findById(r.getPatientId());\r\n        Clinician referringClinician = clinicianRepository.findById(r.getReferringClinicianId());\r\n        Clinician referredToClinician = clinicianRepository.findById(r.getReferredToClinicianId());\r\n        Facility referringFacility = facilityRepository.findById(r.getReferringFacilityId());\r\n        Facility referredToFacility = facilityRepository.findById(r.getReferredToFacilityId());\r\n\r\n        try (BufferedWriter bw = new BufferedWriter(new FileWriter(referralTextPath, true))) {\r\n\r\n            bw.write(\"==============================================\");\r\n            bw.newLine();\r\n            bw.write(\"            REFERRAL SUMMARY REPORT           \");\r\n            bw.newLine();\r\n            bw.write(\"==============================================\");\r\n            bw.newLine();\r\n\r\n            bw.write(\"Referral ID: \" + r.getId());\r\n            bw.newLine();\r\n\r\n            // Patient details\r\n            if (patient != null) {\r\n                bw.write(\"Patient: \" + patient.getName() + \" (NHS: \" + patient.getNhsNumber() + \")\");\r\n                bw.newLine();\r\n            }\r\n\r\n           // Referring Clinician\r\nif (referringClinician != null) {\r\n    bw.write(\"Referring Clinician: \" \r\n        + referringClinician.getFullName()\r\n        + \" (\" + referringClinician.getTitle()\r\n        + \" - \" + referringClinician.getSpeciality() + \")\");\r\n    bw.newLine();\r\n}\r\n\r\n// Referred-To Clinician\r\nif (referredToClinician != null) {\r\n    bw.write(\"Referred To: \" \r\n        + referredToClinician.getFullName()\r\n        + \" (\" + referredToClinician.getTitle()\r\n        + \" - \" + referredToClinician.getSpeciality() + \")\");\r\n    bw.newLine();\r\n}\r\n\r\n\r\n            // Facilities\r\n            if (referringFacility != null) {\r\n                bw.write(\"Referring Facility: \" + referringFacility.getName() +\r\n                         \" (\" + referringFacility.getType() + \")\");\r\n                bw.newLine();\r\n            }\r\n\r\n            if (referredToFacility != null) {\r\n                bw.write(\"Referred To Facility: \" + referredToFacility.getName() +\r\n                         \" (\" + referredToFacility.getType() + \")\");\r\n                bw.newLine();\r\n            }\r\n\r\n            // Dates, urgency, reason\r\n            bw.write(\"Referral Date: \" + r.getReferralDate());\r\n            bw.newLine();\r\n\r\n            bw.write(\"Urgency Level: \" + r.getUrgencyLevel());\r\n            bw.newLine();\r\n\r\n            bw.write(\"Reason for Referral: \" + r.getReferralReason());\r\n            bw.newLine();\r\n\r\n            bw.write(\"Requested Service: \" + r.getRequestedService());\r\n            bw.newLine();\r\n\r\n            bw.write(\"Status: \" + r.getStatus());\r\n            bw.newLine();\r\n\r\n            // Clinical Summary\r\n            bw.write(\"Clinical Summary:\");\r\n            bw.newLine();\r\n            bw.write(r.getClinicalSummary());\r\n            bw.newLine();\r\n\r\n            // Notes\r\n            bw.write(\"Notes:\");\r\n            bw.newLine();\r\n            bw.write(r.getNotes());\r\n            bw.newLine();\r\n\r\n            bw.write(\"Created Date: \" + r.getCreatedDate());\r\n            bw.newLine();\r\n\r\n            bw.write(\"Last Updated: \" + r.getLastUpdated());\r\n            bw.newLine();\r\n\r\n            bw.write(\"----------------------------------------------\");\r\n            bw.newLine();\r\n            bw.newLine();\r\n\r\n        } catch (IOException ex) {\r\n            System.err.println(\"Failed to write referral text: \" + ex.getMessage());\r\n        }\r\n    }\r\n}\r\n",
      "info": {
        "size": 5413,
        "last_modified": "2025-12-14T02:19:25.1016646",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    },
    {
      "path": "src\\model\\ReferralRepository.java",
      "content": "package model;\r\n\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class ReferralRepository {\r\n\r\n    private final List<Referral> referrals = new ArrayList<>();\r\n    private final String csvPath;\r\n\r\n    public ReferralRepository(String csvPath) {\r\n        this.csvPath = csvPath;\r\n        load();\r\n    }\r\n\r\n    private void load() {\r\n        try {\r\n            for (String[] row : CsvUtils.readCsv(csvPath)) {\r\n\r\n                // Create Referral object with ALL 16 columns\r\n                Referral r = new Referral(\r\n                        row[0],  // referral_id\r\n                        row[1],  // patient_id\r\n                        row[2],  // referring_clinician\r\n                        row[3],  // referred_to_clinician\r\n                        row[4],  // referring_facility\r\n                        row[5],  // referred_to_facility\r\n                        row[6],  // referral_date\r\n                        row[7],  // urgency_level\r\n                        row[8],  // referral_reason\r\n                        row[9],  // clinical_summary\r\n                        row[10], // requested_service\r\n                        row[11], // status\r\n                        row[12], // appointment_id\r\n                        row[13], // notes\r\n                        row[14], // created_date\r\n                        row[15]  // last_updated\r\n                );\r\n\r\n                referrals.add(r);\r\n            }\r\n\r\n        } catch (IOException ex) {\r\n            System.err.println(\"Failed to load referrals: \" + ex.getMessage());\r\n        }\r\n    }\r\n\r\n\r\n    public List<Referral> getAll() {\r\n        return referrals;\r\n    }\r\n\r\n\r\n    /**\r\n     * Add referral and append to CSV (ALL 16 COLUMNS)\r\n     */\r\n    public void addAndAppend(Referral r) {\r\n        referrals.add(r);\r\n\r\n        try {\r\n            CsvUtils.appendLine(csvPath, new String[] {\r\n                    r.getId(),\r\n                    r.getPatientId(),\r\n                    r.getReferringClinicianId(),\r\n                    r.getReferredToClinicianId(),\r\n                    r.getReferringFacilityId(),\r\n                    r.getReferredToFacilityId(),\r\n                    r.getReferralDate(),\r\n                    r.getUrgencyLevel(),\r\n                    r.getReferralReason(),\r\n                    r.getClinicalSummary(),\r\n                    r.getRequestedService(),\r\n                    r.getStatus(),\r\n                    r.getAppointmentId(),\r\n                    r.getNotes(),\r\n                    r.getCreatedDate(),\r\n                    r.getLastUpdated()\r\n            });\r\n\r\n        } catch (IOException ex) {\r\n            System.err.println(\"Failed to append referral: \" + ex.getMessage());\r\n        }\r\n    }\r\n}\r\n",
      "info": {
        "size": 2743,
        "last_modified": "2025-12-14T02:19:25.1173757",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    },
    {
      "path": "src\\model\\Staff.java",
      "content": "package model;\r\n\r\npublic class Staff extends Person {\r\n\r\n    private String position;   // receptionist, admin, etc.\r\n    private String facilityId;\r\n\r\n    public Staff() { }\r\n\r\n    public Staff(String id, String name, String phone, String email,\r\n                 String position, String facilityId) {\r\n        super(id, name, phone, email);\r\n        this.position = position;\r\n        this.facilityId = facilityId;\r\n    }\r\n\r\n    public String getPosition() { return position; }\r\n    public void setPosition(String position) { this.position = position; }\r\n\r\n    public String getFacilityId() { return facilityId; }\r\n    public void setFacilityId(String facilityId) { this.facilityId = facilityId; }\r\n}\r\n",
      "info": {
        "size": 704,
        "last_modified": "2025-12-14T02:19:25.1258161",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    },
    {
      "path": "src\\model\\StaffRepository.java",
      "content": "package model;\r\n\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class StaffRepository {\r\n\r\n    private final List<Staff> staff = new ArrayList<>();\r\n    private final String csvPath;\r\n\r\n    public StaffRepository(String csvPath) {\r\n        this.csvPath = csvPath;\r\n        load();\r\n    }\r\n\r\n    private void load() {\r\n        try {\r\n            for (String[] row : CsvUtils.readCsv(csvPath)) {\r\n                String id = row[0];\r\n                String name = row[1];\r\n                String phone = row[2];\r\n                String email = row[3];\r\n                String position = row[4];\r\n                String facilityId = row[5];\r\n\r\n                staff.add(new Staff(id, name, phone, email,\r\n                        position, facilityId));\r\n            }\r\n        } catch (IOException ex) {\r\n            System.err.println(\"Failed to load staff: \" + ex.getMessage());\r\n        }\r\n    }\r\n\r\n    public List<Staff> getAll() { return staff; }\r\n}\r\n",
      "info": {
        "size": 998,
        "last_modified": "2025-12-14T02:19:25.1318395",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    },
    {
      "path": "src\\view\\AppointmentView.java",
      "content": "package view;\r\n\r\nimport controller.AppointmentController;\r\nimport model.Appointment;\r\n\r\nimport javax.swing.*;\r\nimport javax.swing.table.DefaultTableModel;\r\nimport java.awt.*;\r\nimport java.time.LocalDate;\r\nimport java.time.format.DateTimeFormatter;\r\nimport java.util.List;\r\n\r\npublic class AppointmentView extends JPanel {\r\n\r\n    private AppointmentController controller;\r\n\r\n    private JTable table;\r\n    private DefaultTableModel model;\r\n\r\n    // Form components\r\n    private JTextField txtId, txtDate, txtTime, txtDuration, txtType;\r\n    private JTextField txtReason, txtCreatedDate, txtLastModified;\r\n\r\n    private JComboBox<String> cbStatus;          //  STATUS DROPDOWN\r\n    private JComboBox<String> cbPatientId;\r\n    private JComboBox<String> cbClinicianId;\r\n    private JComboBox<String> cbFacilityId;\r\n\r\n    private JTextArea txtNotes;\r\n\r\n    private final DateTimeFormatter fmt = DateTimeFormatter.ofPattern(\"dd/MM/yyyy\");\r\n\r\n    public AppointmentView() {\r\n        setLayout(new BorderLayout(10, 10));\r\n\r\n        // ============================================================\r\n        // TABLE\r\n        // ============================================================\r\n        model = new DefaultTableModel(\r\n                new Object[]{\r\n                        \"ID\", \"Patient\", \"Clinician\", \"Facility\",\r\n                        \"Date\", \"Time\", \"Duration (min)\", \"Type\",\r\n                        \"Status\", \"Reason\", \"Notes\", \"Created\", \"Last Modified\"\r\n                }, 0\r\n        );\r\n\r\n        table = new JTable(model);\r\n        table.setRowHeight(22);\r\n        add(new JScrollPane(table), BorderLayout.SOUTH);\r\n\r\n\r\n        // ============================================================\r\n        // FORM\r\n        // ============================================================\r\n        JPanel form = new JPanel(new GridBagLayout());\r\n        form.setBorder(BorderFactory.createEmptyBorder(15, 15, 15, 15));\r\n        GridBagConstraints gc = new GridBagConstraints();\r\n        gc.insets = new Insets(6, 6, 6, 6);\r\n        gc.fill = GridBagConstraints.HORIZONTAL;\r\n\r\n        txtId = new JTextField(); \r\n        txtId.setEditable(false);\r\n\r\n        cbPatientId = new JComboBox<>();\r\n        cbClinicianId = new JComboBox<>();\r\n        cbFacilityId = new JComboBox<>();\r\n\r\n        txtDate = new JTextField();\r\n        txtTime = new JTextField();\r\n        txtDuration = new JTextField();\r\n        txtType = new JTextField();\r\n        txtReason = new JTextField();\r\n\r\n        //  STATUS DROPDOWN ADDED\r\n        cbStatus = new JComboBox<>(new String[]{\r\n                \"SCHEDULED\",\r\n                \"RESCHEDULED\",\r\n                \"CANCELLED\",\r\n                \"COMPLETED\",\r\n                \"NO-SHOW\"\r\n        });\r\n        cbStatus.setFont(new Font(\"SansSerif\", Font.PLAIN, 12));\r\n\r\n        txtNotes = new JTextArea(3, 15);\r\n        txtNotes.setLineWrap(true);\r\n        txtNotes.setWrapStyleWord(true);\r\n\r\n        txtCreatedDate = new JTextField();\r\n        txtLastModified = new JTextField();\r\n\r\n        int row = 0;\r\n        addFieldPair(form, gc, row++, \"Appointment ID:\", txtId, \"Patient ID:\", cbPatientId);\r\n        addFieldPair(form, gc, row++, \"Clinician ID:\", cbClinicianId, \"Facility ID:\", cbFacilityId);\r\n        addFieldPair(form, gc, row++, \"Appointment Date:\", txtDate, \"Time (HH:mm):\", txtTime);\r\n        addFieldPair(form, gc, row++, \"Duration (min):\", txtDuration, \"Appointment Type:\", txtType);\r\n\r\n        //  Status dropdown included here\r\n        addFieldPair(form, gc, row++, \"Status:\", cbStatus, \"Reason for Visit:\", txtReason);\r\n\r\n        addFieldPair(form, gc, row++, \"Created Date:\", txtCreatedDate, \"Last Modified:\", txtLastModified);\r\n\r\n        // Notes row\r\n        gc.gridx = 0; gc.gridy = row; gc.gridwidth = 1;\r\n        form.add(new JLabel(\"Notes:\"), gc);\r\n\r\n        gc.gridx = 1; gc.gridy = row; gc.gridwidth = 3;\r\n        form.add(new JScrollPane(txtNotes), gc);\r\n\r\n        add(form, BorderLayout.CENTER);\r\n\r\n\r\n        // ============================================================\r\n        // BUTTONS\r\n        // ============================================================\r\n        JButton btnAdd = new JButton(\"Add Appointment\");\r\n        JButton btnDelete = new JButton(\"Delete Selected\");\r\n\r\n        btnAdd.addActionListener(e -> addAppointment());\r\n        btnDelete.addActionListener(e -> deleteAppointment());\r\n\r\n        JPanel buttons = new JPanel(new FlowLayout(FlowLayout.CENTER, 20, 10));\r\n        buttons.add(btnAdd);\r\n        buttons.add(btnDelete);\r\n\r\n        add(buttons, BorderLayout.NORTH);\r\n    }\r\n\r\n\r\n    // Helper method for form layout\r\n    private void addFieldPair(JPanel panel, GridBagConstraints gc, int row,\r\n                              String l1, JComponent f1,\r\n                              String l2, JComponent f2) {\r\n\r\n        gc.gridwidth = 1;\r\n\r\n        gc.gridx = 0; gc.gridy = row;\r\n        panel.add(new JLabel(l1), gc);\r\n\r\n        gc.gridx = 1;\r\n        panel.add(f1, gc);\r\n\r\n        gc.gridx = 2;\r\n        panel.add(new JLabel(l2), gc);\r\n\r\n        gc.gridx = 3;\r\n        panel.add(f2, gc);\r\n    }\r\n\r\n\r\n    // ============================================================\r\n    // Dropdown loading\r\n    // ============================================================\r\n    public void loadDropdowns(List<String> patients, List<String> clinicians, List<String> facilities) {\r\n        cbPatientId.removeAllItems();\r\n        cbClinicianId.removeAllItems();\r\n        cbFacilityId.removeAllItems();\r\n\r\n        for (String s : patients) cbPatientId.addItem(s);\r\n        for (String s : clinicians) cbClinicianId.addItem(s);\r\n        for (String s : facilities) cbFacilityId.addItem(s);\r\n\r\n        txtId.setText(controller.generateId());\r\n        txtCreatedDate.setText(LocalDate.now().format(fmt));\r\n        txtLastModified.setText(LocalDate.now().format(fmt));\r\n    }\r\n\r\n\r\n    // ============================================================\r\n    // TABLE VIEW UPDATE\r\n    // ============================================================\r\n    public void showAppointments(List<Appointment> list) {\r\n        model.setRowCount(0);\r\n\r\n        for (Appointment a : list) {\r\n            model.addRow(new Object[]{\r\n                    a.getId(),\r\n                    a.getPatientId(),\r\n                    a.getClinicianId(),\r\n                    a.getFacilityId(),\r\n                    a.getAppointmentDate(),\r\n                    a.getAppointmentTime(),\r\n                    a.getDurationMinutes(),\r\n                    a.getAppointmentType(),\r\n                    a.getStatus(),\r\n                    a.getReasonForVisit(),\r\n                    a.getNotes(),\r\n                    a.getCreatedDate(),\r\n                    a.getLastModified()\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n    // ============================================================\r\n    // ADD APPOINTMENT\r\n    // ============================================================\r\n    private void addAppointment() {\r\n\r\n        Appointment a = new Appointment(\r\n                txtId.getText(),\r\n                (String) cbPatientId.getSelectedItem(),\r\n                (String) cbClinicianId.getSelectedItem(),\r\n                (String) cbFacilityId.getSelectedItem(),\r\n                txtDate.getText(),\r\n                txtTime.getText(),\r\n                txtDuration.getText(),\r\n                txtType.getText(),\r\n                (String) cbStatus.getSelectedItem(),   //  STATUS DROPDOWN USED\r\n                txtReason.getText(),\r\n                txtNotes.getText(),\r\n                txtCreatedDate.getText(),\r\n                txtLastModified.getText()\r\n        );\r\n\r\n        controller.addAppointment(a);\r\n\r\n        // Regenerate ID & timestamps\r\n        txtId.setText(controller.generateId());\r\n        txtLastModified.setText(LocalDate.now().format(fmt));\r\n    }\r\n\r\n\r\n    // ============================================================\r\n    // DELETE\r\n    // ============================================================\r\n    private void deleteAppointment() {\r\n        int row = table.getSelectedRow();\r\n        if (row < 0) {\r\n            JOptionPane.showMessageDialog(this, \"Select an appointment to delete.\");\r\n            return;\r\n        }\r\n\r\n        String id = model.getValueAt(row, 0).toString();\r\n        controller.deleteById(id);\r\n    }\r\n\r\n    public void setController(AppointmentController controller) {\r\n        this.controller = controller;\r\n    }\r\n}\r\n",
      "info": {
        "size": 8425,
        "last_modified": "2025-12-14T02:19:25.133347",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    },
    {
      "path": "src\\view\\ClinicianView.java",
      "content": "package view;\r\n\r\nimport controller.ClinicianController;\r\nimport model.Clinician;\r\n\r\nimport javax.swing.*;\r\nimport javax.swing.table.DefaultTableModel;\r\nimport java.awt.*;\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.Calendar;\r\nimport java.util.Date;\r\nimport java.util.List;\r\n\r\npublic class ClinicianView extends JPanel {\r\n\r\n    private ClinicianController controller;\r\n\r\n    private JTable table;\r\n    private DefaultTableModel model;\r\n\r\n    private JLabel lblId;\r\n    private JTextField txtFirstName, txtLastName, txtSpeciality, txtGmc, txtPhone, txtEmail, txtWorkplaceId;\r\n    private JComboBox<String> cmbTitle, cmbWorkplaceType, cmbEmployment;\r\n    private JSpinner dateSpinner;\r\n\r\n    public ClinicianView() {\r\n\r\n        setLayout(new BorderLayout(15, 15));\r\n        setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));\r\n\r\n        // ============================================================\r\n        // TABLE\r\n        // ============================================================\r\n        model = new DefaultTableModel(\r\n                new Object[]{\r\n                        \"ID\",\"Title\",\"First\",\"Last\",\"Speciality\",\"GMC\",\r\n                        \"Phone\",\"Email\",\"Workplace ID\",\"Workplace Type\",\r\n                        \"Employment\",\"Start Date\"\r\n                }, 0\r\n        );\r\n\r\n        table = new JTable(model);\r\n        table.setRowHeight(22);\r\n        add(new JScrollPane(table), BorderLayout.SOUTH);\r\n\r\n        // ============================================================\r\n        // FORM PANEL (4 COLUMNS)\r\n        // ============================================================\r\n        JPanel form = new JPanel(new GridBagLayout());\r\n        GridBagConstraints gc = new GridBagConstraints();\r\n        gc.insets = new Insets(10, 15, 10, 15);\r\n        gc.fill = GridBagConstraints.HORIZONTAL;\r\n\r\n        lblId = new JLabel(\"C001\");\r\n\r\n        txtFirstName = new JTextField();\r\n        txtLastName = new JTextField();\r\n        txtSpeciality = new JTextField();\r\n        txtGmc = new JTextField();\r\n        txtPhone = new JTextField();\r\n        txtEmail = new JTextField();\r\n        txtWorkplaceId = new JTextField();\r\n\r\n        cmbTitle = new JComboBox<>(new String[]{\"GP\",\"Consultant\",\"Nurse\",\"Specialist\"});\r\n        cmbWorkplaceType = new JComboBox<>(new String[]{\"GP Surgery\",\"Hospital\",\"Clinic\"});\r\n        cmbEmployment = new JComboBox<>(new String[]{\"Full-time\",\"Part-time\",\"Locum\"});\r\n\r\n        dateSpinner = new JSpinner(new SpinnerDateModel(new Date(), null, null, Calendar.DAY_OF_MONTH));\r\n        dateSpinner.setEditor(new JSpinner.DateEditor(dateSpinner, \"dd/MM/yyyy\"));\r\n\r\n        int row = 0;\r\n\r\n        // ============================  4 COLUMNS  ============================\r\n        add4(form, gc, row++, \"Clinician ID:\", lblId,    \"Title:\", cmbTitle);\r\n        add4(form, gc, row++, \"First Name:\", txtFirstName, \"Last Name:\", txtLastName);\r\n        add4(form, gc, row++, \"Speciality:\", txtSpeciality, \"GMC Number:\", txtGmc);\r\n        add4(form, gc, row++, \"Phone:\", txtPhone, \"Email:\", txtEmail);\r\n        add4(form, gc, row++, \"Workplace ID:\", txtWorkplaceId, \"Workplace Type:\", cmbWorkplaceType);\r\n        add4(form, gc, row++, \"Employment:\", cmbEmployment, \"Start Date:\", dateSpinner);\r\n\r\n        add(form, BorderLayout.CENTER);\r\n\r\n        // ============================================================\r\n        // BUTTON PANEL\r\n        // ============================================================\r\n        JButton btnAdd = new JButton(\"Add Clinician\");\r\n        JButton btnDelete = new JButton(\"Delete Selected\");\r\n\r\n        btnAdd.addActionListener(e -> onAdd());\r\n        btnDelete.addActionListener(e -> onDelete());\r\n\r\n        JPanel buttons = new JPanel(new FlowLayout(FlowLayout.CENTER, 30, 10));\r\n        buttons.add(btnAdd);\r\n        buttons.add(btnDelete);\r\n\r\n        add(buttons, BorderLayout.NORTH);\r\n    }\r\n\r\n    // Helper for 4-column rows\r\n    private void add4(JPanel panel, GridBagConstraints gc, int row,\r\n                      String label1, JComponent field1,\r\n                      String label2, JComponent field2) {\r\n\r\n        gc.gridy = row;\r\n\r\n        // Left label\r\n        gc.gridx = 0;\r\n        gc.weightx = 0.15;\r\n        panel.add(new JLabel(label1), gc);\r\n\r\n        // Left field\r\n        gc.gridx = 1;\r\n        gc.weightx = 0.35;\r\n        panel.add(field1, gc);\r\n\r\n        // Right label\r\n        gc.gridx = 2;\r\n        gc.weightx = 0.15;\r\n        panel.add(new JLabel(label2), gc);\r\n\r\n        // Right field\r\n        gc.gridx = 3;\r\n        gc.weightx = 0.35;\r\n        panel.add(field2, gc);\r\n    }\r\n\r\n    // ============================================================\r\n    // CONTROLLER LINK\r\n    // ============================================================\r\n    public void setController(ClinicianController controller) {\r\n        this.controller = controller;\r\n    }\r\n\r\n    // ============================================================\r\n    // DISPLAY DATA\r\n    // ============================================================\r\n    public void showClinicians(List<Clinician> list) {\r\n        model.setRowCount(0);\r\n\r\n        for (Clinician c : list) {\r\n            model.addRow(new Object[]{\r\n                    c.getId(), c.getTitle(), c.getFirstName(), c.getLastName(),\r\n                    c.getSpeciality(), c.getGmcNumber(), c.getPhone(), c.getEmail(),\r\n                    c.getWorkplaceId(), c.getWorkplaceType(),\r\n                    c.getEmploymentStatus(), c.getStartDate()\r\n            });\r\n        }\r\n\r\n        if (controller != null)\r\n            lblId.setText(controller.generateId());\r\n    }\r\n\r\n    // ============================================================\r\n    // ADD NEW CLINICIAN\r\n    // ============================================================\r\n    private void onAdd() {\r\n\r\n        if (controller == null) return;\r\n\r\n        SimpleDateFormat sdf = new SimpleDateFormat(\"dd/MM/yyyy\");\r\n\r\n        Clinician c = new Clinician(\r\n                lblId.getText(),\r\n                (String) cmbTitle.getSelectedItem(),\r\n                txtFirstName.getText(),\r\n                txtLastName.getText(),\r\n                txtSpeciality.getText(),\r\n                txtGmc.getText(),\r\n                txtPhone.getText(),\r\n                txtEmail.getText(),\r\n                txtWorkplaceId.getText(),\r\n                (String) cmbWorkplaceType.getSelectedItem(),\r\n                (String) cmbEmployment.getSelectedItem(),\r\n                sdf.format(dateSpinner.getValue())\r\n        );\r\n\r\n        controller.addClinician(c);\r\n    }\r\n\r\n    // ============================================================\r\n    // DELETE CLINICIAN\r\n    // ============================================================\r\n    private void onDelete() {\r\n        if (controller == null) return;\r\n\r\n        int row = table.getSelectedRow();\r\n        if (row < 0) {\r\n            JOptionPane.showMessageDialog(this,\r\n                    \"Select a clinician to delete!\",\r\n                    \"Warning\", JOptionPane.WARNING_MESSAGE);\r\n            return;\r\n        }\r\n\r\n        String id = (String) model.getValueAt(row, 0);\r\n        controller.deleteById(id);\r\n    }\r\n}\r\n",
      "info": {
        "size": 7165,
        "last_modified": "2025-12-14T02:19:25.1490187",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    },
    {
      "path": "src\\view\\MainFrame.java",
      "content": "package view;\r\n\r\nimport controller.*;\r\nimport javax.swing.*;\r\n\r\npublic class MainFrame extends JFrame {\r\n\r\n    public MainFrame(\r\n            PatientController pc,\r\n            ClinicianController cc,\r\n            AppointmentController ac,\r\n            PrescriptionController prc,\r\n            ReferralController rc) {\r\n\r\n        super(\"Healthcare Management System (HMS)\");\r\n\r\n        JTabbedPane tabs = new JTabbedPane();\r\n        tabs.addTab(\"Patients\", pc.getView());\r\n        tabs.addTab(\"Clinicians\", cc.getView());\r\n        tabs.addTab(\"Appointments\", ac.getView());\r\n        tabs.addTab(\"Prescriptions\", prc.getView());\r\n        tabs.addTab(\"Referrals\", rc.getView());\r\n\r\n        setContentPane(tabs);\r\n        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        pack();\r\n        setLocationRelativeTo(null);\r\n    }\r\n}\r\n",
      "info": {
        "size": 833,
        "last_modified": "2025-12-14T02:19:25.1490187",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    },
    {
      "path": "src\\view\\PatientView.java",
      "content": "package view;\r\n\r\nimport controller.PatientController;\r\nimport model.Patient;\r\n\r\nimport javax.swing.*;\r\nimport javax.swing.table.DefaultTableModel;\r\nimport java.awt.*;\r\nimport java.util.List;\r\n\r\npublic class PatientView extends JPanel {\r\n\r\n    private PatientController controller;\r\n\r\n    private JTable table;\r\n    private DefaultTableModel tableModel;\r\n\r\n    // 14 CSV-matching fields\r\n    private JLabel lblAutoId;\r\n    private JTextField txtFirstName, txtLastName, txtDob, txtNhs, txtGender;\r\n    private JTextField txtPhone, txtEmail;\r\n    private JTextField txtAddress, txtPostcode;\r\n    private JTextField txtEmergencyName, txtEmergencyPhone;\r\n    private JTextField txtRegistrationDate, txtGpSurgery;\r\n\r\n    public PatientView() {\r\n\r\n        setLayout(new BorderLayout(15, 15));\r\n        setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));\r\n\r\n        // ============================================================\r\n        // TABLE (BOTTOM)\r\n        // ============================================================\r\n        tableModel = new DefaultTableModel(\r\n                new Object[]{\r\n                        \"ID\", \"First Name\", \"Last Name\", \"DOB\", \"NHS\",\r\n                        \"Gender\", \"Phone\", \"Email\", \"Address\", \"Postcode\",\r\n                        \"Emergency Name\", \"Emergency Phone\",\r\n                        \"Registration Date\", \"GP Surgery ID\"\r\n                }, 0\r\n        );\r\n\r\n        table = new JTable(tableModel);\r\n        table.setRowHeight(22);\r\n\r\n        add(new JScrollPane(table), BorderLayout.SOUTH);\r\n\r\n        // ============================================================\r\n        // FORM (CENTER)  4 columns using GridBagLayout\r\n        // ============================================================\r\n        JPanel form = new JPanel(new GridBagLayout());\r\n        GridBagConstraints gc = new GridBagConstraints();\r\n        gc.insets = new Insets(10, 15, 10, 15);\r\n        gc.fill = GridBagConstraints.HORIZONTAL;\r\n\r\n        // Create fields\r\n        lblAutoId = new JLabel(\"P001\");\r\n\r\n        txtFirstName = new JTextField();\r\n        txtLastName = new JTextField();\r\n        txtDob = new JTextField();\r\n        txtNhs = new JTextField();\r\n        txtGender = new JTextField();\r\n        txtPhone = new JTextField();\r\n        txtEmail = new JTextField();\r\n        txtAddress = new JTextField();\r\n        txtPostcode = new JTextField();\r\n        txtEmergencyName = new JTextField();\r\n        txtEmergencyPhone = new JTextField();\r\n        txtRegistrationDate = new JTextField();\r\n        txtGpSurgery = new JTextField();\r\n\r\n        // Row counter\r\n        int row = 0;\r\n\r\n        // ============================================================\r\n        // ADD FORM ROWS (4 columns each)\r\n        // ============================================================\r\n        add4(form, gc, row++, \"Patient ID:\", lblAutoId, \"First Name:\", txtFirstName);\r\n        add4(form, gc, row++, \"Last Name:\", txtLastName, \"DOB (YYYY-MM-DD):\", txtDob);\r\n        add4(form, gc, row++, \"NHS Number:\", txtNhs, \"Gender (M/F):\", txtGender);\r\n        add4(form, gc, row++, \"Phone Number:\", txtPhone, \"Email:\", txtEmail);\r\n        add4(form, gc, row++, \"Address:\", txtAddress, \"Postcode:\", txtPostcode);\r\n        add4(form, gc, row++, \"Emergency Name:\", txtEmergencyName,\r\n                \"Emergency Phone:\", txtEmergencyPhone);\r\n        add4(form, gc, row++, \"Registration Date:\", txtRegistrationDate,\r\n                \"GP Surgery ID:\", txtGpSurgery);\r\n\r\n        add(form, BorderLayout.CENTER);\r\n\r\n        // ============================================================\r\n        // BUTTONS (TOP)\r\n        // ============================================================\r\n        JButton btnAdd = new JButton(\"Add Patient\");\r\n        JButton btnDelete = new JButton(\"Delete Selected\");\r\n\r\n        btnAdd.addActionListener(e -> onAdd());\r\n        btnDelete.addActionListener(e -> onDelete());\r\n\r\n        JPanel buttons = new JPanel(new FlowLayout(FlowLayout.CENTER, 30, 10));\r\n        buttons.add(btnAdd);\r\n        buttons.add(btnDelete);\r\n\r\n        add(buttons, BorderLayout.NORTH);\r\n    }\r\n\r\n    // =================================================================\r\n    // Helper  Adds one ROW with 4 columns\r\n    // =================================================================\r\n    private void add4(JPanel panel, GridBagConstraints gc, int row,\r\n                      String label1, JComponent field1,\r\n                      String label2, JComponent field2) {\r\n\r\n        gc.gridy = row;\r\n\r\n        // Left label\r\n        gc.gridx = 0; gc.weightx = 0.15;\r\n        panel.add(new JLabel(label1), gc);\r\n\r\n        // Left field\r\n        gc.gridx = 1; gc.weightx = 0.35;\r\n        panel.add(field1, gc);\r\n\r\n        // Right label\r\n        gc.gridx = 2; gc.weightx = 0.15;\r\n        panel.add(new JLabel(label2), gc);\r\n\r\n        // Right field\r\n        gc.gridx = 3; gc.weightx = 0.35;\r\n        panel.add(field2, gc);\r\n    }\r\n\r\n    // ============================================================\r\n    // CONTROLLER LINK\r\n    // ============================================================\r\n    public void setController(PatientController controller) {\r\n        this.controller = controller;\r\n    }\r\n\r\n    // ============================================================\r\n    // SHOW PATIENTS\r\n    // ============================================================\r\n    public void showPatients(List<Patient> list) {\r\n        tableModel.setRowCount(0);\r\n\r\n        updateAutoId(list);\r\n\r\n        for (Patient p : list) {\r\n            tableModel.addRow(new Object[]{\r\n                    p.getId(), p.getFirstName(), p.getLastName(),\r\n                    p.getDateOfBirth(), p.getNhsNumber(), p.getGender(),\r\n                    p.getPhoneNumber(), p.getEmail(), p.getAddress(),\r\n                    p.getPostcode(), p.getEmergencyContactName(),\r\n                    p.getEmergencyContactPhone(), p.getRegistrationDate(),\r\n                    p.getGpSurgeryId()\r\n            });\r\n        }\r\n    }\r\n\r\n    // ============================================================\r\n    // AUTO-ID P001  P002\r\n    // ============================================================\r\n    private void updateAutoId(List<Patient> list) {\r\n        if (list.isEmpty()) {\r\n            lblAutoId.setText(\"P001\");\r\n            return;\r\n        }\r\n\r\n        String lastId = list.get(list.size() - 1).getId();\r\n        int num = Integer.parseInt(lastId.substring(1)) + 1;\r\n        lblAutoId.setText(String.format(\"P%03d\", num));\r\n    }\r\n\r\n    // ============================================================\r\n    // ADD PATIENT\r\n    // ============================================================\r\n    private void onAdd() {\r\n        if (controller == null) return;\r\n\r\n        Patient p = new Patient(\r\n                lblAutoId.getText(),\r\n                txtFirstName.getText(),\r\n                txtLastName.getText(),\r\n                txtDob.getText(),\r\n                txtNhs.getText(),\r\n                txtGender.getText(),\r\n                txtPhone.getText(),\r\n                txtEmail.getText(),\r\n                txtAddress.getText(),\r\n                txtPostcode.getText(),\r\n                txtEmergencyName.getText(),\r\n                txtEmergencyPhone.getText(),\r\n                txtRegistrationDate.getText(),\r\n                txtGpSurgery.getText()\r\n        );\r\n\r\n        controller.addPatient(p);\r\n    }\r\n\r\n    // ============================================================\r\n    // DELETE PATIENT\r\n    // ============================================================\r\n    private void onDelete() {\r\n        if (controller == null) return;\r\n\r\n        int row = table.getSelectedRow();\r\n\r\n        if (row < 0) {\r\n            JOptionPane.showMessageDialog(this, \"Select a patient first!\");\r\n            return;\r\n        }\r\n\r\n        String id = tableModel.getValueAt(row, 0).toString();\r\n        Patient p = controller.findById(id);\r\n\r\n        if (p != null) controller.deletePatient(p);\r\n    }\r\n}\r\n",
      "info": {
        "size": 8008,
        "last_modified": "2025-12-14T02:19:25.1648279",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    },
    {
      "path": "src\\view\\PrescriptionView.java",
      "content": "package view;\r\n\r\nimport controller.PrescriptionController;\r\nimport model.Prescription;\r\n\r\nimport javax.swing.*;\r\nimport javax.swing.table.DefaultTableModel;\r\nimport java.awt.*;\r\nimport java.text.ParseException;\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.List;\r\n\r\npublic class PrescriptionView extends JPanel {\r\n\r\n    private PrescriptionController controller;\r\n\r\n    private JTable table;\r\n    private DefaultTableModel model;\r\n\r\n    private JLabel lblId;\r\n\r\n    private JComboBox<String> cbPatientId;\r\n    private JComboBox<String> cbClinicianId;\r\n    private JComboBox<String> cbDrug;\r\n    private JComboBox<String> cbPharmacy;\r\n    private JComboBox<String> cbStatus;         //  STATUS DROPDOWN\r\n    private JComboBox<String> cbAppointmentId;  //  APPOINTMENT DROPDOWN\r\n\r\n    private JTextField txtPrescDate;\r\n    private JTextField txtDosage;\r\n    private JTextField txtFrequency;\r\n    private JTextField txtDuration;\r\n    private JTextField txtQuantity;\r\n    private JTextField txtIssueDate;\r\n    private JTextField txtCollectionDate;\r\n\r\n    private JTextArea txtInstructions;\r\n\r\n    private static final String DATE_PATTERN = \"yyyy-MM-dd\";\r\n    private final SimpleDateFormat sdf = new SimpleDateFormat(DATE_PATTERN);\r\n\r\n    public PrescriptionView() {\r\n\r\n        setLayout(new BorderLayout(15, 15));\r\n        setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));\r\n\r\n        // ============================================================\r\n        // TABLE\r\n        // ============================================================\r\n        model = new DefaultTableModel(\r\n                new Object[]{\r\n                        \"ID\", \"Patient\", \"Clinician\", \"Appt\",\r\n                        \"Presc Date\", \"Drug\", \"Dosage\", \"Freq\",\r\n                        \"Duration\", \"Qty\", \"Instructions\",\r\n                        \"Pharmacy\", \"Status\", \"Issue\", \"Collected\"\r\n                }, 0\r\n        );\r\n        table = new JTable(model);\r\n        table.setRowHeight(22);\r\n        add(new JScrollPane(table), BorderLayout.SOUTH);\r\n\r\n        // ============================================================\r\n        // FORM\r\n        // ============================================================\r\n        JPanel form = new JPanel(new GridBagLayout());\r\n        GridBagConstraints gc = new GridBagConstraints();\r\n        gc.insets = new Insets(6, 8, 6, 8);\r\n        gc.fill = GridBagConstraints.HORIZONTAL;\r\n        gc.weightx = 0.5;\r\n\r\n        lblId = new JLabel(\"RX001\");\r\n\r\n        cbPatientId    = new JComboBox<>();\r\n        cbClinicianId  = new JComboBox<>();\r\n        cbDrug         = new JComboBox<>();\r\n        cbPharmacy     = new JComboBox<>();\r\n        cbAppointmentId = new JComboBox<>();\r\n\r\n        cbStatus = new JComboBox<>(new String[]{\r\n                \"PENDING\",\r\n                \"ISSUED\",\r\n                \"COLLECTED\",\r\n                \"CANCELLED\",\r\n                \"REJECTED\"\r\n        });\r\n        cbStatus.setFont(new Font(\"SansSerif\", Font.PLAIN, 12));\r\n\r\n        txtPrescDate      = new JTextField();\r\n        txtDosage         = new JTextField();\r\n        txtFrequency      = new JTextField();\r\n        txtDuration       = new JTextField();\r\n        txtQuantity       = new JTextField();\r\n        txtIssueDate      = new JTextField();\r\n        txtCollectionDate = new JTextField();\r\n\r\n        txtInstructions = new JTextArea(3, 20);\r\n        txtInstructions.setLineWrap(true);\r\n        txtInstructions.setWrapStyleWord(true);\r\n\r\n        int row = 0;\r\n        addPair(form, gc, row++, \"Prescription ID:\", lblId,\r\n                \"Patient ID:\", cbPatientId);\r\n\r\n        addPair(form, gc, row++, \"Clinician ID:\", cbClinicianId,\r\n                \"Appointment ID:\", cbAppointmentId);\r\n\r\n        addPair(form, gc, row++, \"Prescription Date (yyyy-MM-dd):\", txtPrescDate,\r\n                \"Drug:\", cbDrug);\r\n\r\n        addPair(form, gc, row++, \"Dosage:\", txtDosage,\r\n                \"Frequency:\", txtFrequency);\r\n\r\n        addPair(form, gc, row++, \"Duration (days):\", txtDuration,\r\n                \"Quantity:\", txtQuantity);\r\n\r\n        addPair(form, gc, row++, \"Pharmacy:\", cbPharmacy,\r\n                \"Status:\", cbStatus);\r\n\r\n        addPair(form, gc, row++, \"Issue Date (yyyy-MM-dd):\", txtIssueDate,\r\n                \"Collection Date (yyyy-MM-dd):\", txtCollectionDate);\r\n\r\n        // Instructions field\r\n        gc.gridy = row;\r\n        gc.gridx = 0;\r\n        gc.gridwidth = 1;\r\n        form.add(new JLabel(\"Instructions:\"), gc);\r\n\r\n        gc.gridx = 1;\r\n        gc.gridwidth = 3;\r\n        form.add(new JScrollPane(txtInstructions), gc);\r\n\r\n        add(form, BorderLayout.CENTER);\r\n\r\n        // ============================================================\r\n        // BUTTONS\r\n        // ============================================================\r\n        JButton btnAdd    = new JButton(\"Add\");\r\n        JButton btnUpdate = new JButton(\"Update Selected\");\r\n        JButton btnDelete = new JButton(\"Delete Selected\");\r\n\r\n        btnAdd.addActionListener(e -> onAdd());\r\n        btnUpdate.addActionListener(e -> onUpdate());\r\n        btnDelete.addActionListener(e -> onDelete());\r\n\r\n        JPanel btnPanel = new JPanel(new FlowLayout(FlowLayout.CENTER, 20, 10));\r\n        btnPanel.add(btnAdd);\r\n        btnPanel.add(btnUpdate);\r\n        btnPanel.add(btnDelete);\r\n\r\n        add(btnPanel, BorderLayout.NORTH);\r\n\r\n        table.getSelectionModel().addListSelectionListener(e -> {\r\n            if (!e.getValueIsAdjusting()) loadSelectedRowIntoForm();\r\n        });\r\n    }\r\n\r\n    private void addPair(JPanel panel, GridBagConstraints gc, int row,\r\n                         String label1, JComponent field1,\r\n                         String label2, JComponent field2) {\r\n\r\n        gc.gridy = row;\r\n\r\n        gc.gridx = 0;\r\n        panel.add(new JLabel(label1), gc);\r\n        gc.gridx = 1;\r\n        panel.add(field1, gc);\r\n\r\n        gc.gridx = 2;\r\n        panel.add(new JLabel(label2), gc);\r\n        gc.gridx = 3;\r\n        panel.add(field2, gc);\r\n    }\r\n\r\n    // ============================================================\r\n    // Controller Hooks\r\n    // ============================================================\r\n    public void setController(PrescriptionController controller) {\r\n        this.controller = controller;\r\n    }\r\n\r\n    public void populateDropdowns(List<String> patientIds,\r\n                                  List<String> clinicianIds,\r\n                                  List<String> drugs,\r\n                                  List<String> pharmacies,\r\n                                  List<String> appointmentIds) {\r\n\r\n        cbPatientId.removeAllItems();\r\n        for (String id : patientIds) cbPatientId.addItem(id);\r\n\r\n        cbClinicianId.removeAllItems();\r\n        for (String id : clinicianIds) cbClinicianId.addItem(id);\r\n\r\n        cbDrug.removeAllItems();\r\n        for (String d : drugs) cbDrug.addItem(d);\r\n\r\n        cbPharmacy.removeAllItems();\r\n        for (String ph : pharmacies) cbPharmacy.addItem(ph);\r\n\r\n        cbAppointmentId.removeAllItems();\r\n        for (String ap : appointmentIds) cbAppointmentId.addItem(ap);\r\n    }\r\n\r\n    public void setNextId(String id) {\r\n        lblId.setText(id);\r\n    }\r\n\r\n    public void showPrescriptions(List<Prescription> list) {\r\n        model.setRowCount(0);\r\n        for (Prescription p : list) {\r\n            model.addRow(new Object[]{\r\n                    p.getId(),\r\n                    p.getPatientId(),\r\n                    p.getClinicianId(),\r\n                    p.getAppointmentId(),\r\n                    p.getPrescriptionDate(),\r\n                    p.getMedication(),\r\n                    p.getDosage(),\r\n                    p.getFrequency(),\r\n                    p.getDurationDays(),\r\n                    p.getQuantity(),\r\n                    p.getInstructions(),\r\n                    p.getPharmacyName(),\r\n                    p.getStatus(),\r\n                    p.getIssueDate(),\r\n                    p.getCollectionDate()\r\n            });\r\n        }\r\n    }\r\n\r\n    // ============================================================\r\n    // ADD\r\n    // ============================================================\r\n    private void onAdd() {\r\n        if (controller == null) return;\r\n\r\n        String errors = validateForm();\r\n        if (!errors.isEmpty()) {\r\n            JOptionPane.showMessageDialog(this, errors,\r\n                    \"Validation error\", JOptionPane.ERROR_MESSAGE);\r\n            return;\r\n        }\r\n\r\n        Prescription p = buildFromForm(lblId.getText());\r\n        controller.addPrescription(p);\r\n        clearFormButKeepIds();\r\n    }\r\n\r\n    // ============================================================\r\n    // UPDATE\r\n    // ============================================================\r\n    private void onUpdate() {\r\n        if (controller == null) return;\r\n\r\n        int row = table.getSelectedRow();\r\n        if (row < 0) {\r\n            JOptionPane.showMessageDialog(this, \"Select a row to update.\");\r\n            return;\r\n        }\r\n\r\n        String errors = validateForm();\r\n        if (!errors.isEmpty()) {\r\n            JOptionPane.showMessageDialog(this, errors,\r\n                    \"Validation error\", JOptionPane.ERROR_MESSAGE);\r\n            return;\r\n        }\r\n\r\n        String id = lblId.getText();\r\n        Prescription p = buildFromForm(id);\r\n        controller.updatePrescription(p);\r\n    }\r\n\r\n    // ============================================================\r\n    // DELETE\r\n    // ============================================================\r\n    private void onDelete() {\r\n        if (controller == null) return;\r\n\r\n        int row = table.getSelectedRow();\r\n        if (row < 0) {\r\n            JOptionPane.showMessageDialog(this, \"Select a row to delete.\");\r\n            return;\r\n        }\r\n\r\n        String id = model.getValueAt(row, 0).toString();\r\n        controller.deleteById(id);\r\n    }\r\n\r\n    // ============================================================\r\n    // Build Model from Form\r\n    // ============================================================\r\n    private Prescription buildFromForm(String id) {\r\n        return new Prescription(\r\n                id,\r\n                (String) cbPatientId.getSelectedItem(),\r\n                (String) cbClinicianId.getSelectedItem(),\r\n                (String) cbAppointmentId.getSelectedItem(),   //  from dropdown\r\n                txtPrescDate.getText().trim(),\r\n                (String) cbDrug.getSelectedItem(),\r\n                txtDosage.getText().trim(),\r\n                txtFrequency.getText().trim(),\r\n                txtDuration.getText().trim(),\r\n                txtQuantity.getText().trim(),\r\n                txtInstructions.getText().trim(),\r\n                (String) cbPharmacy.getSelectedItem(),\r\n                (String) cbStatus.getSelectedItem(),\r\n                txtIssueDate.getText().trim(),\r\n                txtCollectionDate.getText().trim()\r\n        );\r\n    }\r\n\r\n    // ============================================================\r\n    // Load selected table row  form\r\n    // ============================================================\r\n    private void loadSelectedRowIntoForm() {\r\n        int row = table.getSelectedRow();\r\n        if (row < 0) return;\r\n\r\n        lblId.setText(model.getValueAt(row, 0).toString());\r\n        cbPatientId.setSelectedItem(model.getValueAt(row, 1));\r\n        cbClinicianId.setSelectedItem(model.getValueAt(row, 2));\r\n\r\n        cbAppointmentId.setSelectedItem(model.getValueAt(row, 3));\r\n        txtPrescDate.setText(value(row, 4));\r\n        cbDrug.setSelectedItem(model.getValueAt(row, 5));\r\n        txtDosage.setText(value(row, 6));\r\n        txtFrequency.setText(value(row, 7));\r\n        txtDuration.setText(value(row, 8));\r\n        txtQuantity.setText(value(row, 9));\r\n        txtInstructions.setText(value(row, 10));\r\n        cbPharmacy.setSelectedItem(model.getValueAt(row, 11));\r\n        cbStatus.setSelectedItem(model.getValueAt(row, 12));\r\n        txtIssueDate.setText(value(row, 13));\r\n        txtCollectionDate.setText(value(row, 14));\r\n    }\r\n\r\n    private String value(int row, int col) {\r\n        Object v = model.getValueAt(row, col);\r\n        return v == null ? \"\" : v.toString();\r\n    }\r\n\r\n    // ============================================================\r\n    // VALIDATION\r\n    // ============================================================\r\n    private String validateForm() {\r\n        StringBuilder sb = new StringBuilder();\r\n\r\n        if (cbPatientId.getSelectedItem() == null)\r\n            sb.append(\"- Patient ID is required.\\n\");\r\n\r\n        if (cbClinicianId.getSelectedItem() == null)\r\n            sb.append(\"- Clinician ID is required.\\n\");\r\n\r\n        if (cbDrug.getSelectedItem() == null)\r\n            sb.append(\"- Drug must be selected.\\n\");\r\n\r\n        if (txtDosage.getText().trim().isEmpty())\r\n            sb.append(\"- Dosage is required.\\n\");\r\n\r\n        if (!txtDuration.getText().trim().isEmpty()) {\r\n            try { Integer.parseInt(txtDuration.getText().trim()); }\r\n            catch (NumberFormatException e) {\r\n                sb.append(\"- Duration must be a number.\\n\");\r\n            }\r\n        }\r\n\r\n        if (!txtQuantity.getText().trim().isEmpty()) {\r\n            try { Integer.parseInt(txtQuantity.getText().trim()); }\r\n            catch (NumberFormatException e) {\r\n                sb.append(\"- Quantity must be a number.\\n\");\r\n            }\r\n        }\r\n\r\n        checkDate(txtPrescDate.getText().trim(), \"Prescription Date\", sb);\r\n        if (!txtIssueDate.getText().trim().isEmpty())\r\n            checkDate(txtIssueDate.getText().trim(), \"Issue Date\", sb);\r\n        if (!txtCollectionDate.getText().trim().isEmpty())\r\n            checkDate(txtCollectionDate.getText().trim(), \"Collection Date\", sb);\r\n\r\n        return sb.toString();\r\n    }\r\n\r\n    private void checkDate(String value, String label, StringBuilder sb) {\r\n        if (value.isEmpty()) return;\r\n        sdf.setLenient(false);\r\n        try { sdf.parse(value); }\r\n        catch (ParseException e) {\r\n            sb.append(\"- \").append(label)\r\n              .append(\" must be in format \").append(DATE_PATTERN).append(\".\\n\");\r\n        }\r\n    }\r\n\r\n    private void clearFormButKeepIds() {\r\n        txtPrescDate.setText(\"\");\r\n        txtDosage.setText(\"\");\r\n        txtFrequency.setText(\"\");\r\n        txtDuration.setText(\"\");\r\n        txtQuantity.setText(\"\");\r\n        cbStatus.setSelectedIndex(0);   // reset\r\n        txtIssueDate.setText(\"\");\r\n        txtCollectionDate.setText(\"\");\r\n        txtInstructions.setText(\"\");\r\n        // keep dropdown selections and ID\r\n    }\r\n}\r\n",
      "info": {
        "size": 14563,
        "last_modified": "2025-12-14T02:19:25.1648279",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    },
    {
      "path": "src\\view\\ReferralView.java",
      "content": "package view;\r\n\r\nimport controller.ReferralController;\r\nimport model.Referral;\r\n\r\nimport javax.swing.*;\r\nimport javax.swing.table.DefaultTableModel;\r\nimport javax.swing.text.DateFormatter;\r\nimport java.awt.*;\r\nimport java.text.DateFormat;\r\nimport java.text.SimpleDateFormat;\r\nimport java.time.LocalDate;\r\nimport java.time.format.DateTimeFormatter;\r\nimport java.util.List;\r\n\r\npublic class ReferralView extends JPanel {\r\n\r\n    private ReferralController controller;\r\n    private JTable table;\r\n    private DefaultTableModel model;\r\n\r\n    // Text fields\r\n    private JTextField txtId, txtReason, txtRequestedService,\r\n            txtCreatedDate, txtLastUpdated;\r\n\r\n    private JTextArea txtClinicalSummary, txtNotes;\r\n\r\n    private JFormattedTextField txtReferralDate;\r\n\r\n    // ComboBoxes\r\n    private JComboBox<String> cbPatientId;\r\n    private JComboBox<String> cbRefClin, cbToClin;\r\n    private JComboBox<String> cbRefFacility, cbToFacility;\r\n    private JComboBox<String> cbUrgency;\r\n    private JComboBox<String> cbAppointmentId;\r\n    private JComboBox<String> cbStatus;     // NEW DROPDOWN\r\n\r\n    private final DateFormat dateFormat = new SimpleDateFormat(\"dd/MM/yyyy\");\r\n    private final DateTimeFormatter localDateFormatter =\r\n            DateTimeFormatter.ofPattern(\"dd/MM/yyyy\");\r\n\r\n    public ReferralView() {\r\n\r\n        setLayout(new BorderLayout(10,10));\r\n\r\n        // ============================================================\r\n        // TABLE AT TOP  ALL REFERRAL FIELDS\r\n        // ============================================================\r\n        model = new DefaultTableModel(\r\n                new Object[]{\r\n                        \"ID\",\r\n                        \"Patient\",\r\n                        \"Ref Clin\",\r\n                        \"To Clin\",\r\n                        \"Ref Facility\",\r\n                        \"To Facility\",\r\n                        \"Date\",\r\n                        \"Urgency\",\r\n                        \"Reason\",\r\n                        \"Clinical Summary\",\r\n                        \"Requested Service\",\r\n                        \"Status\",\r\n                        \"Appointment\",\r\n                        \"Notes\",\r\n                        \"Created\",\r\n                        \"Updated\"\r\n                }, 0\r\n        );\r\n\r\n        table = new JTable(model);\r\n        table.setRowHeight(18);\r\n        add(new JScrollPane(table), BorderLayout.NORTH);\r\n\r\n        // ============================================================\r\n        // FORM (4-COLUMN GRID)\r\n        // ============================================================\r\n        JPanel formPanel = new JPanel();\r\n        formPanel.setBorder(BorderFactory.createEmptyBorder(20, 20, 20, 20));\r\n        formPanel.setLayout(new GridLayout(0, 4, 20, 10));\r\n\r\n        txtId = createField();\r\n        txtReason = createField();\r\n        txtRequestedService = createField();\r\n\r\n        txtCreatedDate = createField(); txtCreatedDate.setEditable(false);\r\n        txtLastUpdated = createField(); txtLastUpdated.setEditable(false);\r\n\r\n        cbPatientId = createCombo();\r\n        cbRefClin = createCombo();\r\n        cbToClin = createCombo();\r\n        cbRefFacility = createCombo();\r\n        cbToFacility = createCombo();\r\n        cbAppointmentId = createCombo();\r\n\r\n        // Urgency dropdown\r\n        cbUrgency = new JComboBox<>(new String[]{\r\n                \"Routine\",\r\n                \"Urgent\",\r\n                \"Non-urgent\",\r\n                \"2-week wait\"\r\n        });\r\n        cbUrgency.setFont(new Font(\"SansSerif\", Font.PLAIN, 12));\r\n\r\n        // NEW STATUS DROPDOWN\r\n        cbStatus = new JComboBox<>(new String[]{\r\n                \"Pending\",\r\n                \"Sent\",\r\n                \"Received\",\r\n                \"In Review\",\r\n                \"Accepted\",\r\n                \"Rejected\",\r\n                \"Completed\",\r\n                \"Cancelled\"\r\n        });\r\n        cbStatus.setFont(new Font(\"SansSerif\", Font.PLAIN, 12));\r\n\r\n        txtReferralDate = createDateField();\r\n\r\n        txtClinicalSummary = createArea();\r\n        txtNotes = createArea();\r\n\r\n        // ============================================================\r\n        // ADD ROWS\r\n        // ============================================================\r\n        formPanel.add(labeled(\"Referral ID:\", txtId));\r\n        formPanel.add(labeled(\"Patient ID:\", cbPatientId));\r\n        formPanel.add(labeled(\"Referring Clinician ID:\", cbRefClin));\r\n        formPanel.add(labeled(\"Referred-To Clinician ID:\", cbToClin));\r\n\r\n        formPanel.add(labeled(\"Referring Facility ID:\", cbRefFacility));\r\n        formPanel.add(labeled(\"Referred-To Facility ID:\", cbToFacility));\r\n        formPanel.add(labeled(\"Referral Date (dd/MM/yyyy):\", txtReferralDate));\r\n        formPanel.add(labeled(\"Urgency Level:\", cbUrgency));\r\n\r\n        formPanel.add(labeled(\"Referral Reason:\", txtReason));\r\n        formPanel.add(labeled(\"Requested Service:\", txtRequestedService));\r\n        formPanel.add(labeled(\"Status:\", cbStatus));                   // UPDATED\r\n        formPanel.add(labeled(\"Appointment ID:\", cbAppointmentId));\r\n\r\n        formPanel.add(labeled(\"Clinical Summary:\", new JScrollPane(txtClinicalSummary)));\r\n        formPanel.add(labeled(\"Notes:\", new JScrollPane(txtNotes)));\r\n        formPanel.add(labeled(\"Created Date:\", txtCreatedDate));\r\n        formPanel.add(labeled(\"Last Updated:\", txtLastUpdated));\r\n\r\n        add(new JScrollPane(formPanel), BorderLayout.CENTER);\r\n\r\n        // ============================================================\r\n        // BUTTON PANEL\r\n        // ============================================================\r\n        JButton btnAdd = new JButton(\"Create Referral\");\r\n        btnAdd.setPreferredSize(new Dimension(160, 30));\r\n        btnAdd.addActionListener(e -> onAdd());\r\n\r\n        JPanel buttonPanel = new JPanel(new FlowLayout(FlowLayout.CENTER, 20, 10));\r\n        buttonPanel.add(btnAdd);\r\n\r\n        add(buttonPanel, BorderLayout.WEST);\r\n    }\r\n\r\n    // ---------- Helper Creators ----------\r\n    private JTextField createField() {\r\n        JTextField f = new JTextField(12);\r\n        f.setPreferredSize(new Dimension(140, 22));\r\n        f.setFont(new Font(\"SansSerif\", Font.PLAIN, 12));\r\n        return f;\r\n    }\r\n\r\n    private JTextArea createArea() {\r\n        JTextArea a = new JTextArea(2, 10);\r\n        a.setLineWrap(true);\r\n        a.setWrapStyleWord(true);\r\n        a.setFont(new Font(\"SansSerif\", Font.PLAIN, 12));\r\n        a.setBorder(BorderFactory.createLineBorder(Color.GRAY));\r\n        return a;\r\n    }\r\n\r\n    private JComboBox<String> createCombo() {\r\n        JComboBox<String> cb = new JComboBox<>();\r\n        cb.setFont(new Font(\"SansSerif\", Font.PLAIN, 12));\r\n        return cb;\r\n    }\r\n\r\n    private JFormattedTextField createDateField() {\r\n        DateFormatter df = new DateFormatter(dateFormat);\r\n        JFormattedTextField f = new JFormattedTextField(df);\r\n        f.setFont(new Font(\"SansSerif\", Font.PLAIN, 12));\r\n        f.setValue(java.util.Date.from(LocalDate.now()\r\n                .atStartOfDay(java.time.ZoneId.systemDefault()).toInstant()));\r\n        return f;\r\n    }\r\n\r\n    private JPanel labeled(String label, Component field) {\r\n        JPanel p = new JPanel(new BorderLayout(3, 2));\r\n        JLabel lbl = new JLabel(label);\r\n        lbl.setFont(new Font(\"SansSerif\", Font.PLAIN, 12));\r\n        p.add(lbl, BorderLayout.NORTH);\r\n        p.add(field, BorderLayout.CENTER);\r\n        return p;\r\n    }\r\n\r\n    // ============================================================\r\n    // CONTROLLER LINKING\r\n    // ============================================================\r\n    public void setController(ReferralController controller) {\r\n        this.controller = controller;\r\n        loadCombos();\r\n        refreshAutoId();\r\n        refreshDates();\r\n    }\r\n\r\n    private void loadCombos() {\r\n        cbPatientId.removeAllItems();\r\n        cbRefClin.removeAllItems();\r\n        cbToClin.removeAllItems();\r\n        cbRefFacility.removeAllItems();\r\n        cbToFacility.removeAllItems();\r\n        cbAppointmentId.removeAllItems();\r\n\r\n        // patients\r\n        for (String id : controller.getPatientIds()) {\r\n            cbPatientId.addItem(id);\r\n        }\r\n\r\n        // clinicians\r\n        for (String id : controller.getClinicianIds()) {\r\n            cbRefClin.addItem(id);\r\n            cbToClin.addItem(id);\r\n        }\r\n\r\n        // facilities\r\n        for (String id : controller.getFacilityIds()) {\r\n            cbRefFacility.addItem(id);\r\n            cbToFacility.addItem(id);\r\n        }\r\n\r\n        // appointments\r\n        for (String id : controller.getAppointmentIds()) {\r\n            cbAppointmentId.addItem(id);\r\n        }\r\n    }\r\n\r\n    private void refreshAutoId() {\r\n        txtId.setText(controller.getNextReferralId());\r\n        txtId.setEditable(false);\r\n    }\r\n\r\n    private void refreshDates() {\r\n        String today = LocalDate.now().format(localDateFormatter);\r\n        txtCreatedDate.setText(today);\r\n        txtLastUpdated.setText(today);\r\n    }\r\n\r\n    // ============================================================\r\n    // DISPLAY REFERRALS\r\n    // ============================================================\r\n    public void showReferrals(List<Referral> list) {\r\n        model.setRowCount(0);\r\n        for (Referral r : list) {\r\n            model.addRow(new Object[]{\r\n                    r.getId(),\r\n                    r.getPatientId(),\r\n                    r.getReferringClinicianId(),\r\n                    r.getReferredToClinicianId(),\r\n                    r.getReferringFacilityId(),\r\n                    r.getReferredToFacilityId(),\r\n                    r.getReferralDate(),\r\n                    r.getUrgencyLevel(),\r\n                    r.getReferralReason(),\r\n                    r.getClinicalSummary(),\r\n                    r.getRequestedService(),\r\n                    r.getStatus(),\r\n                    r.getAppointmentId(),\r\n                    r.getNotes(),\r\n                    r.getCreatedDate(),\r\n                    r.getLastUpdated()\r\n            });\r\n        }\r\n    }\r\n\r\n    // ============================================================\r\n    // ADD REFERRAL\r\n    // ============================================================\r\n    private void onAdd() {\r\n\r\n        String errors = validateForm();\r\n        if (!errors.isEmpty()) {\r\n            JOptionPane.showMessageDialog(this, errors,\r\n                    \"Validation Error\", JOptionPane.ERROR_MESSAGE);\r\n            return;\r\n        }\r\n\r\n        Referral r = new Referral(\r\n                txtId.getText().trim(),\r\n                (String) cbPatientId.getSelectedItem(),\r\n                (String) cbRefClin.getSelectedItem(),\r\n                (String) cbToClin.getSelectedItem(),\r\n                (String) cbRefFacility.getSelectedItem(),\r\n                (String) cbToFacility.getSelectedItem(),\r\n                txtReferralDate.getText().trim(),\r\n                (String) cbUrgency.getSelectedItem(),\r\n                txtReason.getText().trim(),\r\n                txtClinicalSummary.getText().trim(),\r\n                txtRequestedService.getText().trim(),\r\n                (String) cbStatus.getSelectedItem(),         // UPDATED\r\n                (String) cbAppointmentId.getSelectedItem(),\r\n                txtNotes.getText().trim(),\r\n                txtCreatedDate.getText().trim(),\r\n                LocalDate.now().format(localDateFormatter)\r\n        );\r\n\r\n        controller.addReferral(r);\r\n\r\n        JOptionPane.showMessageDialog(this,\r\n                \"Referral \" + r.getId() + \" created successfully.\");\r\n\r\n        refreshAutoId();\r\n        refreshDates();\r\n        clearFormButKeepIds();\r\n    }\r\n\r\n    private String validateForm() {\r\n        StringBuilder sb = new StringBuilder();\r\n\r\n        if (cbPatientId.getSelectedItem() == null)\r\n            sb.append(\"- Patient ID required\\n\");\r\n\r\n        if (cbRefClin.getSelectedItem() == null)\r\n            sb.append(\"- Referring clinician required\\n\");\r\n\r\n        if (cbToClin.getSelectedItem() == null)\r\n            sb.append(\"- Referred-to clinician required\\n\");\r\n\r\n        if (cbRefFacility.getSelectedItem() == null)\r\n            sb.append(\"- Referring facility required\\n\");\r\n\r\n        if (cbToFacility.getSelectedItem() == null)\r\n            sb.append(\"- Referred-to facility required\\n\");\r\n\r\n        if (txtReferralDate.getText().trim().isEmpty())\r\n            sb.append(\"- Referral date required\\n\");\r\n\r\n        if (txtReason.getText().trim().isEmpty())\r\n            sb.append(\"- Referral reason required\\n\");\r\n\r\n        if (txtClinicalSummary.getText().trim().isEmpty())\r\n            sb.append(\"- Clinical summary required\\n\");\r\n\r\n        return sb.toString();\r\n    }\r\n\r\n    private void clearFormButKeepIds() {\r\n        txtReason.setText(\"\");\r\n        txtClinicalSummary.setText(\"\");\r\n        txtRequestedService.setText(\"\");\r\n        txtNotes.setText(\"\");\r\n    }\r\n}\r\n",
      "info": {
        "size": 12867,
        "last_modified": "2025-12-14T02:19:25.1810307",
        "mime_type": "text/x-java-source",
        "extension": ".java"
      }
    }
  ]
}